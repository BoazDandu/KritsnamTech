"use strict";(self.webpackChunkkritsnamtechnew=self.webpackChunkkritsnamtechnew||[]).push([[179],{2011:(ft,Ce,F)=>{F.d(Ce,{Dh:()=>fe,GT:()=>ce,cc:()=>xe,hO:()=>Be,on:()=>G,pX:()=>ae,xv:()=>me});var c=F(4650),$=F(9260),N=F(2122);ft=F.hmd(ft);const se=["ngOnDestroy"],ae=(De,Te,Me,Le={})=>new Proxy(De,{get:(Pe,Se)=>Me.runOutsideAngular(()=>{var He;if(De[Se])return!(null===(He=Le?.spy)||void 0===He)&&He.get&&Le.spy.get(Se,De[Se]),De[Se];if(se.indexOf(Se)>-1)return()=>{};const te=Te.toPromise().then(de=>{const Ie=de&&de[Se];return"function"==typeof Ie?Ie.bind(de):Ie&&Ie.then?Ie.then(Q=>Me.run(()=>Q)):Me.run(()=>Ie)});return new Proxy(()=>{},{get:(de,Ie)=>te[Ie],apply:(de,Ie,Q)=>te.then(X=>{var pe;const oe=X&&X(...Q);return!(null===(pe=Le?.spy)||void 0===pe)&&pe.apply&&Le.spy.apply(Se,Q,oe),oe})})})}),ce=(De,Te)=>{Te.forEach(Me=>{Object.getOwnPropertyNames(Me.prototype||Me).forEach(Le=>{Object.defineProperty(De.prototype,Le,Object.getOwnPropertyDescriptor(Me.prototype||Me,Le))})})};class ve{constructor(Te){return Te}}const fe=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function G(De,Te,Me){const Pe="object"==typeof Me&&Me||{};Pe.name=Pe.name||"string"==typeof Me&&Me||"[DEFAULT]";const He=$.Z.apps.filter(te=>te&&te.name===Pe.name)[0]||Te.runOutsideAngular(()=>$.Z.initializeApp(De,Pe));try{JSON.stringify(De)!==JSON.stringify(He.options)&&W("error",`${He.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(He)}const W=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)},J={provide:ve,useFactory:G,deps:[fe,c.R0b,[new c.FiY,me]]};let Be=(()=>{class De{constructor(Me){$.Z.registerVersion("angularfire",N.q4.full,"core"),$.Z.registerVersion("angularfire",N.q4.full,"app-compat"),$.Z.registerVersion("angular",c.q4F.full,Me.toString())}static initializeApp(Me,Le){return{ngModule:De,providers:[{provide:fe,useValue:Me},{provide:me,useValue:Le}]}}}return De.\u0275fac=function(Me){return new(Me||De)(c.LFG(c.Lbi))},De.\u0275mod=c.oAB({type:De}),De.\u0275inj=c.cJS({providers:[J]}),De})();function xe(De,Te,Me,Le,Pe){const[,Se,He]=globalThis.\u0275AngularfireInstanceCache.find(te=>te[0]===De)||[];if(Se)return function qe(De,Te){try{return De.toString()===Te.toString()}catch{return De===Te}}(Pe,He)||(_e("error",`${Te} was already initialized on the ${Me} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Pe,was:He})),Se;{const te=Le();return globalThis.\u0275AngularfireInstanceCache.push([De,te,Pe]),te}}const it=!!ft.hot,_e=(De,...Te)=>{(0,c.X6Q)()&&typeof console<"u"&&console[De](...Te)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ft,Ce,F)=>{F.d(Ce,{q4:()=>Ra,iC:()=>Pa,fc:()=>_d,HU:()=>Ql,vb:()=>Ws,JM:()=>Vt});var c=F(4650),$=F(259),N=F(5861),se=F(9681),ae=F(2090),ce=F(4859),ve=F(1877),fe=F(8766);const me="@firebase/installations",G="0.6.0",J=`w:${G}`,Be="FIS_v2",Te=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Me(b){return b instanceof ae.ZR&&b.code.includes("request-failed")}function Le({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Pe(b){return{token:b.token,requestStatus:2,expiresIn:X(b.expiresIn),creationTime:Date.now()}}function Se(b,D){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(b,D){const Z=(yield D.json()).error;return Te.create("request-failed",{requestName:b,serverCode:Z.code,serverMessage:Z.message,serverStatus:Z.status})})).apply(this,arguments)}function te({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function de(b,{refreshToken:D}){const k=te(b);return k.append("Authorization",function pe(b){return`${Be} ${b}`}(D)),k}function Ie(b){return Q.apply(this,arguments)}function Q(){return(Q=(0,N.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function X(b){return Number(b.replace("s","000"))}function oe(b,D){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:k}){const Z=Le(b),ee=te(b),ne=D.getImmediate({optional:!0});if(ne){const lt=yield ne.getHeartbeatsHeader();lt&&ee.append("x-firebase-client",lt)}const et={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:Be,appId:b.appId,sdkVersion:J})},pt=yield Ie(()=>fetch(Z,et));if(pt.ok){const lt=yield pt.json();return{fid:lt.fid||k,registrationStatus:2,refreshToken:lt.refreshToken,authToken:Pe(lt.authToken)}}throw yield Se("Create Installation",pt)})).apply(this,arguments)}function Ve(b){return new Promise(D=>{setTimeout(D,b)})}const nn=/^[cdef][\w-]{21}$/;function bt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const k=function Ht(b){return function mt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return nn.test(k)?k:""}catch{return""}}function vt(b){return`${b.appName}!${b.appId}`}const Jt=new Map;function cr(b,D){const k=vt(b);Ei(k,D),function ri(b,D){const k=function kn(){return!Dr&&"BroadcastChannel"in self&&(Dr=new BroadcastChannel("[Firebase] FID Change"),Dr.onmessage=b=>{Ei(b.data.key,b.data.fid)}),Dr}();k&&k.postMessage({key:b,fid:D}),function Bi(){0===Jt.size&&Dr&&(Dr.close(),Dr=null)}()}(k,D)}function Ei(b,D){const k=Jt.get(b);if(k)for(const Z of k)Z(D)}let Dr=null;const Vn="firebase-installations-store";let ii=null;function Ii(){return ii||(ii=(0,fe.X3)("firebase-installations-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(Vn)}})),ii}function gn(b,D){return dr.apply(this,arguments)}function dr(){return(dr=(0,N.Z)(function*(b,D){const k=vt(b),ee=(yield Ii()).transaction(Vn,"readwrite"),ne=ee.objectStore(Vn),Oe=yield ne.get(k);return yield ne.put(D,k),yield ee.done,(!Oe||Oe.fid!==D.fid)&&cr(b,D.fid),D})).apply(this,arguments)}function nt(b){return hr.apply(this,arguments)}function hr(){return(hr=(0,N.Z)(function*(b){const D=vt(b),Z=(yield Ii()).transaction(Vn,"readwrite");yield Z.objectStore(Vn).delete(D),yield Z.done})).apply(this,arguments)}function Sr(b,D){return zn.apply(this,arguments)}function zn(){return(zn=(0,N.Z)(function*(b,D){const k=vt(b),ee=(yield Ii()).transaction(Vn,"readwrite"),ne=ee.objectStore(Vn),Oe=yield ne.get(k),et=D(Oe);return void 0===et?yield ne.delete(k):yield ne.put(et,k),yield ee.done,et&&(!Oe||Oe.fid!==et.fid)&&cr(b,et.fid),et})).apply(this,arguments)}function Bn(b){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(b){let D;const k=yield Sr(b.appConfig,Z=>{const ee=St(Z),ne=_t(b,ee);return D=ne.registrationPromise,ne.installationEntry});return""===k.fid?{installationEntry:yield D}:{installationEntry:k,registrationPromise:D}})).apply(this,arguments)}function St(b){return Yn(b||{fid:bt(),registrationStatus:0})}function _t(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Te.create("app-offline"))};const k={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},Z=function Ct(b,D){return mn.apply(this,arguments)}(b,k);return{installationEntry:k,registrationPromise:Z}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Kn(b)}:{installationEntry:D}}function mn(){return(mn=(0,N.Z)(function*(b,D){try{const k=yield oe(b,D);return gn(b.appConfig,k)}catch(k){throw Me(k)&&409===k.customData.serverCode?yield nt(b.appConfig):yield gn(b.appConfig,{fid:D.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Kn(b){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(b){let D=yield si(b.appConfig);for(;1===D.registrationStatus;)yield Ve(100),D=yield si(b.appConfig);if(0===D.registrationStatus){const{installationEntry:k,registrationPromise:Z}=yield Bn(b);return Z||k}return D})).apply(this,arguments)}function si(b){return Sr(b,D=>{if(!D)throw Te.create("installation-not-found");return Yn(D)})}function Yn(b){return function bi(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Ut(b,D){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,N.Z)(function*({appConfig:b,heartbeatServiceProvider:D},k){const Z=Gt(b,k),ee=de(b,k),ne=D.getImmediate({optional:!0});if(ne){const lt=yield ne.getHeartbeatsHeader();lt&&ee.append("x-firebase-client",lt)}const et={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:J,appId:b.appId}})},pt=yield Ie(()=>fetch(Z,et));if(pt.ok)return Pe(yield pt.json());throw yield Se("Generate Auth Token",pt)})).apply(this,arguments)}function Gt(b,{fid:D}){return`${Le(b)}/${D}/authTokens:generate`}function Fr(b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(b,D=!1){let k;const Z=yield Sr(b.appConfig,ne=>{if(!Qt(ne))throw Te.create("not-registered");const Oe=ne.authToken;if(!D&&q(Oe))return ne;if(1===Oe.requestStatus)return k=je(b,D),ne;{if(!navigator.onLine)throw Te.create("app-offline");const et=Y(ne);return k=It(b,et),et}});return k?yield k:Z.authToken})).apply(this,arguments)}function je(b,D){return be.apply(this,arguments)}function be(){return(be=(0,N.Z)(function*(b,D){let k=yield Xe(b.appConfig);for(;1===k.authToken.requestStatus;)yield Ve(100),k=yield Xe(b.appConfig);const Z=k.authToken;return 0===Z.requestStatus?Fr(b,D):Z})).apply(this,arguments)}function Xe(b){return Sr(b,D=>{if(!Qt(D))throw Te.create("not-registered");return function B(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function It(b,D){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,N.Z)(function*(b,D){try{const k=yield Ut(b,D),Z=Object.assign(Object.assign({},D),{authToken:k});return yield gn(b.appConfig,Z),k}catch(k){if(!Me(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const Z=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield gn(b.appConfig,Z)}else yield nt(b.appConfig);throw k}})).apply(this,arguments)}function Qt(b){return void 0!==b&&2===b.registrationStatus}function q(b){return 2===b.requestStatus&&!function H(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function Y(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function V(){return(V=(0,N.Z)(function*(b){const D=b,{installationEntry:k,registrationPromise:Z}=yield Bn(D);return Z?Z.catch(console.error):Fr(D).catch(console.error),k.fid})).apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*(b,D=!1){const k=b;return yield st(k),(yield Fr(k,D)).token})).apply(this,arguments)}function st(b){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,N.Z)(function*(b){const{registrationPromise:D}=yield Bn(b);D&&(yield D)})).apply(this,arguments)}function kl(b){return Te.create("missing-app-config-values",{valueName:b})}const Rl="installations",Fo=b=>{const D=b.getProvider("app").getImmediate(),k=function Lo(b){if(!b||!b.options)throw kl("App Configuration");if(!b.name)throw kl("App Name");const D=["projectId","apiKey","appId"];for(const k of D)if(!b.options[k])throw kl(k);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:k,heartbeatServiceProvider:(0,se._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Yc=b=>{const D=b.getProvider("app").getImmediate(),k=(0,se._getProvider)(D,Rl).getImmediate();return{getId:()=>function M(b){return V.apply(this,arguments)}(k),getToken:ee=>function ue(b){return ke.apply(this,arguments)}(k,ee)}};(function Ml(){(0,se._registerComponent)(new ce.wA(Rl,Fo,"PUBLIC")),(0,se._registerComponent)(new ce.wA("installations-internal",Yc,"PRIVATE"))})(),(0,se.registerVersion)(me,G),(0,se.registerVersion)(me,G,"esm2017");const hu="@firebase/remote-config",jn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fs{constructor(D,k,Z,ee){this.client=D,this.storage=k,this.storageCache=Z,this.logger=ee}isCachedDataFresh(D,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Z=Date.now()-k,ee=Z<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Z}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${ee}.`),ee}fetch(D){var k=this;return(0,N.Z)(function*(){const[Z,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(D.cacheMaxAgeMillis,Z))return ee;D.eTag=ee&&ee.eTag;const ne=yield k.client.fetch(D),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Oe),ne})()}}function zr(b=navigator){return b.languages&&b.languages[0]||b.language}class Ci{constructor(D,k,Z,ee,ne,Oe){this.firebaseInstallations=D,this.sdkVersion=k,this.namespace=Z,this.projectId=ee,this.apiKey=ne,this.appId=Oe}fetch(D){var k=this;return(0,N.Z)(function*(){const[Z,ee]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,et={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},pt={sdk_version:k.sdkVersion,app_instance_id:Z,app_instance_id_token:ee,app_id:k.appId,language_code:zr()},lt={method:"POST",headers:et,body:JSON.stringify(pt)},Nt=fetch(Oe,lt),At=new Promise((kr,Rr)=>{D.signal.addEventListener(()=>{const ea=new Error("The operation was aborted.");ea.name="AbortError",Rr(ea)})});let di;try{yield Promise.race([Nt,At]),di=yield Nt}catch(kr){let Rr="fetch-client-network";throw"AbortError"===kr?.name&&(Rr="fetch-timeout"),jn.create(Rr,{originalErrorMessage:kr?.message})}let Mn=di.status;const Jo=di.headers.get("ETag")||void 0;let Jl,bo;if(200===di.status){let kr;try{kr=yield di.json()}catch(Rr){throw jn.create("fetch-client-parse",{originalErrorMessage:Rr?.message})}Jl=kr.entries,bo=kr.state}if("INSTANCE_STATE_UNSPECIFIED"===bo?Mn=500:"NO_CHANGE"===bo?Mn=304:("NO_TEMPLATE"===bo||"EMPTY_CONFIG"===bo)&&(Jl={}),304!==Mn&&200!==Mn)throw jn.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:Jo,config:Jl}})()}}class fs{constructor(D,k){this.client=D,this.storage=k}fetch(D){var k=this;return(0,N.Z)(function*(){const Z=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(D,Z)})()}attemptFetch(D,{throttleEndTimeMillis:k,backoffCount:Z}){var ee=this;return(0,N.Z)(function*(){yield function Kr(b,D){return new Promise((k,Z)=>{const ee=Math.max(D-Date.now(),0),ne=setTimeout(k,ee);b.addEventListener(()=>{clearTimeout(ne),Z(jn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,k);try{const ne=yield ee.client.fetch(D);return yield ee.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function wn(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ne))throw ne;const Oe={throttleEndTimeMillis:Date.now()+(0,ae.$s)(Z),backoffCount:Z+1};return yield ee.storage.setThrottleMetadata(Oe),ee.attemptFetch(D,Oe)}})()}}class mu{constructor(D,k,Z,ee,ne){this.app=D,this._client=k,this._storageCache=Z,this._storage=ee,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function ps(b,D){const k=b.target.error||void 0;return jn.create(D,{originalErrorMessage:k&&k?.message})}const Di="app_namespace_store";class ai{constructor(D,k,Z,ee=function oi(){return new Promise((b,D)=>{try{const k=indexedDB.open("firebase_remote_config",1);k.onerror=Z=>{D(ps(Z,"storage-open"))},k.onsuccess=Z=>{b(Z.target.result)},k.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(Di,{keyPath:"compositeKey"})}}catch(k){D(jn.create("storage-open",{originalErrorMessage:k?.message}))}})}()){this.appId=D,this.appName=k,this.namespace=Z,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var k=this;return(0,N.Z)(function*(){const Z=yield k.openDbPromise;return new Promise((ee,ne)=>{const et=Z.transaction([Di],"readonly").objectStore(Di),pt=k.createCompositeKey(D);try{const lt=et.get(pt);lt.onerror=Nt=>{ne(ps(Nt,"storage-get"))},lt.onsuccess=Nt=>{const At=Nt.target.result;ee(At?At.value:void 0)}}catch(lt){ne(jn.create("storage-get",{originalErrorMessage:lt?.message}))}})})()}set(D,k){var Z=this;return(0,N.Z)(function*(){const ee=yield Z.openDbPromise;return new Promise((ne,Oe)=>{const pt=ee.transaction([Di],"readwrite").objectStore(Di),lt=Z.createCompositeKey(D);try{const Nt=pt.put({compositeKey:lt,value:k});Nt.onerror=At=>{Oe(ps(At,"storage-set"))},Nt.onsuccess=()=>{ne()}}catch(Nt){Oe(jn.create("storage-set",{originalErrorMessage:Nt?.message}))}})})()}delete(D){var k=this;return(0,N.Z)(function*(){const Z=yield k.openDbPromise;return new Promise((ee,ne)=>{const et=Z.transaction([Di],"readwrite").objectStore(Di),pt=k.createCompositeKey(D);try{const lt=et.delete(pt);lt.onerror=Nt=>{ne(ps(Nt,"storage-delete"))},lt.onsuccess=()=>{ee()}}catch(lt){ne(jn.create("storage-delete",{originalErrorMessage:lt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class gs{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,N.Z)(function*(){const k=D.storage.getLastFetchStatus(),Z=D.storage.getLastSuccessfulFetchTimestampMillis(),ee=D.storage.getActiveConfig(),ne=yield k;ne&&(D.lastFetchStatus=ne);const Oe=yield Z;Oe&&(D.lastSuccessfulFetchTimestampMillis=Oe);const et=yield ee;et&&(D.activeConfig=et)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function dg(){return _u.apply(this,arguments)}function _u(){return(_u=(0,N.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function _a(){(0,se._registerComponent)(new ce.wA("remote-config",function b(D,{instanceIdentifier:k}){const Z=D.getProvider("app").getImmediate(),ee=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,ae.hl)())throw jn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Oe,appId:et}=Z.options;if(!ne)throw jn.create("registration-project-id");if(!Oe)throw jn.create("registration-api-key");if(!et)throw jn.create("registration-app-id");const pt=new ai(et,Z.name,k=k||"firebase"),lt=new gs(pt),Nt=new ve.Yd(hu);Nt.logLevel=ve.in.ERROR;const At=new Ci(ee,se.SDK_VERSION,k,ne,Oe,et),di=new fs(At,pt),Mn=new Fs(di,pt,lt,Nt),Jo=new mu(Z,Mn,lt,pt,Nt);return function vn(b){const D=(0,ae.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Jo),Jo},"PUBLIC").setMultipleInstances(!0)),(0,se.registerVersion)(hu,"0.4.0"),(0,se.registerVersion)(hu,"0.4.0","esm2017")}();const ms="/firebase-messaging-sw.js",Bo="/firebase-cloud-messaging-push-scope",Zo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Xh="google.c.a.c_id",fg="google.c.a.c_l",Qc="google.c.a.ts",ao="google.c.a.e";var uo=(()=>{return(b=uo||(uo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",uo;var b})();function Ji(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xc(b){const k=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Z=atob(k),ee=new Uint8Array(Z.length);for(let ne=0;ne<Z.length;++ne)ee[ne]=Z.charCodeAt(ne);return ee}const yu="fcm_token_details_db",vu="fcm_token_object_Store";function Jh(b){return ya.apply(this,arguments)}function ya(){return ya=(0,N.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(yu))return null;let D=null;return(yield(0,fe.X3)(yu,5,{upgrade:(Z=(0,N.Z)(function*(ee,ne,Oe,et){var pt;if(ne<2||!ee.objectStoreNames.contains(vu))return;const lt=et.objectStore(vu),Nt=yield lt.index("fcmSenderId").get(b);if(yield lt.clear(),Nt)if(2===ne){const At=Nt;if(!At.auth||!At.p256dh||!At.endpoint)return;D={token:At.fcmToken,createTime:null!==(pt=At.createTime)&&void 0!==pt?pt:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Ji(At.vapidKey)}}}else if(3===ne){const At=Nt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ji(At.auth),p256dh:Ji(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ji(At.vapidKey)}}}else if(4===ne){const At=Nt;D={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ji(At.auth),p256dh:Ji(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ji(At.vapidKey)}}}}),function(ne,Oe,et,pt){return Z.apply(this,arguments)})})).close(),yield(0,fe.Lj)(yu),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),Jc(D)?D:null;var Z}),ya.apply(this,arguments)}function Jc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const co="firebase-messaging-store";let ho=null;function fo(){return ho||(ho=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(b,D)=>{0===D&&b.createObjectStore(co)}})),ho}function wu(b){return va.apply(this,arguments)}function va(){return(va=(0,N.Z)(function*(b){const D=Ia(b),Z=yield(yield fo()).transaction(co).objectStore(co).get(D);if(Z)return Z;{const ee=yield Jh(b.appConfig.senderId);if(ee)return yield jo(b,ee),ee}})).apply(this,arguments)}function jo(b,D){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,N.Z)(function*(b,D){const k=Ia(b),ee=(yield fo()).transaction(co,"readwrite");return yield ee.objectStore(co).put(D,k),yield ee.done,D})).apply(this,arguments)}function wa(b){return Ea.apply(this,arguments)}function Ea(){return(Ea=(0,N.Z)(function*(b){const D=Ia(b),Z=(yield fo()).transaction(co,"readwrite");yield Z.objectStore(co).delete(D),yield Z.done})).apply(this,arguments)}function Ia({appConfig:b}){return b.appId}const $n=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Iu(b,D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(b,D){const k=yield es(b),Z=Cu(D),ee={method:"POST",headers:k,body:JSON.stringify(Z)};let ne;try{ne=yield(yield fetch(Tu(b.appConfig),ee)).json()}catch(Oe){throw $n.create("token-subscribe-failed",{errorInfo:Oe?.toString()})}if(ne.error)throw $n.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw $n.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function ba(b,D){return Us.apply(this,arguments)}function Us(){return(Us=(0,N.Z)(function*(b,D){const k=yield es(b),Z=Cu(D.subscriptionOptions),ee={method:"PATCH",headers:k,body:JSON.stringify(Z)};let ne;try{ne=yield(yield fetch(`${Tu(b.appConfig)}/${D.token}`,ee)).json()}catch(Oe){throw $n.create("token-update-failed",{errorInfo:Oe?.toString()})}if(ne.error)throw $n.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw $n.create("token-update-no-token");return ne.token})).apply(this,arguments)}function Yr(b,D){return bu.apply(this,arguments)}function bu(){return(bu=(0,N.Z)(function*(b,D){const Z={method:"DELETE",headers:yield es(b)};try{const ne=yield(yield fetch(`${Tu(b.appConfig)}/${D}`,Z)).json();if(ne.error)throw $n.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(ee){throw $n.create("token-unsubscribe-failed",{errorInfo:ee?.toString()})}})).apply(this,arguments)}function Tu({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function es(b){return nr.apply(this,arguments)}function nr(){return(nr=(0,N.Z)(function*({appConfig:b,installations:D}){const k=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Cu({p256dh:b,auth:D,endpoint:k,vapidKey:Z}){const ee={web:{endpoint:k,auth:D,p256dh:b}};return Z!==Zo&&(ee.web.applicationPubKey=Z),ee}const $o=6048e5;function ef(b){return Si.apply(this,arguments)}function Si(){return(Si=(0,N.Z)(function*(b){const D=yield tf(b.swRegistration,b.vapidKey),k={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:Ji(D.getKey("auth")),p256dh:Ji(D.getKey("p256dh"))},Z=yield wu(b.firebaseDependencies);if(Z){if(td(Z.subscriptionOptions,k))return Date.now()>=Z.createTime+$o?Lt(b,{token:Z.token,createTime:Date.now(),subscriptionOptions:k}):Z.token;try{yield Yr(b.firebaseDependencies,Z.token)}catch(ee){console.warn(ee)}return ed(b.firebaseDependencies,k)}return ed(b.firebaseDependencies,k)})).apply(this,arguments)}function Ll(b){return po.apply(this,arguments)}function po(){return(po=(0,N.Z)(function*(b){const D=yield wu(b.firebaseDependencies);D&&(yield Yr(b.firebaseDependencies,D.token),yield wa(b.firebaseDependencies));const k=yield b.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Lt(b,D){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,N.Z)(function*(b,D){try{const k=yield ba(b.firebaseDependencies,D),Z=Object.assign(Object.assign({},D),{token:k,createTime:Date.now()});return yield jo(b.firebaseDependencies,Z),k}catch(k){throw yield Ll(b),k}})).apply(this,arguments)}function ed(b,D){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,N.Z)(function*(b,D){const Z={token:yield Iu(b,D),createTime:Date.now(),subscriptionOptions:D};return yield jo(b,Z),Z.token})).apply(this,arguments)}function tf(b,D){return Du.apply(this,arguments)}function Du(){return(Du=(0,N.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xc(D)})})).apply(this,arguments)}function td(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function Rn(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function gg(b,D){if(!D.notification)return;b.notification={};const k=D.notification.title;k&&(b.notification.title=k);const Z=D.notification.body;Z&&(b.notification.body=Z);const ee=D.notification.image;ee&&(b.notification.image=ee);const ne=D.notification.icon;ne&&(b.notification.icon=ne)}(D,b),function Re(b,D){!D.data||(b.data=D.data)}(D,b),function Xt(b,D){var k,Z,ee,ne,Oe;if(!(D.fcmOptions||null!==(k=D.notification)&&void 0!==k&&k.click_action))return;b.fcmOptions={};const et=null!==(ee=null===(Z=D.fcmOptions)||void 0===Z?void 0:Z.link)&&void 0!==ee?ee:null===(ne=D.notification)||void 0===ne?void 0:ne.click_action;et&&(b.fcmOptions.link=et);const pt=null===(Oe=D.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;pt&&(b.fcmOptions.analyticsLabel=pt)}(D,b),D}function nf(b){return"object"==typeof b&&!!b&&Xh in b}function nd(b,D){const k=[];for(let Z=0;Z<b.length;Z++)k.push(b.charAt(Z)),Z<D.length&&k.push(D.charAt(Z));return k.join("")}function Su(b){return $n.create("missing-app-config-values",{valueName:b})}nd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class qo{constructor(D,k,Z){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function rr(b){if(!b||!b.options)throw Su("App Configuration Object");if(!b.name)throw Su("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:k}=b;for(const Z of D)if(!k[Z])throw Su(Z);return{appName:b.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:ee,installations:k,analyticsProvider:Z}}_delete(){return Promise.resolve()}}function ts(b){return Go.apply(this,arguments)}function Go(){return(Go=(0,N.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(ms,{scope:Bo}),b.swRegistration.update().catch(()=>{})}catch(D){throw $n.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Au(b,D){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,N.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ts(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw $n.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function mg(b,D){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,N.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Zo)})).apply(this,arguments)}function Ai(){return(Ai=(0,N.Z)(function*(b,D){if(!navigator)throw $n.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw $n.create("permission-blocked");return yield mg(b,D?.vapidKey),yield Au(b,D?.serviceWorkerRegistration),ef(b)})).apply(this,arguments)}function rf(b,D,k){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,N.Z)(function*(b,D,k){const Z=ns(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(Z,{message_id:k[Xh],message_name:k[fg],message_time:k[Qc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ns(b){switch(b){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function xu(){return(xu=(0,N.Z)(function*(b,D){const k=D.data;if(!k.isFirebaseMessaging)return;b.onMessageHandler&&k.messageType===uo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Rn(k)):b.onMessageHandler.next(Rn(k)));const Z=k.data;nf(Z)&&"1"===Z[ao]&&(yield rf(b,k.messageType,Z))})).apply(this,arguments)}const ku="@firebase/messaging",go=b=>{const D=new qo(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function _g(b,D){return xu.apply(this,arguments)}(D,k)),D},Ul=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:Z=>function Hn(b,D){return Ai.apply(this,arguments)}(D,Z)}};function Vl(){return rd.apply(this,arguments)}function rd(){return(rd=(0,N.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sf(){(0,se._registerComponent)(new ce.wA("messaging",go,"PUBLIC")),(0,se._registerComponent)(new ce.wA("messaging-internal",Ul,"PRIVATE")),(0,se.registerVersion)(ku,"0.12.0"),(0,se.registerVersion)(ku,"0.12.0","esm2017")}();const Zl="analytics",ui="firebase_id",id="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uf="https://www.googletagmanager.com/gtag/js",xr=new ve.Yd("@firebase/analytics");function lf(b){return Promise.all(b.map(D=>D.catch(k=>k)))}function Ig(b,D){const k=document.createElement("script");k.src=`${uf}?l=${b}&id=${D}`,k.async=!0,document.head.appendChild(k)}function Zs(b,D,k,Z,ee,ne){return rs.apply(this,arguments)}function rs(){return(rs=(0,N.Z)(function*(b,D,k,Z,ee,ne){const Oe=Z[ee];try{if(Oe)yield D[Oe];else{const pt=(yield lf(k)).find(lt=>lt.measurementId===ee);pt&&(yield D[pt.appId])}}catch(et){xr.error(et)}b("config",ee,ne)})).apply(this,arguments)}function mo(b,D,k,Z,ee){return _s.apply(this,arguments)}function _s(){return(_s=(0,N.Z)(function*(b,D,k,Z,ee){try{let ne=[];if(ee&&ee.send_to){let Oe=ee.send_to;Array.isArray(Oe)||(Oe=[Oe]);const et=yield lf(k);for(const pt of Oe){const lt=et.find(At=>At.measurementId===pt),Nt=lt&&D[lt.appId];if(!Nt){ne=[];break}ne.push(Nt)}}0===ne.length&&(ne=Object.values(D)),yield Promise.all(ne),b("event",Z,ee||{})}catch(ne){xr.error(ne)}})).apply(this,arguments)}function Wo(b){const D=window.document.getElementsByTagName("script");for(const k of Object.values(D))if(k.src&&k.src.includes(uf)&&k.src.includes(b))return k;return null}const Qr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Hl=new class $l{constructor(D={},k=1e3){this.throttleMetadata=D,this.intervalMillis=k}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,k){this.throttleMetadata[D]=k}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function zo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Pu(b){return On.apply(this,arguments)}function On(){return(On=(0,N.Z)(function*(b){var D;const{appId:k,apiKey:Z}=b,ee={method:"GET",headers:zo(Z)},ne=id.replace("{app-id}",k),Oe=yield fetch(ne,ee);if(200!==Oe.status&&304!==Oe.status){let et="";try{const pt=yield Oe.json();null!==(D=pt.error)&&void 0!==D&&D.message&&(et=pt.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:et})}return Oe.json()})).apply(this,arguments)}function Da(b){return $s.apply(this,arguments)}function $s(){return($s=(0,N.Z)(function*(b,D=Hl,k){const{appId:Z,apiKey:ee,measurementId:ne}=b.options;if(!Z)throw Qr.create("no-app-id");if(!ee){if(ne)return{measurementId:ne,appId:Z};throw Qr.create("no-api-key")}const Oe=D.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},et=new Sa;return setTimeout((0,N.Z)(function*(){et.abort()}),void 0!==k?k:6e4),Nu({appId:Z,apiKey:ee,measurementId:ne},Oe,et,D)})).apply(this,arguments)}function Nu(b,D,k){return is.apply(this,arguments)}function is(){return(is=(0,N.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:k},Z,ee=Hl){var ne;const{appId:Oe,measurementId:et}=b;try{yield ad(Z,D)}catch(pt){if(et)return xr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${pt?.message}]`),{appId:Oe,measurementId:et};throw pt}try{const pt=yield Pu(b);return ee.deleteThrottleMetadata(Oe),pt}catch(pt){const lt=pt;if(!ud(lt)){if(ee.deleteThrottleMetadata(Oe),et)return xr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${lt?.message}]`),{appId:Oe,measurementId:et};throw pt}const Nt=503===Number(null===(ne=lt?.customData)||void 0===ne?void 0:ne.httpStatus)?(0,ae.$s)(k,ee.intervalMillis,30):(0,ae.$s)(k,ee.intervalMillis),At={throttleEndTimeMillis:Date.now()+Nt,backoffCount:k+1};return ee.setThrottleMetadata(Oe,At),xr.debug(`Calling attemptFetch again in ${Nt} millis`),Nu(b,At,Z,ee)}})).apply(this,arguments)}function ad(b,D){return new Promise((k,Z)=>{const ee=Math.max(D-Date.now(),0),ne=setTimeout(k,ee);b.addEventListener(()=>{clearTimeout(ne),Z(Qr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function ud(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Sa{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let ql,Yo;function _o(){return(_o=(0,N.Z)(function*(b,D,k,Z,ee){if(ee&&ee.global)b("event",k,Z);else{const ne=yield D;b("event",k,Object.assign(Object.assign({},Z),{send_to:ne}))}})).apply(this,arguments)}function Lu(b){Yo=b}function Fu(b){ql=b}function ld(){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,N.Z)(function*(){if(!(0,ae.hl)())return xr.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(b){return xr.warn(Qr.create("indexeddb-unavailable",{errorInfo:b?.toString()}).message),!1}return!0})).apply(this,arguments)}function Wl(){return(Wl=(0,N.Z)(function*(b,D,k,Z,ee,ne,Oe){var et;const pt=Da(b);pt.then(Mn=>{k[Mn.measurementId]=Mn.appId,b.options.measurementId&&Mn.measurementId!==b.options.measurementId&&xr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>xr.error(Mn)),D.push(pt);const lt=ld().then(Mn=>{if(Mn)return Z.getId()}),[Nt,At]=yield Promise.all([pt,lt]);Wo(ne)||Ig(ne,Nt.measurementId),Yo&&(ee("consent","default",Yo),Lu(void 0)),ee("js",new Date);const di=null!==(et=Oe?.config)&&void 0!==et?et:{};return di.origin="firebase",di.update=!0,null!=At&&(di[ui]=At),ee("config",Nt.measurementId,di),ql&&(ee("set",ql),Fu(void 0)),Nt.measurementId})).apply(this,arguments)}class df{constructor(D){this.app=D}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},hf=[];const Qo={};let Bu,ci,qi="dataLayer",vs=!1;function Aa(b,D,k){!function zl(){const b=[];if((0,ae.ru)()&&b.push("This is a browser extension environment."),(0,ae.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((Z,ee)=>`(${ee+1}) ${Z}`).join(" "),k=Qr.create("invalid-analytics-context",{errorInfo:D});xr.warn(k.message)}}();const Z=b.options.appId;if(!Z)throw Qr.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Qr.create("no-api-key");xr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[Z])throw Qr.create("already-exists",{id:Z});if(!vs){!function jl(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(qi);const{wrappedGtag:ne,gtagCore:Oe}=function od(b,D,k,Z,ee){let ne=function(...Oe){window[Z].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ne=window[ee]),window[ee]=function sd(b,D,k,Z){function ne(){return(ne=(0,N.Z)(function*(Oe,et,pt){try{"event"===Oe?yield mo(b,D,k,et,pt):"config"===Oe?yield Zs(b,D,k,Z,et,pt):"consent"===Oe?b("consent","update",pt):b("set",et)}catch(lt){xr.error(lt)}})).apply(this,arguments)}return function ee(Oe,et,pt){return ne.apply(this,arguments)}}(ne,b,D,k),{gtagCore:ne,wrappedGtag:window[ee]}}(li,hf,Qo,qi,"gtag");ci=ne,Bu=Oe,vs=!0}return li[Z]=function Vu(b,D,k,Z,ee,ne,Oe){return Wl.apply(this,arguments)}(b,hf,Qo,D,Bu,qi,k),new df(b)}function hd(){return qs.apply(this,arguments)}function qs(){return(qs=(0,N.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const dn="@firebase/analytics";!function ju(){(0,se._registerComponent)(new ce.wA(Zl,(D,{options:k})=>Aa(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,se._registerComponent)(new ce.wA("analytics-internal",function b(D){try{const k=D.getProvider(Zl).getImmediate();return{logEvent:(Z,ee,ne)=>function Kl(b,D,k,Z){b=(0,ae.m9)(b),function ys(b,D,k,Z,ee){return _o.apply(this,arguments)}(ci,li[b.app.options.appId],D,k,Z).catch(ee=>xr.error(ee))}(k,Z,ee,ne)}}catch(k){throw Qr.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,se.registerVersion)(dn,"0.9.0"),(0,se.registerVersion)(dn,"0.9.0","esm2017")}();var _f=F(4408),fd=F(7565);const bg=new class vf extends fd.v{}(class yf extends _f.o{constructor(D,k){super(D,k),this.scheduler=D,this.work=k}schedule(D,k=0){return k>0?super.schedule(D,k):(this.delay=k,this.state=D,this.scheduler.flush(this),this)}execute(D,k){return k>0||this.closed?super.execute(D,k):this._execute(D,k)}requestAsyncId(D,k,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(D,k,Z):(D.flush(this),0)}});var W_=F(4986),ka=F(8505),Ln=F(5363),pd=F(9468);const Ra=new c.GfV("7.5.0"),gd="__angularfire_symbol__analyticsIsSupportedValue",jr="__angularfire_symbol__analyticsIsSupported",ws="__angularfire_symbol__remoteConfigIsSupportedValue",Yl="__angularfire_symbol__remoteConfigIsSupported",Ma="__angularfire_symbol__messagingIsSupportedValue",Gs="__angularfire_symbol__messagingIsSupported";function Vt(b,D,k){if(D){if(1===D.length)return D[0];const ne=D.filter(Oe=>Oe.app===k);if(1===ne.length)return ne[0]}return k.container.getProvider(b).getImmediate({optional:!0})}globalThis[jr]||(globalThis[jr]=hd().then(b=>globalThis[gd]=b).catch(()=>globalThis[gd]=!1)),globalThis[Gs]||(globalThis[Gs]=Vl().then(b=>globalThis[Ma]=b).catch(()=>globalThis[Ma]=!1)),globalThis[Yl]||(globalThis[Yl]=dg().then(b=>globalThis[ws]=b).catch(()=>globalThis[ws]=!1));const Ws=(b,D)=>{const k=D?[D]:(0,$.C6)(),Z=[];return k.forEach(ee=>{ee.container.getProvider(b).instances.forEach(Oe=>{Z.includes(Oe)||Z.push(Oe)})}),Z};function ze(){}class zs{constructor(D,k=bg){this.zone=D,this.delegate=k}now(){return this.delegate.now()}schedule(D,k,Z){const ee=this.zone;return this.delegate.schedule(function(Oe){ee.runGuarded(()=>{D.apply(this,[Oe])})},k,Z)}}class xi{constructor(D){this.zone=D,this.task=null}call(D,k){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ze,{},ze,ze)),k.pipe((0,ka.b)({next:Z,complete:Z,error:Z})).subscribe(D).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ql=(()=>{class b{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new zs(Zone.current)),this.insideAngular=k.run(()=>new zs(Zone.current,W_.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(k){return new(k||b)(c.LFG(c.R0b))},b.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function ki(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function _d(b){return b.pipe((0,Ln.Q)(ki().outsideAngular))}function Pa(b){return ki(),function $u(b){return function(k){return(k=k.lift(new xi(b.ngZone))).pipe((0,pd.R)(b.outsideAngular),(0,Ln.Q)(b.insideAngular))}}(ki())(b)}},552:(ft,Ce,F)=>{F.d(Ce,{$:()=>Tu,A:()=>W,B:()=>xe,G:()=>Yc,H:()=>Tn,J:()=>fs,L:()=>q,M:()=>_u,N:()=>hg,P:()=>W_,Q:()=>Xh,R:()=>gf,T:()=>fg,U:()=>Zo,V:()=>uo,W:()=>Ji,X:()=>Jh,Y:()=>Br,Z:()=>Iu,_:()=>ba,a:()=>js,a0:()=>ef,a1:()=>Ll,a2:()=>Lt,a3:()=>ed,a4:()=>tf,a5:()=>td,a6:()=>gg,a7:()=>Re,a8:()=>nf,a9:()=>nd,aA:()=>H,aB:()=>pt,aC:()=>_d,aD:()=>Io,aE:()=>pr,aI:()=>zo,aL:()=>ao,aa:()=>ts,ab:()=>Au,ac:()=>mg,af:()=>rf,ag:()=>ns,ah:()=>_g,ak:()=>co,al:()=>Ru,an:()=>uf,ao:()=>rs,ap:()=>Ie,aq:()=>ct,ar:()=>st,as:()=>Me,at:()=>wd,au:()=>kr,av:()=>yn,aw:()=>Le,ax:()=>te,ay:()=>Mn,az:()=>X,b:()=>Qr,c:()=>Ma,d:()=>Cg,e:()=>md,f:()=>$u,g:()=>Z,h:()=>b,i:()=>Uu,j:()=>Oe,k:()=>Cf,l:()=>mf,m:()=>na,o:()=>fe,r:()=>_f,s:()=>Eo,u:()=>bg});var c=F(5861),$=F(2090),N=F(9681),se=F(1877),ae=F(655),ce=F(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function J(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qe=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},it=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new se.Yd("@firebase/auth");function Te(w,...g){De.logLevel<=se.in.ERROR&&De.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function Me(w,...g){throw He(w,...g)}function Le(w,...g){return He(w,...g)}function Pe(w,g,_){const I=Object.assign(Object.assign({},qe()),{[g]:_});return new $.LL("auth","Firebase",I).create(g,{appName:w.name})}function Se(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Me(w,"argument-error"),Pe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function He(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return it.create(w,...g)}function te(w,g,..._){if(!w)throw He(g,..._)}function de(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Te(g),new Error(g)}function Ie(w,g){w||de(g)}const Q=new Map;function X(w){Ie(w instanceof Function,"Expected a class definition");let g=Q.get(w);return g?(Ie(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,Q.set(w,g),g)}function Ue(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ve(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class bt{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ie(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function nn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ht(w,g){Ie(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class vt{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void de("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void de("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void de("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},cr=new bt(3e4,6e4);function Kt(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function wt(w,g,_,I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,c.Z)(function*(w,g,_,I,x={}){return ri(w,x,(0,c.Z)(function*(){let O={},re={};I&&("GET"===g?re=I:O={body:JSON.stringify(I)});const Ae=(0,$.xO)(Object.assign({key:w.config.apiKey},re)).slice(1),tt=yield w._getAdditionalHeaders();return tt["Content-Type"]="application/json",w.languageCode&&(tt["X-Firebase-Locale"]=w.languageCode),vt.fetch()(cs(w,w.config.apiHost,_,Ae),Object.assign({method:g,headers:tt,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ri(w,g,_){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,c.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},Jt),g);try{const x=new Zi(w),O=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const re=yield O.json();if("needConfirmation"in re)throw Vn(w,"account-exists-with-different-credential",re);if(O.ok&&!("errorMessage"in re))return re;{const Ae=O.ok?re.errorMessage:re.error.message,[tt,at]=Ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===tt)throw Vn(w,"credential-already-in-use",re);if("EMAIL_EXISTS"===tt)throw Vn(w,"email-already-in-use",re);if("USER_DISABLED"===tt)throw Vn(w,"user-disabled",re);const Bt=I[tt]||tt.toLowerCase().replace(/[_\s]+/g,"-");if(at)throw Pe(w,Bt,at);Me(w,Bt)}}catch(x){if(x instanceof $.ZR)throw x;Me(w,"network-request-failed")}})).apply(this,arguments)}function kn(w,g,_,I){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,c.Z)(function*(w,g,_,I,x={}){const O=yield wt(w,g,_,I,x);return"mfaPendingCredential"in O&&Me(w,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function cs(w,g,_,I){const x=`${g}${_}?${I}`;return w.config.emulator?Ht(w.config,x):`${w.config.apiScheme}://${x}`}class Zi{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Le(this.auth,"network-request-failed")),cr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Le(w,g,I);return x.customData._tokenResponse=_,x}function Ii(){return(Ii=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function gn(w,g){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function nt(w,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Sr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Gr(){return(Gr=(0,c.Z)(function*(w,g=!1){const _=(0,$.m9)(w),I=yield _.getIdToken(g),x=_t(I);te(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const O="object"==typeof x.firebase?x.firebase:void 0,re=O?.sign_in_provider;return{claims:x,token:I,authTime:Sr(St(x.auth_time)),issuedAtTime:Sr(St(x.iat)),expirationTime:Sr(St(x.exp)),signInProvider:re||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function St(w){return 1e3*Number(w)}function _t(w){const[g,_,I]=w.split(".");if(void 0===g||void 0===_||void 0===I)return Te("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,$.tV)(_);return x?JSON.parse(x):(Te("Failed to decode base64 JWT payload"),null)}catch(x){return Te("Caught error parsing JWT payload as JSON",x?.toString()),null}}function mn(w,g){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof $.ZR&&bn(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function bn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class si{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,c.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_?.code&&g.schedule(!0))}g.schedule()})()}}class Yn{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sr(this.lastLoginAt),this.creationTime=Sr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bi(w){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,c.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),x=yield mn(w,nt(_,{idToken:I}));te(x?.users.length,_,"internal-error");const O=x.users[0];w._notifyReloadListener(O);const re=null!==(g=O.providerUserInfo)&&void 0!==g&&g.length?Zn(O.providerUserInfo):[],Ae=Fr(w.providerData,re),Bt=!!w.isAnonymous&&!(w.email&&O.passwordHash||Ae?.length),Dn={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:Ae,metadata:new Yn(O.createdAt,O.lastLoginAt),isAnonymous:Bt};Object.assign(w,Dn)})).apply(this,arguments)}function Gt(){return(Gt=(0,c.Z)(function*(w){const g=(0,$.m9)(w);yield bi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Fr(w,g){return[...w.filter(I=>!g.some(x=>x.providerId===I.providerId)),...g]}function Zn(w){return w.map(g=>{var{providerId:_}=g,I=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function be(){return(be=(0,c.Z)(function*(w,g){const _=yield ri(w,{},(0,c.Z)(function*(){const I=(0,$.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:O}=w.config,re=cs(w,x,"/v1/token",`key=${O}`),Ae=yield w._getAdditionalHeaders();return Ae["Content-Type"]="application/x-www-form-urlencoded",vt.fetch()(re,{method:"POST",headers:Ae,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){te(g.idToken,"internal-error"),te(typeof g.idToken<"u","internal-error"),te(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Ct(w){const g=_t(w);return te(g,"internal-error"),te(typeof g.exp<"u","internal-error"),te(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,c.Z)(function*(){return te(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,c.Z)(function*(){const{accessToken:x,refreshToken:O,expiresIn:re}=yield function je(w,g){return be.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(x,O,Number(re))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:x,expirationTime:O}=_,re=new Xe;return I&&(te("string"==typeof I,"internal-error",{appName:g}),re.refreshToken=I),x&&(te("string"==typeof x,"internal-error",{appName:g}),re.accessToken=x),O&&(te("number"==typeof O,"internal-error",{appName:g}),re.expirationTime=O),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return de("not implemented")}}function It(w,g){te("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class Tt{constructor(g){var{uid:_,auth:I,stsTokenManager:x}=g,O=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new si(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Yn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,c.Z)(function*(){const I=yield mn(_,_.stsTokenManager.getToken(_.auth,g));return te(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function Bn(w){return Gr.apply(this,arguments)}(this,g)}reload(){return function Ti(w){return Gt.apply(this,arguments)}(this)}_assign(g){this!==g&&(te(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Tt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,c.Z)(function*(){let x=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield bi(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,c.Z)(function*(){const _=yield g.getIdToken();return yield mn(g,function ii(w,g){return Ii.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,x,O,re,Ae,tt,at,Bt;const Dn=null!==(I=_.displayName)&&void 0!==I?I:void 0,fi=null!==(x=_.email)&&void 0!==x?x:void 0,Ks=null!==(O=_.phoneNumber)&&void 0!==O?O:void 0,Oa=null!==(re=_.photoURL)&&void 0!==re?re:void 0,Ys=null!==(Ae=_.tenantId)&&void 0!==Ae?Ae:void 0,Ku=null!==(tt=_._redirectEventId)&&void 0!==tt?tt:void 0,Dd=null!==(at=_.createdAt)&&void 0!==at?at:void 0,Rg=null!==(Bt=_.lastLoginAt)&&void 0!==Bt?Bt:void 0,{uid:tc,emailVerified:Mg,isAnonymous:nc,providerData:Sf,stsTokenManager:Pg}=_;te(tc&&Pg,g,"internal-error");const X_=Xe.fromJSON(this.name,Pg);te("string"==typeof tc,g,"internal-error"),It(Dn,g.name),It(fi,g.name),te("boolean"==typeof Mg,g,"internal-error"),te("boolean"==typeof nc,g,"internal-error"),It(Ks,g.name),It(Oa,g.name),It(Ys,g.name),It(Ku,g.name),It(Dd,g.name),It(Rg,g.name);const Af=new Tt({uid:tc,auth:g,email:fi,emailVerified:Mg,displayName:Dn,isAnonymous:nc,photoURL:Oa,phoneNumber:Ks,tenantId:Ys,stsTokenManager:X_,createdAt:Dd,lastLoginAt:Rg});return Sf&&Array.isArray(Sf)&&(Af.providerData=Sf.map(Ng=>Object.assign({},Ng))),Ku&&(Af._redirectEventId=Ku),Af}static _fromIdTokenResponse(g,_,I=!1){return(0,c.Z)(function*(){const x=new Xe;x.updateFromServerResponse(_);const O=new Tt({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:I});return yield bi(O),O})()}}const q=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,c.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,c.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,c.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function H(w,g,_){return`firebase:${w}:${g}:${_}`}class Y{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:x,name:O}=this.auth;this.fullUserKey=H(this.userKey,x.apiKey,O),this.fullPersistenceKey=H("persistence",x.apiKey,O),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,c.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?Tt._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,c.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,c.Z)(function*(){if(!_.length)return new Y(X(q),g,I);const x=(yield Promise.all(_.map(function(){var at=(0,c.Z)(function*(Bt){if(yield Bt._isAvailable())return Bt});return function(Bt){return at.apply(this,arguments)}}()))).filter(at=>at);let O=x[0]||X(q);const re=H(I,g.config.apiKey,g.name);let Ae=null;for(const at of _)try{const Bt=yield at._get(re);if(Bt){const Dn=Tt._fromJSON(g,Bt);at!==O&&(Ae=Dn),O=at;break}}catch{}const tt=x.filter(at=>at._shouldAllowMigration);return O._shouldAllowMigration&&tt.length?(O=tt[0],Ae&&(yield O._set(re,Ae.toJSON())),yield Promise.all(_.map(function(){var at=(0,c.Z)(function*(Bt){if(Bt!==O)try{yield Bt._remove(re)}catch{}});return function(Bt){return at.apply(this,arguments)}}())),new Y(O,g,I)):new Y(O,g,I)})()}}function B(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ke(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(M(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Ge(g))return"Blackberry";if(Ot(g))return"Webos";if(V(g))return"Safari";if((g.includes("chrome/")||ue(g))&&!g.includes("edge/"))return"Chrome";if(st(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function M(w=(0,$.z$)()){return/firefox\//i.test(w)}function V(w=(0,$.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ue(w=(0,$.z$)()){return/crios\//i.test(w)}function ke(w=(0,$.z$)()){return/iemobile/i.test(w)}function st(w=(0,$.z$)()){return/android/i.test(w)}function Ge(w=(0,$.z$)()){return/blackberry/i.test(w)}function Ot(w=(0,$.z$)()){return/webos/i.test(w)}function ct(w=(0,$.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function yn(w=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function Ur(w=(0,$.z$)()){return ct(w)||st(w)||Ot(w)||Ge(w)||/windows phone/i.test(w)||ke(w)}function Lo(w,g=[]){let _;switch(w){case"Browser":_=B((0,$.z$)());break;case"Worker":_=`${B((0,$.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${I}`}class kl{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=O=>new Promise((re,Ae)=>{try{re(g(O))}catch(tt){Ae(tt)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,c.Z)(function*(){if(_.auth.currentUser===g)return;const I=[];try{for(const x of _.queue)yield x(g),x.onAbort&&I.push(x.onAbort)}catch(x){I.reverse();for(const O of I)try{O()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:x?.message})}})()}}class Rl{constructor(g,_,I){this.app=g,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fo(this),this.idTokenSubscription=new Fo(this),this.beforeStateQueue=new kl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=it,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=X(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var x,O;if(!I._deleted&&(I.persistenceManager=yield Y.create(I,g),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(O=I.currentUser)||void 0===O?void 0:O.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,c.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,c.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let O=x,re=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Ae=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,tt=O?._redirectEventId,at=yield _.tryRedirectSignIn(g);(!Ae||Ae===tt)&&at?.user&&(O=at.user,re=!0)}if(!O)return _.directlySetCurrentUser(null);if(!O._redirectEventId){if(re)try{yield _.beforeStateQueue.runMiddleware(O)}catch(Ae){O=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Ae))}return O?_.reloadAndSetCurrentUserOrClear(O):_.directlySetCurrentUser(null)}return te(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===O._redirectEventId?_.directlySetCurrentUser(O):_.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(g){var _=this;return(0,c.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,c.Z)(function*(){try{yield bi(g)}catch(I){if("auth/network-request-failed"!==I?.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function fn(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,c.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,c.Z)(function*(){const I=g?(0,$.m9)(g):null;return I&&te(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,c.Z)(function*(){if(!I._deleted)return g&&te(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,c.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,c.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(X(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new $.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,c.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&X(g)||_._popupRedirectResolver;te(I,_,"argument-error"),_.redirectPersistenceManager=yield Y.create(_,[X(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,c.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,c.Z)(function*(){if(g===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,x){if(this._deleted)return()=>{};const O="function"==typeof _?_:_.next.bind(_),re=this._isInitialized?Promise.resolve():this._initializationPromise;return te(re,this,"internal-error"),re.then(()=>O(this.currentUser)),"function"==typeof _?g.addObserver(_,I,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==g&&_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh(),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,c.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function pr(w){return(0,$.m9)(w)}class Fo{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,$.ne)(_=>this.observer=_)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yc(w,g,_){const I=pr(w);te(I._canInitEmulator,I,"emulator-config-failed"),te(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,O=Ml(g),{host:re,port:Ae}=function hu(w){const g=Ml(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const O=x[1];return{host:O,port:Uo(I.substr(O.length+1))}}{const[O,re]=I.split(":");return{host:O,port:Uo(re)}}}(g);I.config.emulator={url:`${O}//${re}${null===Ae?"":`:${Ae}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:re,port:Ae,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function rn(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Ml(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function Uo(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class Tn{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return de("not implemented")}_getIdTokenResponse(g){return de("not implemented")}_linkToIdToken(g,_){return de("not implemented")}_getReauthenticationResolver(g){return de("not implemented")}}function Ar(w,g){return jn.apply(this,arguments)}function jn(){return(jn=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:resetPassword",Kt(w,g))})).apply(this,arguments)}function Wr(w,g){return ji.apply(this,arguments)}function ji(){return(ji=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Je(w,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",Kt(w,g))})).apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithPassword",Kt(w,g))})).apply(this,arguments)}function ds(w,g){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendOobCode",Kt(w,g))})).apply(this,arguments)}function Os(w,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,c.Z)(function*(w,g){return ds(w,g)})).apply(this,arguments)}function fu(w,g){return hs.apply(this,arguments)}function hs(){return(hs=(0,c.Z)(function*(w,g){return ds(w,g)})).apply(this,arguments)}function jt(w,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,c.Z)(function*(w,g){return ds(w,g)})).apply(this,arguments)}function pu(w,g){return Pl.apply(this,arguments)}function Pl(){return(Pl=(0,c.Z)(function*(w,g){return ds(w,g)})).apply(this,arguments)}function tr(){return(tr=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,g))})).apply(this,arguments)}function Fs(){return(Fs=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithEmailLink",Kt(w,g))})).apply(this,arguments)}class zr extends Tn{constructor(g,_,I,x=null){super("password",I),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new zr(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new zr(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function Cn(w,g){return Vr.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Ls(w,g){return tr.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Me(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,c.Z)(function*(){switch(I.signInMethod){case"password":return Wr(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ma(w,g){return Fs.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Me(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ci(w,g){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithIdp",Kt(w,g))})).apply(this,arguments)}class fs extends Tn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new fs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Me("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x}=_,O=(0,ae._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const re=new fs(I,x);return re.idToken=O.idToken||void 0,re.accessToken=O.accessToken||void 0,re.secret=O.secret,re.nonce=O.nonce,re.pendingToken=O.pendingToken||null,re}_getIdTokenResponse(g){return Ci(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ci(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ci(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,$.xO)(_)}return g}}function Nl(w,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:sendVerificationCode",Kt(w,g))})).apply(this,arguments)}function ps(){return(ps=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,g))})).apply(this,arguments)}function gr(){return(gr=(0,c.Z)(function*(w,g){const _=yield kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,g));if(_.temporaryProof)throw Vn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const cg={USER_NOT_FOUND:"user-not-found"};function ai(){return(ai=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithPhoneNumber",Kt(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),cg)})).apply(this,arguments)}class gs extends Tn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new gs({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new gs({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function mu(w,g){return ps.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Di(w,g){return gr.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function oi(w,g){return ai.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}=g;return I||_||x||O?new gs({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:O}):null}}class mr{constructor(g){var _,I,x,O,re,Ae;const tt=(0,$.zd)((0,$.pd)(g)),at=null!==(_=tt.apiKey)&&void 0!==_?_:null,Bt=null!==(I=tt.oobCode)&&void 0!==I?I:null,Dn=function _a(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=tt.mode)&&void 0!==x?x:null);te(at&&Bt&&Dn,"argument-error"),this.apiKey=at,this.operation=Dn,this.code=Bt,this.continueUrl=null!==(O=tt.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(re=tt.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Ae=tt.tenantId)&&void 0!==Ae?Ae:null}static parseLink(g){const _=function Ol(w){const g=(0,$.zd)((0,$.pd)(w)).link,_=g?(0,$.zd)((0,$.pd)(g)).deep_link_id:null,I=(0,$.zd)((0,$.pd)(w)).deep_link_id;return(I?(0,$.zd)((0,$.pd)(I)).link:null)||I||_||g||w}(g);try{return new mr(_)}catch{return null}}}let _u=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return zr._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=mr.parseLink(I);return te(x,"argument-error"),zr._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class ms{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Bo extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Zo extends Bo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return te("providerId"in _&&"signInMethod"in _,"argument-error"),fs._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return te(g.idToken||g.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Zo.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Zo.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:O,nonce:re,providerId:Ae}=g;if(!I&&!x&&!_&&!O||!Ae)return null;try{return new Zo(Ae)._credential({idToken:_,accessToken:I,nonce:re,pendingToken:O})}catch{return null}}}let hg=(()=>{class w extends Bo{constructor(){super("facebook.com")}static credential(_){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Xh=(()=>{class w extends Bo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),fg=(()=>{class w extends Bo{constructor(){super("github.com")}static credential(_){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ao extends Tn{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Ci(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ci(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ci(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x,pendingToken:O}=_;return I&&x&&O&&I===x?new ao(I,O):null}static _create(g,_){return new ao(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class uo extends ms{constructor(g){te(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return uo.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return uo.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=ao.fromJSON(g);return te(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return ao._create(I,_)}catch{return null}}}let Ji=(()=>{class w extends Bo{constructor(){super("twitter.com")}static credential(_,I){return fs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Xc(w,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signUp",Kt(w,g))})).apply(this,arguments)}class $i{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,x=!1){return(0,c.Z)(function*(){const O=yield Tt._fromIdTokenResponse(g,I,x),re=vu(I);return new $i({user:O,providerId:re,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,c.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const x=vu(I);return new $i({user:g,providerId:x,_tokenResponse:I,operationType:_})})()}}function vu(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Jh(w){return ya.apply(this,arguments)}function ya(){return(ya=(0,c.Z)(function*(w){var g;const _=pr(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new $i({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Xc(_,{returnSecureToken:!0}),x=yield $i._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Jc extends $.ZR{constructor(g,_,I,x){var O;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Jc.prototype),this.customData={appName:g.name,tenantId:null!==(O=g.tenantId)&&void 0!==O?O:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,x){return new Jc(g,_,I,x)}}function pg(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Jc._fromErrorAndOperation(w,O,g,I):O})}function lo(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function co(w,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,c.Z)(function*(w,g){const _=(0,$.m9)(w);yield va(!0,_,g);const{providerUserInfo:I}=yield gn(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=lo(I||[]);return _.providerData=_.providerData.filter(O=>x.has(O.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function fo(w,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,c.Z)(function*(w,g,_=!1){const I=yield mn(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return $i._forOperation(w,"link",I)})).apply(this,arguments)}function va(w,g,_){return jo.apply(this,arguments)}function jo(){return(jo=(0,c.Z)(function*(w,g,_){yield bi(g);const x=!1===w?"provider-already-linked":"no-such-provider";te(lo(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function Eu(w,g){return wa.apply(this,arguments)}function wa(){return(wa=(0,c.Z)(function*(w,g,_=!1){const{auth:I}=w,x="reauthenticate";try{const O=yield mn(w,pg(I,x,g,w),_);te(O.idToken,I,"internal-error");const re=_t(O.idToken);te(re,I,"internal-error");const{sub:Ae}=re;return te(w.uid===Ae,I,"user-mismatch"),$i._forOperation(w,x,O)}catch(O){throw"auth/user-not-found"===O?.code&&Me(I,"user-mismatch"),O}})).apply(this,arguments)}function Ea(w,g){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,c.Z)(function*(w,g,_=!1){const I="signIn",x=yield pg(w,I,g),O=yield $i._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Br(w,g){return $n.apply(this,arguments)}function $n(){return($n=(0,c.Z)(function*(w,g){return Ea(pr(w),g)})).apply(this,arguments)}function Iu(w,g){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,c.Z)(function*(w,g){const _=(0,$.m9)(w);return yield va(!1,_,g.providerId),fo(_,g)})).apply(this,arguments)}function ba(w,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,c.Z)(function*(w,g){return Eu((0,$.m9)(w),g)})).apply(this,arguments)}function Yr(w,g){return bu.apply(this,arguments)}function bu(){return(bu=(0,c.Z)(function*(w,g){return kn(w,"POST","/v1/accounts:signInWithCustomToken",Kt(w,g))})).apply(this,arguments)}function Tu(w,g){return es.apply(this,arguments)}function es(){return(es=(0,c.Z)(function*(w,g){const _=pr(w),I=yield Yr(_,{token:g,returnSecureToken:!0}),x=yield $i._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class nr{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Cu._fromServerResponse(g,_):Me(g,"internal-error")}}class Cu extends nr{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Cu(_)}}function $o(w,g,_){var I;te((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),te(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(te(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(te(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function ef(w,g,_){return Si.apply(this,arguments)}function Si(){return(Si=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&$o(I,x,_),yield fu(I,x)})).apply(this,arguments)}function Ll(w,g,_){return po.apply(this,arguments)}function po(){return(po=(0,c.Z)(function*(w,g,_){yield Ar((0,$.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Lt(w,g){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(w,g){yield Je((0,$.m9)(w),{oobCode:g})})).apply(this,arguments)}function ed(w,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,c.Z)(function*(w,g){const _=(0,$.m9)(w),I=yield Ar(_,{oobCode:g}),x=I.requestType;switch(te(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(I.mfaInfo,_,"internal-error");default:te(I.email,_,"internal-error")}let O=null;return I.mfaInfo&&(O=nr._fromServerResponse(pr(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:O},operation:x}})).apply(this,arguments)}function tf(w,g){return Du.apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(w,g){const{data:_}=yield ed((0,$.m9)(w),g);return _.email})).apply(this,arguments)}function td(w,g,_){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(w,g,_){const I=pr(w),x=yield Xc(I,{returnSecureToken:!0,email:g,password:_}),O=yield $i._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(O.user),O})).apply(this,arguments)}function gg(w,g,_){return Br((0,$.m9)(w),_u.credential(g,_))}function Re(w,g,_){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};te(_.handleCodeInApp,I,"argument-error"),_&&$o(I,x,_),yield jt(I,x)})).apply(this,arguments)}function nf(w,g){return"EMAIL_SIGNIN"===mr.parseLink(g)?.operation}function nd(w,g,_){return rr.apply(this,arguments)}function rr(){return(rr=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=_u.credentialWithLink(g,_||Ue());return te(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Br(I,x)})).apply(this,arguments)}function Su(w,g){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:createAuthUri",Kt(w,g))})).apply(this,arguments)}function ts(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,c.Z)(function*(w,g){const I={identifier:g,continueUri:Ve()?Ue():"http://localhost"},{signinMethods:x}=yield Su((0,$.m9)(w),I);return x||[]})).apply(this,arguments)}function Au(w,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,c.Z)(function*(w,g){const _=(0,$.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&$o(_.auth,x,g);const{email:O}=yield Os(_.auth,x);O!==w.email&&(yield w.reload())})).apply(this,arguments)}function mg(w,g,_){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&$o(I.auth,O,_);const{email:re}=yield pu(I.auth,O);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function Hn(w,g){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,c.Z)(function*(w,g){return wt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rf(w,g){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,$.m9)(w),O={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},re=yield mn(I,Hn(I.auth,O));I.displayName=re.displayName||null,I.photoURL=re.photoUrl||null;const Ae=I.providerData.find(({providerId:tt})=>"password"===tt);Ae&&(Ae.displayName=I.displayName,Ae.photoURL=I.photoURL),yield I._updateTokensIfNecessary(re)})).apply(this,arguments)}function ns(w,g){return xu((0,$.m9)(w),g,null)}function _g(w,g){return xu((0,$.m9)(w),null,g)}function xu(w,g,_){return ku.apply(this,arguments)}function ku(){return(ku=(0,c.Z)(function*(w,g,_){const{auth:I}=w,O={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(O.email=g),_&&(O.password=_);const re=yield mn(w,Wr(I,O));yield w._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class go{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class Ul extends go{constructor(g,_,I,x){super(g,_,I),this.username=x}}class sf extends go{constructor(g,_){super(g,"facebook.com",_)}}class Vl extends Ul{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class rd extends go{constructor(g,_){super(g,"google.com",_)}}class af extends Ul{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Ru(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Fl(w){var g,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},O=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const re=null===(_=null===(g=_t(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(re)return new go(O,"anonymous"!==re&&"custom"!==re?re:null)}if(!I)return null;switch(I){case"facebook.com":return new sf(O,x);case"github.com":return new Vl(O,x);case"google.com":return new rd(O,x);case"twitter.com":return new af(O,x,w.screenName||null);case"custom":case"anonymous":return new go(O,null);default:return new go(O,I,x)}}(_)}class pn{constructor(g,_,I){this.type=g,this.credential=_,this.auth=I}static _fromIdtoken(g,_){return new pn("enroll",g,_)}static _fromMfaPendingCredential(g){return new pn("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return pn._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return pn._fromIdtoken(g.multiFactorSession.idToken)}return null}}class id{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=pr(g),x=_.customData._serverResponse,O=(x.mfaInfo||[]).map(Ae=>nr._fromServerResponse(I,Ae));te(x.mfaPendingCredential,I,"internal-error");const re=pn._fromMfaPendingCredential(x.mfaPendingCredential);return new id(re,O,function(){var Ae=(0,c.Z)(function*(tt){const at=yield tt._process(I,re);delete x.mfaInfo,delete x.mfaPendingCredential;const Bt=Object.assign(Object.assign({},x),{idToken:at.idToken,refreshToken:at.refreshToken});switch(_.operationType){case"signIn":const Dn=yield $i._fromIdTokenResponse(I,_.operationType,Bt);return yield I._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return te(_.user,I,"internal-error"),$i._forOperation(_.user,_.operationType,Bt);default:Me(I,"internal-error")}});return function(tt){return Ae.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,c.Z)(function*(){return _.signInResolver(g)})()}}function uf(w,g){var _;const I=(0,$.m9)(w),x=g;return te(g.customData.operationType,I,"argument-error"),te(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),id._fromError(I,x)}function xr(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:start",Kt(w,g))}class jl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>nr._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new jl(g)}getSession(){var g=this;return(0,c.Z)(function*(){return pn._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,_){var I=this;return(0,c.Z)(function*(){const x=g,O=yield I.getSession(),re=yield mn(I.user,x._process(I.user.auth,O,_));return yield I.user._updateTokensIfNecessary(re),I.user.reload()})()}unenroll(g){var _=this;return(0,c.Z)(function*(){const I="string"==typeof g?g:g.uid,x=yield _.user.getIdToken(),O=yield mn(_.user,function Ig(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(w,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:re})=>re!==I),yield _.user._updateTokensIfNecessary(O);try{yield _.user.reload()}catch(re){if("auth/user-token-expired"!==re?.code)throw re}})()}}const Zs=new WeakMap;function rs(w){const g=(0,$.m9)(w);return Zs.has(g)||Zs.set(g,jl._fromUser(g)),Zs.get(g)}const mo="__sak";class _s{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(mo,"1"),this.storage.removeItem(mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qr=(()=>{class w extends _s{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sd(){const w=(0,$.z$)();return V(w)||ct(w)}()&&function xl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ur(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),O=this.localCache[I];x!==O&&_(I,O,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Ae,tt,at)=>{this.notifyListeners(Ae,at)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ae=this.storage.getItem(x);if(_.newValue!==Ae)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const O=()=>{const Ae=this.storage.getItem(x);!I&&this.localCache[x]===Ae||this.notifyListeners(x,Ae)},re=this.storage.getItem(x);!function Rt(){return(0,$.w1)()&&10===document.documentMode}()||re===_.newValue||_.newValue===_.oldValue?O():setTimeout(O,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,O=this;return(0,c.Z)(function*(){yield x().call(O,_,I),O.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,c.Z)(function*(){const O=yield I().call(x,_);return x.localCache[_]=JSON.stringify(O),O})()}_remove(_){var I=()=>super._remove,x=this;return(0,c.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),js=(()=>{class w extends _s{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let Hl=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(O=>O.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,c.Z)(function*(){const x=_,{eventId:O,eventType:re,data:Ae}=x.data,tt=I.handlersMap[re];if(!tt?.size)return;x.ports[0].postMessage({status:"ack",eventId:O,eventType:re});const at=Array.from(tt).map(function(){var Dn=(0,c.Z)(function*(fi){return fi(x.origin,Ae)});return function(fi){return Dn.apply(this,arguments)}}()),Bt=yield function $l(w){return Promise.all(w.map(function(){var g=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(at);x.ports[0].postMessage({status:"done",eventId:O,eventType:re,response:Bt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function zo(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class Pu{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var x=this;return(0,c.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let re,Ae;return new Promise((tt,at)=>{const Bt=zo("",20);O.port1.start();const Dn=setTimeout(()=>{at(new Error("unsupported_event"))},I);Ae={messageChannel:O,onMessage(fi){const Ks=fi;if(Ks.data.eventId===Bt)switch(Ks.data.status){case"ack":clearTimeout(Dn),re=setTimeout(()=>{at(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),tt(Ks.data.response);break;default:clearTimeout(Dn),clearTimeout(re),at(new Error("invalid_response"))}}},x.handlers.add(Ae),O.port1.addEventListener("message",Ae.onMessage),x.target.postMessage({eventType:g,eventId:Bt,data:_},[O.port2])}).finally(()=>{Ae&&x.removeMessageHandler(Ae)})})()}}function On(){return window}function $s(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function is(){return(is=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Sa="firebaseLocalStorageDb",ys="firebaseLocalStorage",_o="fbase_key";class yo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function vo(w,g){return w.transaction([ys],g?"readwrite":"readonly").objectStore(ys)}function Ko(){const w=indexedDB.open(Sa,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(ys,{keyPath:_o})}catch(x){_(x)}}),w.addEventListener("success",(0,c.Z)(function*(){const I=w.result;I.objectStoreNames.contains(ys)?g(I):(I.close(),yield function Ou(){const w=indexedDB.deleteDatabase(Sa);return new yo(w).toPromise()}(),g(yield Ko()))}))})}function Gl(w,g,_){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,c.Z)(function*(w,g,_){const I=vo(w,!0).put({[_o]:g,value:_});return new yo(I).toPromise()})).apply(this,arguments)}function Hs(){return(Hs=(0,c.Z)(function*(w,g){const _=vo(w,!1).get(g),I=yield new yo(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Yo(w,g){const _=vo(w,!0).delete(g);return new yo(_).toPromise()}const Uu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield Ko()),_.db})()}_withRetries(_){var I=this;return(0,c.Z)(function*(){let x=0;for(;;)try{const O=yield I._openDb();return yield _(O)}catch(O){if(x++>3)throw O;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return $s()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=Hl._getInstance(function ud(){return $s()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,c.Z)(function*(x,O){return{keyProcessed:(yield _._poll()).includes(O.key)}});return function(x,O){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,c.Z)(function*(x,O){return["keyChanged"]});return function(x,O){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function Nu(){return is.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Pu(_.activeServiceWorker);const O=yield _.sender._send("ping",{},800);!O||(null===(I=O[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=O[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,c.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function ad(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ko();return yield Gl(_,mo,"1"),yield Yo(_,mo),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,c.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,c.Z)(function*(){return x._withPendingWrite((0,c.Z)(function*(){return yield x._withRetries(O=>Gl(O,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,c.Z)(function*(){const x=yield I._withRetries(O=>function cf(w,g){return Hs.apply(this,arguments)}(O,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,c.Z)(function*(){return I._withPendingWrite((0,c.Z)(function*(){return yield I._withRetries(x=>Yo(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const I=yield _._withRetries(re=>{const Ae=vo(re,!1).getAll();return new yo(Ae).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],O=new Set;for(const{fbase_key:re,value:Ae}of I)O.add(re),JSON.stringify(_.localCache[re])!==JSON.stringify(Ae)&&(_.notifyListeners(re,Ae),x.push(re));for(const re of Object.keys(_.localCache))_.localCache[re]&&!O.has(re)&&(_.notifyListeners(re,null),x.push(re));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const O of Array.from(x))O(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Vu(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:start",Kt(w,g))}function li(){return(li=(0,c.Z)(function*(w){return(yield wt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Qo(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=x=>{const O=Le("internal-error");O.customData=x,_(O)},I.type="text/javascript",I.charset="UTF-8",function hf(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function qi(w){return`__${w}${Math.floor(1e6*Math.random())}`}const ci=1e12;class vs{constructor(g){this.auth=g,this.counter=ci,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new ff(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||ci;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||ci))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,c.Z)(function*(){var I;return null===(I=_._widgets.get(g||ci))||void 0===I||I.execute(),""})()}}class ff{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;te(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zl(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Aa=qi("rcb"),G_=new bt(3e4,6e4);class hd{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=On().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return te(function qs(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(On().grecaptcha):new Promise((I,x)=>{const O=On().setTimeout(()=>{x(Le(g,"network-request-failed"))},G_.get());On()[Aa]=()=>{On().clearTimeout(O),delete On()[Aa];const Ae=On().grecaptcha;if(!Ae)return void x(Le(g,"internal-error"));const tt=Ae.render;Ae.render=(at,Bt)=>{const Dn=tt(at,Bt);return this.counter++,Dn},this.hostLanguage=_,I(Ae)},Qo(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:Aa,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(O),x(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=On().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wo{load(g){return(0,c.Z)(function*(){return new vs(g)})()}clearedOneInstance(){}}const Xo="recaptcha",pf={theme:"light",type:"image"};class gf{constructor(g,_=Object.assign({},pf),I){this.parameters=_,this.type=Xo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=pr(I),this.isInvisible="invisible"===this.parameters.size,te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;te(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wo:new hd,this.validateStartingState()}verify(){var g=this;return(0,c.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(O=>{const re=Ae=>{!Ae||(g.tokenChangeListeners.delete(re),O(Ae))};g.tokenChangeListeners.add(re),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=On()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,c.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,c.Z)(function*(){te(Ve()&&!$s(),g.auth,"internal-error"),yield function Zu(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function df(w){return li.apply(this,arguments)}(g.auth);te(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kl{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=gs._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Eo(w,g,_){return dn.apply(this,arguments)}function dn(){return(dn=(0,c.Z)(function*(w,g,_){const I=pr(w),x=yield fd(I,g,(0,$.m9)(_));return new Kl(x,O=>Br(I,O))})).apply(this,arguments)}function mf(w,g,_){return ju.apply(this,arguments)}function ju(){return(ju=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w);yield va(!1,I,"phone");const x=yield fd(I.auth,g,(0,$.m9)(_));return new Kl(x,O=>Iu(I,O))})).apply(this,arguments)}function _f(w,g,_){return yf.apply(this,arguments)}function yf(){return(yf=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w),x=yield fd(I.auth,g,(0,$.m9)(_));return new Kl(x,O=>ba(I,O))})).apply(this,arguments)}function fd(w,g,_){return vf.apply(this,arguments)}function vf(){return(vf=(0,c.Z)(function*(w,g,_){var I;const x=yield _.verify();try{let O;if(te("string"==typeof x,w,"argument-error"),te(_.type===Xo,w,"argument-error"),O="string"==typeof g?{phoneNumber:g}:g,"session"in O){const re=O.session;if("phoneNumber"in O)return te("enroll"===re.type,w,"internal-error"),(yield xr(w,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{te("signin"===re.type,w,"internal-error");const Ae=(null===(I=O.multiFactorHint)||void 0===I?void 0:I.uid)||O.multiFactorUid;return te(Ae,w,"missing-multi-factor-info"),(yield Vu(w,{mfaPendingCredential:re.credential,mfaEnrollmentId:Ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield Nl(w,{phoneNumber:O.phoneNumber,recaptchaToken:x});return re}}finally{_._reset()}})).apply(this,arguments)}function bg(w,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,c.Z)(function*(w,g){yield fo((0,$.m9)(w),g)})).apply(this,arguments)}let W_=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=pr(_)}verifyPhoneNumber(_,I){return fd(this.auth,_,(0,$.m9)(I))}static credential(_,I){return gs._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?gs._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function ka(w,g){return g?X(g):(te(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Ln extends Tn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ci(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Ci(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Ci(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function pd(w){return Ea(w.auth,new Ln(w),w.bypassAuthState)}function Ra(w){const{auth:g,user:_}=w;return te(_,g,"internal-error"),Eu(_,new Ln(w),w.bypassAuthState)}function gd(w){return jr.apply(this,arguments)}function jr(){return(jr=(0,c.Z)(function*(w){const{auth:g,user:_}=w;return te(_,g,"internal-error"),fo(_,new Ln(w),w.bypassAuthState)})).apply(this,arguments)}class ws{constructor(g,_,I,x,O=!1){this.auth=g,this.resolver=I,this.user=x,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,c.Z)(function*(I,x){g.pendingPromise={resolve:I,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(O){g.reject(O)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,c.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:O,tenantId:re,error:Ae,type:tt}=g;if(Ae)return void _.reject(Ae);const at={auth:_.auth,requestUri:I,sessionId:x,tenantId:re||void 0,postBody:O||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(tt)(at))}catch(Bt){_.reject(Bt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return pd;case"linkViaPopup":case"linkViaRedirect":return gd;case"reauthViaPopup":case"reauthViaRedirect":return Ra;default:Me(this.auth,"internal-error")}}resolve(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ie(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yl=new bt(2e3,1e4);function Ma(w,g,_){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,c.Z)(function*(w,g,_){const I=pr(w);Se(w,g,ms);const x=ka(I,_);return new Vt(I,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function md(w,g,_){return Tg.apply(this,arguments)}function Tg(){return(Tg=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w);Se(I.auth,g,ms);const x=ka(I.auth,_);return new Vt(I.auth,"reauthViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}function Cg(w,g,_){return Dg.apply(this,arguments)}function Dg(){return(Dg=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w);Se(I.auth,g,ms);const x=ka(I.auth,_);return new Vt(I.auth,"linkViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}let Vt=(()=>{class w extends ws{constructor(_,I,x,O,re){super(_,I,O,re),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const I=yield _.execute();return te(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,c.Z)(function*(){Ie(1===_.filter.length,"Popup operations only handle one event");const I=zo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Le(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Yl.get())};_()}}return w.currentPopupAction=null,w})();const ze=new Map;class zs extends ws{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,c.Z)(function*(){let I=ze.get(_.auth._key());if(!I){try{const O=(yield function xi(w,g){return Ql.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(O)}catch(x){I=()=>Promise.reject(x)}ze.set(_.auth._key(),I)}return _.bypassAuthState||ze.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,c.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const x=yield I.auth._redirectUserForId(g.eventId);if(x)return I.user=x,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function Ql(){return(Ql=(0,c.Z)(function*(w,g){const _=Pa(g),I=wf(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function ki(w,g){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,c.Z)(function*(w,g){return wf(w)._set(Pa(g),"true")})).apply(this,arguments)}function Io(){ze.clear()}function _d(w,g){ze.set(w._key(),g)}function wf(w){return X(w._redirectPersistence)}function Pa(w){return H("pendingRedirect",w.config.apiKey,w.name)}function $u(w,g,_){return function Xl(w,g,_){return Gi.apply(this,arguments)}(w,g,_)}function Gi(){return(Gi=(0,c.Z)(function*(w,g,_){const I=pr(w);Se(w,g,ms);const x=ka(I,_);return yield ki(x,I),x._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function b(w,g,_){return function D(w,g,_){return k.apply(this,arguments)}(w,g,_)}function k(){return(k=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w);Se(I.auth,g,ms);const x=ka(I.auth,_);yield ki(x,I.auth);const O=yield Nt(I);return x._openRedirect(I.auth,g,"reauthViaRedirect",O)})).apply(this,arguments)}function Z(w,g,_){return function ee(w,g,_){return ne.apply(this,arguments)}(w,g,_)}function ne(){return(ne=(0,c.Z)(function*(w,g,_){const I=(0,$.m9)(w);Se(I.auth,g,ms);const x=ka(I.auth,_);yield va(!1,I,g.providerId),yield ki(x,I.auth);const O=yield Nt(I);return x._openRedirect(I.auth,g,"linkViaRedirect",O)})).apply(this,arguments)}function Oe(w,g){return et.apply(this,arguments)}function et(){return(et=(0,c.Z)(function*(w,g){return yield pr(w)._initializationPromise,pt(w,g,!1)})).apply(this,arguments)}function pt(w,g){return lt.apply(this,arguments)}function lt(){return(lt=(0,c.Z)(function*(w,g,_=!1){const I=pr(w),x=ka(I,g),re=yield new zs(I,x,_).execute();return re&&!_&&(delete re.user._redirectEventId,yield I._persistUserIfCurrent(re.user),yield I._setRedirectUser(null,g)),re})).apply(this,arguments)}function Nt(w){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(w){const g=zo(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Mn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function bo(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jl(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!Jl(g)){const x=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Le(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jo(g))}saveEventToCache(g){this.cachedEventUids.add(Jo(g)),this.lastProcessedEventTime=Date.now()}}function Jo(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Jl({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function kr(w){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(w,g={}){return wt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const ea=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^https?/;function ec(){return(ec=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield kr(w);for(const _ of g)try{if(ir(_))return}catch{}Me(w,"unauthorized-domain")})).apply(this,arguments)}function ir(w){const g=Ue(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const re=new URL(w);return""===re.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&re.hostname===I}if(!_r.test(_))return!1;if(ea.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const Hu=new bt(3e4,6e4);function yd(){const w=On().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Mr=null;function qu(w){return Mr=Mr||function ss(w){return new Promise((g,_)=>{var I,x,O;function re(){yd(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{yd(),_(Le(w,"network-request-failed"))},timeout:Hu.get()})}if(null!==(x=null===(I=On().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(O=On().gapi)||void 0===O||!O.load){const Ae=qi("iframefcb");return On()[Ae]=()=>{gapi.load?re():_(Le(w,"network-request-failed"))},Qo(`https://apis.google.com/js/api.js?onload=${Ae}`).catch(tt=>_(tt))}re()}}).catch(g=>{throw Mr=null,g})}(w),Mr}const z_=new bt(5e3,15e3),Gu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Na(w){const g=w.config;te(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?Ht(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},x=hi.get(w.config.apiHost);x&&(I.eid=x);const O=w._getFrameworks();return O.length&&(I.fw=O.join(",")),`${_}?${(0,$.xO)(I).slice(1)}`}function ta(){return ta=(0,c.Z)(function*(w){const g=yield qu(w),_=On().gapi;return te(_,w,"internal-error"),g.open({where:document.body,url:Na(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gu,dontclear:!0},I=>new Promise(function(){var x=(0,c.Z)(function*(O,re){yield I.restyle({setHideOnLeave:!1});const Ae=Le(w,"network-request-failed"),tt=On().setTimeout(()=>{re(Ae)},z_.get());function at(){On().clearTimeout(tt),O(I)}I.ping(at).then(at,()=>{re(Ae)})});return function(O,re){return x.apply(this,arguments)}}()))}),ta.apply(this,arguments)}const If={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wt{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wd(w,g,_,I,x,O){te(w.config.authDomain,w,"auth-domain-config-required"),te(w.config.apiKey,w,"invalid-api-key");const re={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:N.SDK_VERSION,eventId:x};if(g instanceof ms){g.setDefaultLanguage(w.languageCode),re.providerId=g.providerId||"",(0,$.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[tt,at]of Object.entries(O||{}))re[tt]=at}if(g instanceof Bo){const tt=g.getScopes().filter(at=>""!==at);tt.length>0&&(re.scopes=tt.join(","))}w.tenantId&&(re.tid=w.tenantId);const Ae=re;for(const tt of Object.keys(Ae))void 0===Ae[tt]&&delete Ae[tt];return`${function os({config:w}){return w.emulator?Ht(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,$.xO)(Ae).slice(1)}`}const Ed="webStorageSupport",Cf=class Ag{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=js,this._completeRedirectFn=pt,this._overrideRedirectResult=_d}_openPopup(g,_,I,x){var O=this;return(0,c.Z)(function*(){var re;Ie(null===(re=O.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Ae=wd(g,_,I,Ue(),x);return function Mi(w,g,_,I=500,x=600){const O=Math.max((window.screen.availHeight-x)/2,0).toString(),re=Math.max((window.screen.availWidth-I)/2,0).toString();let Ae="";const tt=Object.assign(Object.assign({},If),{width:I.toString(),height:x.toString(),top:O,left:re}),at=(0,$.z$)().toLowerCase();_&&(Ae=ue(at)?"_blank":_),M(at)&&(g=g||"http://localhost",tt.scrollbars="yes");const Bt=Object.entries(tt).reduce((fi,[Ks,Oa])=>`${fi}${Ks}=${Oa},`,"");if(function fr(w=(0,$.z$)()){var g;return ct(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(at)&&"_self"!==Ae)return function K_(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",Ae),new Wt(null);const Dn=window.open(g||"",Ae,Bt);te(Dn,w,"popup-blocked");try{Dn.focus()}catch{}return new Wt(Dn)}(g,Ae,zo())})()}_openRedirect(g,_,I,x){var O=this;return(0,c.Z)(function*(){return yield O._originValidation(g),function Da(w){On().location.href=w}(wd(g,_,I,Ue(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:O}=this.eventManagers[_];return x?Promise.resolve(x):(Ie(O,"If manager is not set, promise should be"),O)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,c.Z)(function*(){const I=yield function hE(w){return ta.apply(this,arguments)}(g),x=new Mn(g);return I.register("authEvent",O=>(te(O?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=I,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Ed,{type:Ed},x=>{var O;const re=null===(O=x?.[0])||void 0===O?void 0:O[Ed];void 0!==re&&_(!!re),Me(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ef(w){return ec.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Ur()||V()||ct()}};class Q_{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return de("unexpected MultiFactorSessionType")}}}class yr extends Q_{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new yr(g)}_finalizeEnroll(g,_,I){return function lf(w,g){return wt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Wl(w,g){return wt(w,"POST","/v2/accounts/mfaSignIn:finalize",Kt(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let na=(()=>{class w{constructor(){}static assertion(_){return yr._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var Pr="@firebase/auth";class Df{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{g(I?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,$.Pz)("authIdTokenMaxAge"),function Xr(w){(0,N._registerComponent)(new ce.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:O,authDomain:re}=I.options;return((Ae,tt)=>{te(O&&!O.includes(":"),"invalid-api-key",{appName:Ae.name}),te(!re?.includes(":"),"argument-error",{appName:Ae.name});const at={apiKey:O,authDomain:re,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lo(w)},Bt=new Rl(Ae,tt,at);return function oe(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(X);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Bt,_),Bt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ce.wA("auth-internal",g=>{const _=pr(g.getProvider("auth").getImmediate());return new Df(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Pr,"0.21.0",function bd(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(Pr,"0.21.0","esm2017")}("Browser")},2090:(ft,Ce,F)=>{F.d(Ce,{$s:()=>Xe,BH:()=>fn,DV:()=>Vn,Dv:()=>Kn,G6:()=>Se,GJ:()=>cs,L:()=>fe,LL:()=>Jt,Pz:()=>nn,Sg:()=>bt,UG:()=>qe,UI:()=>Ii,US:()=>ce,Wj:()=>Yn,Wl:()=>Ei,Yr:()=>Pe,ZB:()=>W,ZR:()=>vt,aH:()=>mt,b$:()=>De,cI:()=>wt,dS:()=>Ut,eu:()=>te,g5:()=>N,gK:()=>bn,gQ:()=>Bn,h$:()=>ve,hl:()=>He,hu:()=>$,jU:()=>it,lb:()=>bi,m9:()=>Qt,ne:()=>Gr,p$:()=>G,pd:()=>zn,r3:()=>Zi,ru:()=>_e,tV:()=>me,uI:()=>xe,ug:()=>Ti,vZ:()=>gn,w1:()=>Me,w9:()=>Bi,xO:()=>hr,xb:()=>ii,z$:()=>Be,zI:()=>de,zd:()=>Sr});const $=function(q,H){if(!q)throw N(H)},N=function(q){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+q)},se=function(q){const H=[];let Y=0;for(let B=0;B<q.length;B++){let M=q.charCodeAt(B);M<128?H[Y++]=M:M<2048?(H[Y++]=M>>6|192,H[Y++]=63&M|128):55296==(64512&M)&&B+1<q.length&&56320==(64512&q.charCodeAt(B+1))?(M=65536+((1023&M)<<10)+(1023&q.charCodeAt(++B)),H[Y++]=M>>18|240,H[Y++]=M>>12&63|128,H[Y++]=M>>6&63|128,H[Y++]=63&M|128):(H[Y++]=M>>12|224,H[Y++]=M>>6&63|128,H[Y++]=63&M|128)}return H},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(q,H){if(!Array.isArray(q))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,B=[];for(let M=0;M<q.length;M+=3){const V=q[M],ue=M+1<q.length,ke=ue?q[M+1]:0,st=M+2<q.length,Ge=st?q[M+2]:0;let yn=(15&ke)<<2|Ge>>6,fr=63&Ge;st||(fr=64,ue||(yn=64)),B.push(Y[V>>2],Y[(3&V)<<4|ke>>4],Y[yn],Y[fr])}return B.join("")},encodeString(q,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(q):this.encodeByteArray(se(q),H)},decodeString(q,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(q):function(q){const H=[];let Y=0,B=0;for(;Y<q.length;){const M=q[Y++];if(M<128)H[B++]=String.fromCharCode(M);else if(M>191&&M<224){const V=q[Y++];H[B++]=String.fromCharCode((31&M)<<6|63&V)}else if(M>239&&M<365){const st=((7&M)<<18|(63&q[Y++])<<12|(63&q[Y++])<<6|63&q[Y++])-65536;H[B++]=String.fromCharCode(55296+(st>>10)),H[B++]=String.fromCharCode(56320+(1023&st))}else{const V=q[Y++],ue=q[Y++];H[B++]=String.fromCharCode((15&M)<<12|(63&V)<<6|63&ue)}}return H.join("")}(this.decodeStringToByteArray(q,H))},decodeStringToByteArray(q,H){this.init_();const Y=H?this.charToByteMapWebSafe_:this.charToByteMap_,B=[];for(let M=0;M<q.length;){const V=Y[q.charAt(M++)],ke=M<q.length?Y[q.charAt(M)]:0;++M;const Ge=M<q.length?Y[q.charAt(M)]:64;++M;const ct=M<q.length?Y[q.charAt(M)]:64;if(++M,null==V||null==ke||null==Ge||null==ct)throw Error();B.push(V<<2|ke>>4),64!==Ge&&(B.push(ke<<4&240|Ge>>2),64!==ct&&B.push(Ge<<6&192|ct))}return B},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let q=0;q<this.ENCODED_VALS.length;q++)this.byteToCharMap_[q]=this.ENCODED_VALS.charAt(q),this.charToByteMap_[this.byteToCharMap_[q]]=q,this.byteToCharMapWebSafe_[q]=this.ENCODED_VALS_WEBSAFE.charAt(q),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[q]]=q,q>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(q)]=q,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(q)]=q)}}},ve=function(q){const H=se(q);return ce.encodeByteArray(H,!0)},fe=function(q){return ve(q).replace(/\./g,"")},me=function(q){try{return ce.decodeString(q,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(q){return W(void 0,q)}function W(q,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===q&&(q={});break;case Array:q=[];break;default:return H}for(const Y in H)!H.hasOwnProperty(Y)||!J(Y)||(q[Y]=W(q[Y],H[Y]));return q}function J(q){return"__proto__"!==q}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function qe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function _e(){const q="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof q&&void 0!==q.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Me(){const q=Be();return q.indexOf("MSIE ")>=0||q.indexOf("Trident/")>=0}function Pe(){return!1}function Se(){return!qe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function He(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((q,H)=>{try{let Y=!0;const B="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(B);M.onsuccess=()=>{M.result.close(),Y||self.indexedDB.deleteDatabase(B),q(!0)},M.onupgradeneeded=()=>{Y=!1},M.onerror=()=>{var V;H((null===(V=M.error)||void 0===V?void 0:V.message)||"")}}catch(Y){H(Y)}})}function de(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const oe=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const q=process.env.__FIREBASE_DEFAULTS__;return q?JSON.parse(q):void 0})()||(()=>{if(typeof document>"u")return;let q;try{q=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const H=q&&me(q[1]);return H&&JSON.parse(H)})()}catch(q){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${q}`)}},mt=()=>{var q;return null===(q=oe())||void 0===q?void 0:q.config},nn=q=>{var H;return null===(H=oe())||void 0===H?void 0:H[`_${q}`]};class fn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,Y)=>{this.resolve=H,this.reject=Y})}wrapCallback(H){return(Y,B)=>{Y?this.reject(Y):this.resolve(B),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(Y):H(Y,B))}}}function bt(q,H){if(q.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const B=H||"demo-project",M=q.iat||0,V=q.sub||q.user_id;if(!V)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ue=Object.assign({iss:`https://securetoken.google.com/${B}`,aud:B,iat:M,exp:M+3600,auth_time:M,sub:V,user_id:V,firebase:{sign_in_provider:"custom",identities:{}}},q);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(ue)),""].join(".")}class vt extends Error{constructor(H,Y,B){super(Y),this.code=H,this.customData=B,this.name="FirebaseError",Object.setPrototypeOf(this,vt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jt.prototype.create)}}class Jt{constructor(H,Y,B){this.service=H,this.serviceName=Y,this.errors=B}create(H,...Y){const B=Y[0]||{},M=`${this.service}/${H}`,V=this.errors[H],ue=V?function cr(q,H){return q.replace(Kt,(Y,B)=>{const M=H[B];return null!=M?String(M):`<${B}?>`})}(V,B):"Error";return new vt(M,`${this.serviceName}: ${ue} (${M}).`,B)}}const Kt=/\{\$([^}]+)}/g;function wt(q){return JSON.parse(q)}function Ei(q){return JSON.stringify(q)}const ri=function(q){let H={},Y={},B={},M="";try{const V=q.split(".");H=wt(me(V[0])||""),Y=wt(me(V[1])||""),M=V[2],B=Y.d||{},delete Y.d}catch{}return{header:H,claims:Y,data:B,signature:M}},Bi=function(q){const Y=ri(q).claims;return!!Y&&"object"==typeof Y&&Y.hasOwnProperty("iat")},cs=function(q){const H=ri(q).claims;return"object"==typeof H&&!0===H.admin};function Zi(q,H){return Object.prototype.hasOwnProperty.call(q,H)}function Vn(q,H){if(Object.prototype.hasOwnProperty.call(q,H))return q[H]}function ii(q){for(const H in q)if(Object.prototype.hasOwnProperty.call(q,H))return!1;return!0}function Ii(q,H,Y){const B={};for(const M in q)Object.prototype.hasOwnProperty.call(q,M)&&(B[M]=H.call(Y,q[M],M,q));return B}function gn(q,H){if(q===H)return!0;const Y=Object.keys(q),B=Object.keys(H);for(const M of Y){if(!B.includes(M))return!1;const V=q[M],ue=H[M];if(dr(V)&&dr(ue)){if(!gn(V,ue))return!1}else if(V!==ue)return!1}for(const M of B)if(!Y.includes(M))return!1;return!0}function dr(q){return null!==q&&"object"==typeof q}function hr(q){const H=[];for(const[Y,B]of Object.entries(q))Array.isArray(B)?B.forEach(M=>{H.push(encodeURIComponent(Y)+"="+encodeURIComponent(M))}):H.push(encodeURIComponent(Y)+"="+encodeURIComponent(B));return H.length?"&"+H.join("&"):""}function Sr(q){const H={};return q.replace(/^\?/,"").split("&").forEach(B=>{if(B){const[M,V]=B.split("=");H[decodeURIComponent(M)]=decodeURIComponent(V)}}),H}function zn(q){const H=q.indexOf("?");if(!H)return"";const Y=q.indexOf("#",H);return q.substring(H,Y>0?Y:void 0)}class Bn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,Y){Y||(Y=0);const B=this.W_;if("string"==typeof H)for(let ct=0;ct<16;ct++)B[ct]=H.charCodeAt(Y)<<24|H.charCodeAt(Y+1)<<16|H.charCodeAt(Y+2)<<8|H.charCodeAt(Y+3),Y+=4;else for(let ct=0;ct<16;ct++)B[ct]=H[Y]<<24|H[Y+1]<<16|H[Y+2]<<8|H[Y+3],Y+=4;for(let ct=16;ct<80;ct++){const yn=B[ct-3]^B[ct-8]^B[ct-14]^B[ct-16];B[ct]=4294967295&(yn<<1|yn>>>31)}let Ge,Ot,M=this.chain_[0],V=this.chain_[1],ue=this.chain_[2],ke=this.chain_[3],st=this.chain_[4];for(let ct=0;ct<80;ct++){ct<40?ct<20?(Ge=ke^V&(ue^ke),Ot=1518500249):(Ge=V^ue^ke,Ot=1859775393):ct<60?(Ge=V&ue|ke&(V|ue),Ot=2400959708):(Ge=V^ue^ke,Ot=3395469782);const yn=(M<<5|M>>>27)+Ge+st+Ot+B[ct]&4294967295;st=ke,ke=ue,ue=4294967295&(V<<30|V>>>2),V=M,M=yn}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+V&4294967295,this.chain_[2]=this.chain_[2]+ue&4294967295,this.chain_[3]=this.chain_[3]+ke&4294967295,this.chain_[4]=this.chain_[4]+st&4294967295}update(H,Y){if(null==H)return;void 0===Y&&(Y=H.length);const B=Y-this.blockSize;let M=0;const V=this.buf_;let ue=this.inbuf_;for(;M<Y;){if(0===ue)for(;M<=B;)this.compress_(H,M),M+=this.blockSize;if("string"==typeof H){for(;M<Y;)if(V[ue]=H.charCodeAt(M),++ue,++M,ue===this.blockSize){this.compress_(V),ue=0;break}}else for(;M<Y;)if(V[ue]=H[M],++ue,++M,ue===this.blockSize){this.compress_(V),ue=0;break}}this.inbuf_=ue,this.total_+=Y}digest(){const H=[];let Y=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Y,Y/=256;this.compress_(this.buf_);let B=0;for(let M=0;M<5;M++)for(let V=24;V>=0;V-=8)H[B]=this.chain_[M]>>V&255,++B;return H}}function Gr(q,H){const Y=new St(q,H);return Y.subscribe.bind(Y)}class St{constructor(H,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{H(this)}).catch(B=>{this.error(B)})}next(H){this.forEachObserver(Y=>{Y.next(H)})}error(H){this.forEachObserver(Y=>{Y.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,Y,B){let M;if(void 0===H&&void 0===Y&&void 0===B)throw new Error("Missing Observer.");M=function Ct(q,H){if("object"!=typeof q||null===q)return!1;for(const Y of H)if(Y in q&&"function"==typeof q[Y])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:Y,complete:B},void 0===M.next&&(M.next=mn),void 0===M.error&&(M.error=mn),void 0===M.complete&&(M.complete=mn);const V=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),V}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,H)}sendOne(H,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{Y(this.observers[H])}catch(B){typeof console<"u"&&console.error&&console.error(B)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mn(){}const Kn=function(q,H,Y,B){let M;if(B<H?M="at least "+H:B>Y&&(M=0===Y?"none":"no more than "+Y),M)throw new Error(q+" failed: Was called with "+B+(1===B?" argument.":" arguments.")+" Expects "+M+".")};function bn(q,H){return`${q} failed: ${H} argument `}function Yn(q,H,Y,B){if((!B||Y)&&"function"!=typeof Y)throw new Error(bn(q,H)+"must be a valid function.")}function bi(q,H,Y,B){if((!B||Y)&&("object"!=typeof Y||null===Y))throw new Error(bn(q,H)+"must be a valid context object.")}const Ut=function(q){const H=[];let Y=0;for(let B=0;B<q.length;B++){let M=q.charCodeAt(B);if(M>=55296&&M<=56319){const V=M-55296;B++,$(B<q.length,"Surrogate pair missing trail surrogate."),M=65536+(V<<10)+(q.charCodeAt(B)-56320)}M<128?H[Y++]=M:M<2048?(H[Y++]=M>>6|192,H[Y++]=63&M|128):M<65536?(H[Y++]=M>>12|224,H[Y++]=M>>6&63|128,H[Y++]=63&M|128):(H[Y++]=M>>18|240,H[Y++]=M>>12&63|128,H[Y++]=M>>6&63|128,H[Y++]=63&M|128)}return H},Ti=function(q){let H=0;for(let Y=0;Y<q.length;Y++){const B=q.charCodeAt(Y);B<128?H++:B<2048?H+=2:B>=55296&&B<=56319?(H+=4,Y++):H+=3}return H};function Xe(q,H=1e3,Y=2){const B=H*Math.pow(Y,q),M=Math.round(.5*B*(Math.random()-.5)*2);return Math.min(144e5,B+M)}function Qt(q){return q&&q._delegate?q._delegate:q}},2622:(ft,Ce,F)=>{var c=F(4650);let $=null;function N(){return $}class ae{}const ce=new c.OlP("DocumentToken");let ve=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function fe(){return(0,c.LFG)(G)}()},providedIn:"platform"}),n})();const me=new c.OlP("Location Initialized");let G=(()=>{class n extends ve{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){W()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){W()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function J(){return new G((0,c.LFG)(ce))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let it=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(De)},providedIn:"root"}),n})();const _e=new c.OlP("appBaseHref");let De=(()=>{class n extends it{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+qe(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ve),c.LFG(_e,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Te=(()=>{class n extends it{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+qe(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ve),c.LFG(_e,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Me=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(xe(Se(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Pe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Be,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(c.LFG(it))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Le(){return new Me((0,c.LFG)(it))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}let vn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new fu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hs("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hs("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class fu{constructor(){this.$implicit=null,this.ngIf=null}}function hs(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}let Ji=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function ya(n){return"server"===n}let co=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new ho((0,c.LFG)(ce),window)}),n})();class ho{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wu(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fo(this.window.history)||fo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function fo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class jl extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zs extends jl{static makeCurrent(){!function se(n){$||($=n)}(new Zs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function mo(){return rs=rs||document.querySelector("base"),rs?rs.getAttribute("href"):null}();return null==t?null:function sd(n){_s=_s||document.createElement("a"),_s.setAttribute("href",n);const e=_s.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){rs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Wr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let _s,rs=null;const od=new c.OlP("TRANSITION_ID"),Mu=[{provide:c.ip1,useFactory:function Wo(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[od,ce,c.zs3],multi:!0}];let q_=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const js=new c.OlP("EventManagerPlugins");let $l=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(js),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Hl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let zo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pu=(()=>{class n extends zo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(On),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(On))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function On(n){N().remove(n)}const Da={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$s=/%COMP%/g;function ys(n,e){return e.flat(100).map(t=>t.replace($s,n))}function _o(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let vo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ou(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new cf(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new Hs(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=ys(r.id,r.styles);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG($l),c.LFG(Pu),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ou{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Da[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Zr(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Zr(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=Da[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Da[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_o(r)):this.eventManager.addEventListener(e,t,_o(r))}}function Zr(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class cf extends Ou{constructor(e,t,r,i){super(e),this.component=r;const a=ys(i+"-"+r.id,r.styles);t.addStyles(a),this.contentAttr=function Sa(n){return"_ngcontent-%COMP%".replace($s,n)}(i+"-"+r.id),this.hostAttr=function ql(n){return"_nghost-%COMP%".replace($s,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Hs extends Ou{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=ys(i.id,i.styles);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yo=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Lu=["alt","control","meta","shift"],Fu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ld={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Uu=(()=>{class n extends Hl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),l="code."),Lu.forEach(v=>{const C=r.indexOf(v);C>-1&&(r.splice(C,1),l+=v+".")}),l+=a,0!=r.length||0===a.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Fu[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Lu.forEach(l=>{l!==i&&(0,ld[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const ci=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Qo(){Zs.makeCurrent()},multi:!0},{provide:ce,useFactory:function cd(){return(0,c.RDi)(document),document},deps:[]}]),vs=new c.OlP(""),ff=[{provide:c.rWj,useClass:class Qr{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],zl=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function qi(){return new c.qLn},deps:[]},{provide:js,useClass:Yo,multi:!0,deps:[ce,c.R0b,c.Lbi]},{provide:js,useClass:Uu,multi:!0,deps:[ce]},{provide:vo,useClass:vo,deps:[$l,Pu,c.AFp]},{provide:c.FYo,useExisting:vo},{provide:zo,useExisting:Pu},{provide:Pu,useClass:Pu,deps:[ce]},{provide:$l,useClass:$l,deps:[js,c.R0b]},{provide:class jo{},useClass:q_,deps:[]},[]];let Aa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:od,useExisting:c.AFp},Mu]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vs,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...zl,...ff],imports:[Ji,c.hGG]}),n})(),wo=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function qs(){return new wo((0,c.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Vt=F(8996),Ws=F(7669);function ze(...n){const e=(0,Ws.yG)(n);return(0,Vt.D)(n,e)}var zs=F(7579);class xi extends zs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const ki=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Ri=F(9751);const{isArray:Io}=Array,{getPrototypeOf:_d,prototype:wf,keys:Pa}=Object;var Gi=F(4671),b=F(4004);const{isArray:D}=Array;var ne=F(5403),Oe=F(9672);function et(...n){const e=(0,Ws.yG)(n),t=(0,Ws.jO)(n),{args:r,keys:i}=function $u(n){if(1===n.length){const e=n[0];if(Io(e))return{args:e,keys:null};if(function Xl(n){return n&&"object"==typeof n&&_d(n)===wf}(e)){const t=Pa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Vt.D)([],e);const a=new Ri.y(function pt(n,e,t=Gi.y){return r=>{lt(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)lt(e,()=>{const v=(0,Vt.D)(n[m],e);let C=!1;v.subscribe((0,ne.x)(r,A=>{a[m]=A,C||(C=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function ee(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):Gi.y));return t?a.pipe(function Z(n){return(0,b.U)(e=>function k(n,e){return D(e)?n(...e):n(e)}(n,e))}(t)):a}function lt(n,e,t){n?(0,Oe.f)(t,n,e):e()}var Nt=F(8189);function di(...n){return function At(){return(0,Nt.J)(1)}()((0,Vt.D)(n,(0,Ws.yG)(n)))}var Mn=F(8421);function Jo(n){return new Ri.y(e=>{(0,Mn.Xf)(n()).subscribe(e)})}var Jl=F(9635),bo=F(576);function kr(n,e){const t=(0,bo.m)(n)?n:()=>n,r=i=>i.error(t());return new Ri.y(e?i=>e.schedule(r,0,i):r)}var Rr=F(515),ea=F(727),_r=F(4482);function Ef(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ne.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ec extends Ri.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ea.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ne.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ea.w0.EMPTY)}return e}refCount(){return Ef()(this)}}function ir(n,e){return(0,_r.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,ne.x)(r,m=>{i?.unsubscribe();let v=0;const C=a++;(0,Mn.Xf)(n(m,C)).subscribe(i=(0,ne.x)(r,A=>r.next(e?e(m,A,C,v++):A),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function Hu(n){return n<=0?()=>Rr.E:(0,_r.e)((e,t)=>{let r=0;e.subscribe((0,ne.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yd(...n){const e=(0,Ws.yG)(n);return(0,_r.e)((t,r)=>{(e?di(n,t,e):di(n,t)).subscribe(r)})}function ss(n,e){return(0,_r.e)((t,r)=>{let i=0;t.subscribe((0,ne.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Mr=F(5577);function qu(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,ne.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function z_(n=dE){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,ne.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function dE(){return new ki}function Es(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,a)=>n(i,a,r)):Gi.y,Hu(1),t?qu(e):z_(()=>new ki))}function Gu(n,e){return(0,bo.m)(e)?(0,Mr.z)(n,e,1):(0,Mr.z)(n,1)}var hi=F(8505);function Na(n){return(0,_r.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,ne.x)(t,void 0,void 0,l=>{a=(0,Mn.Xf)(n(l,Na(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function hE(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,ne.x)(l,C=>{const A=v++;m=f?n(m,C,A):(f=!0,C),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function ta(n,e){return(0,_r.e)(hE(n,e,arguments.length>=2,!0))}function If(n){return n<=0?()=>Rr.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,ne.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bf(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ss((i,a)=>n(i,a,r)):Gi.y,If(1),t?qu(e):z_(()=>new ki))}function vd(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Wt="primary",Mi=Symbol("RouteTitle");class K_{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Wu(n){return new K_(n)}function Y_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function os(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ed(n[i],e[i]))return!1;return!0}function Ed(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ag(n){return Array.prototype.concat.apply([],n)}function Cf(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function na(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Vt.D)(Promise.resolve(n)):ze(n)}const Pr=!1,Id={exact:function zu(n,e,t){if(!x(n.segments,e.segments)||!Cd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!zu(n.children[r],e.children[r],t))return!1;return!0},subset:Td},Df={exact:function Xr(n,e){return os(n,e)},subset:function xg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ed(n[t],e[t]))},ignored:()=>!0};function bd(n,e,t){return Id[t.paths](n.root,e.root,t.matrixParams)&&Df[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Td(n,e,t){return kg(n,e,e.segments,t)}function kg(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!x(i,t)||e.hasChildren()||!Cd(i,t,r))}if(n.segments.length===t.length){if(!x(n.segments,t)||!Cd(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Td(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(x(n.segments,i)&&Cd(n.segments,i,r)&&n.children[Wt])&&kg(n.children[Wt],e,a,r)}}function Cd(n,e,t){return e.every((r,i)=>Df[t](n[i].parameters,r.parameters))}class w{constructor(e=new g([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wu(this.queryParams)),this._queryParamMap}toString(){return tt.serialize(this)}}class g{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return at(this)}}class _{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Wu(this.parameters)),this._parameterMap}toString(){return Dd(this)}}function x(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Ae},providedIn:"root"}),n})();class Ae{parse(e){const t=new Ng(e);return new w(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Bt(e.root,!0)}`,r=function tc(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${fi(t)}=${fi(i)}`).join("&"):`${fi(t)}=${fi(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Ks(n){return encodeURI(n)}(e.fragment)}`:""}`}}const tt=new Ae;function at(n){return n.segments.map(e=>Dd(e)).join("/")}function Bt(n,e){if(!n.hasChildren())return at(n);if(e){const t=n.children[Wt]?Bt(n.children[Wt],!1):"",r=[];return yr(n.children,(i,a)=>{a!==Wt&&r.push(`${a}:${Bt(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O(n,e){let t=[];return yr(n.children,(r,i)=>{i===Wt&&(t=t.concat(e(r,i)))}),yr(n.children,(r,i)=>{i!==Wt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Wt?[Bt(n.children[Wt],!1)]:[`${i}:${Bt(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Wt]?`${at(n)}/${t[0]}`:`${at(n)}/(${t.join("//")})`}}function Dn(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fi(n){return Dn(n).replace(/%3B/gi,";")}function Oa(n){return Dn(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ys(n){return decodeURIComponent(n)}function Ku(n){return Ys(n.replace(/\+/g,"%20"))}function Dd(n){return`${Oa(n.path)}${function Rg(n){return Object.keys(n).map(e=>`;${Oa(e)}=${Oa(n[e])}`).join("")}(n.parameters)}`}const Mg=/^[^\/()?;=#]+/;function nc(n){const e=n.match(Mg);return e?e[0]:""}const Sf=/^[^=?&#]+/,X_=/^[^&#]+/;class Ng{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new g([],{}):new g([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Wt]=new g(e,t)),r}parseSegment(){const e=nc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,Pr);return this.capture(e),new _(Ys(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=nc(this.remaining);i&&(r=i,this.capture(r))}e[Ys(t)]=Ys(r)}parseQueryParam(e){const t=function Pg(n){const e=n.match(Sf);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Af(n){const e=n.match(X_);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=Ku(t),a=Ku(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=nc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,Pr);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Wt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Wt]:new g([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,Pr)}}function xf(n){return n.segments.length>0?new g([],{[Wt]:n}):n}function kf(n){const e={};for(const r of Object.keys(n.children)){const a=kf(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function J_(n){if(1===n.numberOfChildren&&n.children[Wt]){const e=n.children[Wt];return new g(n.segments.concat(e.segments),e.children)}return n}(new g(n.segments,e))}function rc(n){return n instanceof w}function pE(n,e,t,r,i){if(0===t.length)return Mf(e.root,e.root,e.root,r,i);const a=function ty(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gE(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return yr(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new gE(t,e,r)}(t);return a.toRoot()?Mf(e.root,e.root,new g([],{}),r,i):function l(m){const v=function ny(n,e,t,r){if(n.isAbsolute)return new sc(e.root,!0,0);if(-1===r)return new sc(t,t===e.root,0);return function ry(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new c.vHH(4005,!1);i=r.segments.length}return new sc(r,!1,i-a)}(t,r+(Sd(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),C=v.processChildren?xd(v.segmentGroup,v.index,a.commands):Ad(v.segmentGroup,v.index,a.commands);return Mf(e.root,v.segmentGroup,C,r,i)}(n.snapshot?._lastPathIndex)}function Sd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Rf(n){return"object"==typeof n&&null!=n&&n.outlets}function Mf(n,e,t,r,i){let l,a={};r&&yr(r,(m,v)=>{a[v]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),l=n===e?t:Pf(n,e,t);const f=xf(kf(l));return new w(f,a,i)}function Pf(n,e,t){const r={};return yr(n.children,(i,a)=>{r[a]=i===e?t:Pf(i,e,t)}),new g(n.segments,r)}class gE{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Sd(r[0]))throw new c.vHH(4003,!1);const i=r.find(Rf);if(i&&i!==Cf(r))throw new c.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ad(n,e,t){if(n||(n=new g([],{})),0===n.segments.length&&n.hasChildren())return xd(n,e,t);const r=function iy(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Rf(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!_E(m,v,l))return a;r+=2}else{if(!_E(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new g(n.segments.slice(0,r.pathIndex),{});return a.children[Wt]=new g(n.segments.slice(r.pathIndex),n.children),xd(a,0,i)}return r.match&&0===i.length?new g(n.segments,{}):r.match&&!n.hasChildren()?Nf(n,e,t):r.match?xd(n,0,i):Nf(n,e,t)}function xd(n,e,t){if(0===t.length)return new g(n.segments,{});{const r=function Og(n){return Rf(n[0])?n[0].outlets:{[Wt]:n}}(t),i={};return yr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=Ad(n.children[l],e,a))}),yr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new g(n.segments,i)}}function Nf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Rf(a)){const m=sy(a.outlets);return new g(r,m)}if(0===i&&Sd(t[0])){r.push(new _(n.segments[e].path,kd(t[0]))),i++;continue}const l=Rf(a)?a.outlets[Wt]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&Sd(f)?(r.push(new _(l,kd(f))),i+=2):(r.push(new _(l,{})),i++)}return new g(r,{})}function sy(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Nf(new g([],{}),0,t))}),e}function kd(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function _E(n,e,t){return n==t.path&&os(e,t.parameters)}class ra{constructor(e,t){this.id=e,this.url=t}}class oy extends ra{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Yu extends ra{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lg extends ra{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ay extends ra{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yE extends ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fg extends ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uy extends ra{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class oc extends ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IC extends ra{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bC{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hk{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TC{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ly{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CC{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vE{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Of{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let wE=(()=>{class n{createUrlTree(t,r,i,a,l,f){return pE(t||r.root,i,a,l,f)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),EE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(e){return wE.\u0275fac(e)},providedIn:"root"}),n})();class IE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=dy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=dy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=hy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return hy(e,this._root).map(t=>t.value)}}function dy(n,e){if(n===e.value)return e;for(const t of e.children){const r=dy(n,t);if(r)return r}return null}function hy(n,e){if(n===e.value)return[e];for(const t of e.children){const r=hy(n,t);if(r.length)return r.unshift(e),r}return[]}class La{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Rd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Fa extends IE{constructor(e,t){super(e),this.snapshot=t,Ug(this,e)}toString(){return this.snapshot.toString()}}function Md(n,e){const t=function AC(n,e){const l=new fy([],{},{},"",{},Wt,e,null,n.root,-1,{});return new kC("",new La(l,[]))}(n,e),r=new xi([new _("",{})]),i=new xi({}),a=new xi({}),l=new xi({}),f=new xi(""),m=new Lf(r,i,l,f,a,Wt,e,t.root);return m.snapshot=t.root,new Fa(new La(m,[]),t)}class Lf{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.title=this.data?.pipe((0,b.U)(v=>v[Mi]))??ze(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,b.U)(e=>Wu(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,b.U)(e=>Wu(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function fk(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class fy{constructor(e,t,r,i,a,l,f,m,v,C,A){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=C,this._resolve=A}get title(){return this.data?.[Mi]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kC extends IE{constructor(e,t){super(t),this.url=e,Ug(this,t)}toString(){return bE(this._root)}}function Ug(n,e){e.value._routerState=n,e.children.forEach(t=>Ug(n,t))}function bE(n){const e=n.children.length>0?` { ${n.children.map(bE).join(", ")} } `:"";return`${n.value}${e}`}function py(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,os(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),os(e.params,t.params)||n.params.next(t.params),function wd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!os(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),os(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gy(n,e){const t=os(n.params,e.params)&&function I(n,e){return x(n,e)&&n.every((t,r)=>os(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||gy(n.parent,e.parent))}function ac(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ua(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ac(n,r,i);return ac(n,r)})}(n,e,t);return new La(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>ac(n,f)),l}}const r=function Ff(n){return new Lf(new xi(n.url),new xi(n.params),new xi(n.queryParams),new xi(n.fragment),new xi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>ac(n,a));return new La(r,i)}}const Vg="ngNavigationCancelingError";function my(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=rc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_y(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function _y(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Vg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function MC(n){return PC(n)&&rc(n.url)}function PC(n){return n&&n[Vg]}class pk{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new uc,this.attachRef=null}}let uc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pk,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pd=!1;let TE=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Wt,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.parentContexts=(0,c.f3M)(uc),this.location=(0,c.f3M)(c.s_b),this.changeDetector=(0,c.f3M)(c.sBO),this.environmentInjector=(0,c.f3M)(c.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,Pd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,Pd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,Pd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,Pd);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new gk(t,f,i.injector);if(r&&function CE(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[c.TTD]}),n})();class gk{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Lf?this.route:e===uc?this.childContexts:this.parent.get(e,t)}}let yy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[TE],encapsulation:2}),n})();function DE(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Iy(n){const e=n.children&&n.children.map(Iy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Wt&&(t.component=yy),t}function Qs(n){return n.outlet||Wt}function Bg(n,e){const t=n.filter(r=>Qs(r)===e);return t.push(...n.filter(r=>Qs(r)!==e)),t}function Nd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class FC{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),py(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Rd(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),yr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Rd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Rd(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Rd(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new vE(a.value.snapshot))}),e.children.length&&this.forwardEvent(new ly(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(py(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),py(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=Nd(i.snapshot),m=f?.get(c._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class SE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zg{constructor(e,t){this.component=e,this.route=t}}function AE(n,e,t){const r=n._root;return Va(r,e?e._root:null,t,[r.value])}function Uf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function Va(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Rd(e);return n.children.forEach(l=>{(function by(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function xE(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!x(n.url,e.url);case"pathParamsOrQueryParamsChange":return!x(n.url,e.url)||!os(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gy(n,e)||!os(n.queryParams,e.queryParams);default:return!gy(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new SE(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Va(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new Zg(f.outlet.component,l))}else l&&Od(e,f,i),i.canActivateChecks.push(new SE(r)),Va(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),yr(a,(l,f)=>Od(l,t.getContext(f),i)),i}function Od(n,e,t){const r=Rd(n),i=n.value;yr(r,(a,l)=>{Od(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Zg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ld(n){return"function"==typeof n}function Vf(n){return n instanceof ki||"EmptyError"===n?.name}const Bf=Symbol("INITIAL_VALUE");function lc(){return ir(n=>et(n.map(e=>e.pipe(Hu(1),yd(Bf)))).pipe((0,b.U)(e=>{for(const t of e)if(!0!==t){if(t===Bf)return Bf;if(!1===t||t instanceof w)return t}return!0}),ss(e=>e!==Bf),Hu(1)))}function Hg(n){return(0,Jl.z)((0,hi.b)(e=>{if(rc(e))throw my(0,e)}),(0,b.U)(e=>!0===e))}const Sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ay(n,e,t,r,i){const a=Qu(n,e,t);return a.matched?function jC(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ze(i.map(l=>{const f=Uf(l,n);return na(function wk(n){return n&&Ld(n.canMatch)}(f)?f.canMatch(e,t):n.runInContext(()=>f(e,t)))})).pipe(lc(),Hg()):ze(!0)}(r=DE(e,r),e,t).pipe((0,b.U)(l=>!0===l?a:{...Sy})):ze(a)}function Qu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Sy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Y_)(t,n,e);if(!i)return{...Sy};const a={};yr(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function qg(n,e,t,r){if(t.length>0&&function xy(n,e,t){return t.some(r=>Zf(n,e,r)&&Qs(r)!==Wt)}(n,t,r)){const a=new g(e,function HC(n,e,t,r){const i={};i[Wt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Qs(a)!==Wt){const l=new g([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Qs(a)]=l}return i}(n,e,r,new g(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function qC(n,e,t){return t.some(r=>Zf(n,e,r))}(n,t,r)){const a=new g(n.segments,function $C(n,e,t,r,i){const a={};for(const l of r)if(Zf(n,t,l)&&!i[Qs(l)]){const f=new g([],{});f._sourceSegment=n,f._segmentIndexShift=e.length,a[Qs(l)]=f}return{...i,...a}}(n,e,t,r,n.children));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const i=new g(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function Zf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function NE(n,e,t,r){return!!(Qs(n)===r||r!==Wt&&Zf(e,t,n))&&("**"===n.path||Qu(e,n,t).matched)}function ky(n,e,t){return 0===e.length&&!n.children[t]}const Ry=!1;class Gg{constructor(e){this.segmentGroup=e||null}}class Fd{constructor(e){this.urlTree=e}}function jf(n){return kr(new Gg(n))}function hc(n){return kr(new Fd(n))}class WC{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=qg(this.urlTree.root,[],[],this.config).segmentGroup,t=new g(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Wt).pipe((0,b.U)(a=>this.createUrlTree(kf(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Na(a=>{if(a instanceof Fd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Gg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Wt).pipe((0,b.U)(i=>this.createUrlTree(kf(i),e.queryParams,e.fragment))).pipe(Na(i=>{throw i instanceof Gg?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,Ry)}createUrlTree(e,t,r){const i=xf(e);return new w(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,b.U)(a=>new g([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Vt.D)(i).pipe(Gu(a=>{const l=r.children[a],f=Bg(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,b.U)(m=>({segment:m,outlet:a})))}),ta((a,l)=>(a[l.outlet]=l.segment,a),{}),bf())}expandSegment(e,t,r,i,a,l){return(0,Vt.D)(r).pipe(Gu(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(Na(v=>{if(v instanceof Gg)return ze(null);throw v}))),Es(f=>!!f),Na((f,m)=>{if(Vf(f))return ky(t,i,a)?ze(new g([],{})):jf(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return NE(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):jf(t):jf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hc(a):this.lineralizeSegments(r,a).pipe((0,Mr.z)(l=>{const f=new g(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:C}=Qu(t,i,a);if(!f)return jf(t);const A=this.applyRedirectCommands(m,i.redirectTo,C);return i.redirectTo.startsWith("/")?hc(A):this.lineralizeSegments(i,A).pipe((0,Mr.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=DE(r,e),r.loadChildren?(r._loadedRoutes?ze({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,b.U)(f=>(r._loadedRoutes=f.routes,r._loadedInjector=f.injector,new g(i,{})))):ze(new g(i,{}))):Ay(t,r,i,e).pipe(ir(({matched:l,consumedSegments:f,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mr.z)(C=>{const A=C.injector??e,P=C.routes,{segmentGroup:j,slicedSegments:z}=qg(t,f,m,P),ge=new g(j.segments,j.children);if(0===z.length&&ge.hasChildren())return this.expandChildren(A,P,ge).pipe((0,b.U)(ot=>new g(f,ot)));if(0===P.length&&0===z.length)return ze(new g(f,{}));const Ee=Qs(r)===a;return this.expandSegment(A,ge,P,z,Ee?Wt:a,!0).pipe((0,b.U)(Et=>new g(f.concat(Et.segments),Et.children)))})):jf(t)))}getChildConfig(e,t,r){return t.children?ze({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ze({routes:t._loadedRoutes,injector:t._loadedInjector}):function PE(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ze(!0):ze(i.map(l=>{const f=Uf(l,n);return na(function UC(n){return n&&Ld(n.canLoad)}(f)?f.canLoad(e,t):n.runInContext(()=>f(e,t)))})).pipe(lc(),Hg())}(e,t,r).pipe((0,Mr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,hi.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function GC(n){return kr(_y(Ry,3))}())):ze({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ze(r);if(i.numberOfChildren>1||!i.children[Wt])return kr(new c.vHH(4e3,Ry));i=i.children[Wt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new w(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return yr(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new g(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,Ry);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class FE{}class Py{constructor(e,t,r,i,a,l,f){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.urlSerializer=f}recognize(){const e=qg(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Wt).pipe((0,b.U)(t=>{if(null===t)return null;const r=new fy([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new La(r,t),a=new kC(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=xC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Vt.D)(Object.keys(r.children)).pipe(Gu(i=>{const a=r.children[i],l=Bg(t,i);return this.processSegmentGroup(e,l,a,i)}),ta((i,a)=>i&&a?(i.push(...a),i):null),function Tf(n,e=!1){return(0,_r.e)((t,r)=>{let i=0;t.subscribe((0,ne.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),qu(null),bf(),(0,b.U)(i=>{if(null===i)return null;const a=VE(i);return function KC(n){n.sort((e,t)=>e.value.outlet===Wt?-1:t.value.outlet===Wt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Vt.D)(t).pipe(Gu(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),Es(l=>!!l),Na(l=>{if(Vf(l))return ky(r,i,a)?ze([]):ze(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!NE(t,r,i,a))return ze(null);let l;if("**"===t.path){const f=i.length>0?Cf(i).parameters:{},m=ZE(r)+i.length;l=ze({snapshot:new fy(i,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jE(t),Qs(t),t.component??t._loadedComponent??null,t,BE(r),m,$E(t)),consumedSegments:[],remainingSegments:[]})}else l=Ay(r,t,i,e).pipe((0,b.U)(({matched:f,consumedSegments:m,remainingSegments:v,parameters:C})=>{if(!f)return null;const A=ZE(r)+m.length;return{snapshot:new fy(m,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,jE(t),Qs(t),t.component??t._loadedComponent??null,t,BE(r),A,$E(t)),consumedSegments:m,remainingSegments:v}}));return l.pipe(ir(f=>{if(null===f)return ze(null);const{snapshot:m,consumedSegments:v,remainingSegments:C}=f;e=t._injector??e;const A=t._loadedInjector??e,P=function Ny(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:j,slicedSegments:z}=qg(r,v,C,P.filter(Ee=>void 0===Ee.redirectTo));if(0===z.length&&j.hasChildren())return this.processChildren(A,P,j).pipe((0,b.U)(Ee=>null===Ee?null:[new La(m,Ee)]));if(0===P.length&&0===z.length)return ze([new La(m,[])]);const ge=Qs(t)===a;return this.processSegment(A,P,j,z,ge?Wt:a).pipe((0,b.U)(Ee=>null===Ee?null:[new La(m,Ee)]))}))}}function Hf(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function VE(n){const e=[],t=new Set;for(const r of n){if(!Hf(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=VE(r.children);e.push(new La(r.value,i))}return e.filter(r=>!t.has(r))}function BE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ZE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function jE(n){return n.data||{}}function $E(n){return n.resolve||{}}function Oy(n){return"string"==typeof n.title||null===n.title}function HE(n){return ir(e=>{const t=n(e);return t?(0,Vt.D)(t).pipe((0,b.U)(()=>e)):ze(e)})}const Vd=new c.OlP("ROUTES");let Wg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ze(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=na(t.loadComponent()).pipe((0,b.U)(GE),(0,hi.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),vd(()=>{this.componentLoaders.delete(t)})),i=new ec(r,()=>new zs.x).pipe(Ef());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ze({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,b.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,C=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=Ag(m.get(Vd,[],c.XFs.Self|c.XFs.Optional)));return{routes:v.map(Iy),injector:m}}),vd(()=>{this.childrenLoaders.delete(r)})),l=new ec(a,()=>new zs.x).pipe(Ef());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return na(t()).pipe((0,b.U)(GE),(0,Mr.z)(i=>i instanceof c.YKP||Array.isArray(i)?ze(i):(0,Vt.D)(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GE(n){return function JC(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Fy=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new zs.x,this.configLoader=(0,c.f3M)(Wg),this.environmentInjector=(0,c.f3M)(c.lqb),this.urlSerializer=(0,c.f3M)(re),this.rootContexts=(0,c.f3M)(uc),this.navigationId=0,this.configLoader.onLoadEndListener=i=>this.events.next(new hk(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new bC(i))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new xi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ss(r=>0!==r.id),(0,b.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ir(r=>{let i=!1,a=!1;return ze(r).pipe((0,hi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ir(l=>{const f=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==f||f!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||m)&&t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Uy(l.source)&&(t.browserUrlTree=l.extractedUrl),ze(l).pipe(ir(C=>{const A=this.transitions?.getValue();return this.events.next(new oy(C.id,this.urlSerializer.serialize(C.extractedUrl),C.source,C.restoredState)),A!==this.transitions?.getValue()?Rr.E:Promise.resolve(C)}),function zC(n,e,t,r){return ir(i=>function OE(n,e,t,r,i){return new WC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,b.U)(a=>({...i,urlAfterRedirects:a}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,hi.b)(C=>{this.currentNavigation={...this.currentNavigation,finalUrl:C.urlAfterRedirects},r.urlAfterRedirects=C.urlAfterRedirects}),function Ud(n,e,t,r,i){return(0,Mr.z)(a=>function My(n,e,t,r,i,a,l="emptyOnly"){return new Py(n,e,t,r,i,l,a).recognize().pipe(ir(f=>null===f?function UE(n){return new Ri.y(e=>e.error(n))}(new FE):ze(f)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i).pipe((0,b.U)(l=>({...a,targetSnapshot:l}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,hi.b)(C=>{if(r.targetSnapshot=C.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!C.extras.skipLocationChange){const P=t.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl);t.setBrowserUrl(P,C)}t.browserUrlTree=C.urlAfterRedirects}const A=new yE(C.id,this.urlSerializer.serialize(C.extractedUrl),this.urlSerializer.serialize(C.urlAfterRedirects),C.targetSnapshot);this.events.next(A)}));if(m&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:P,source:j,restoredState:z,extras:ge}=l,Ee=new oy(A,this.urlSerializer.serialize(P),j,z);this.events.next(Ee);const dt=Md(P,t.rootComponentType).snapshot;return ze(r={...l,targetSnapshot:dt,urlAfterRedirects:P,extras:{...ge,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=l.rawUrl,l.resolve(null),Rr.E}),(0,hi.b)(l=>{const f=new Fg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(f)}),(0,b.U)(l=>r={...l,guards:AE(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function cc(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ze({...t,guardsResult:!0}):function BC(n,e,t,r){return(0,Vt.D)(n).pipe((0,Mr.z)(i=>function dc(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ze(a.map(f=>{const m=Nd(e)??i,v=Uf(f,m);return na(function Ty(n){return n&&Ld(n.canDeactivate)}(v)?v.canDeactivate(n,e,t,r):m.runInContext(()=>v(n,e,t,r))).pipe(Es())})).pipe(lc()):ze(!0)}(i.component,i.route,t,e,r)),Es(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Mr.z)(f=>f&&function vk(n){return"boolean"==typeof n}(f)?function Cy(n,e,t,r){return(0,Vt.D)(e).pipe(Gu(i=>di(function ZC(n,e){return null!==n&&e&&e(new TC(n)),ze(!0)}(i.route.parent,r),function jg(n,e){return null!==n&&e&&e(new CC(n)),ze(!0)}(i.route,r),function $g(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function yk(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Jo(()=>ze(l.guards.map(m=>{const v=Nd(l.node)??t,C=Uf(m,v);return na(function RE(n){return n&&Ld(n.canActivateChild)}(C)?C.canActivateChild(r,n):v.runInContext(()=>C(r,n))).pipe(Es())})).pipe(lc())));return ze(a).pipe(lc())}(n,i.path,t),function Dy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ze(!0);const i=r.map(a=>Jo(()=>{const l=Nd(e)??t,f=Uf(a,l);return na(function kE(n){return n&&Ld(n.canActivate)}(f)?f.canActivate(e,n):l.runInContext(()=>f(e,n))).pipe(Es())}));return ze(i).pipe(lc())}(n,i.route,t))),Es(i=>!0!==i,!0))}(r,a,n,e):ze(f)),(0,b.U)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,l=>this.events.next(l)),(0,hi.b)(l=>{if(r.guardsResult=l.guardsResult,rc(l.guardsResult))throw my(0,l.guardsResult);const f=new uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(f)}),ss(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3,t),!1)),HE(l=>{if(l.guards.canActivateChecks.length)return ze(l).pipe((0,hi.b)(f=>{const m=new oc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),ir(f=>{let m=!1;return ze(f).pipe(function Ba(n,e){return(0,Mr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ze(t);let a=0;return(0,Vt.D)(i).pipe(Gu(l=>function QC(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!Oy(i)&&(a[Mi]=i.title),function XC(n,e,t,r){const i=function Ik(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ze({});const a={};return(0,Vt.D)(i).pipe((0,Mr.z)(l=>function bk(n,e,t,r){const i=Nd(e)??r,a=Uf(n,i);return na(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(Es(),(0,hi.b)(f=>{a[l]=f}))),If(1),function Sg(n){return(0,b.U)(()=>n)}(a),Na(l=>Vf(l)?Rr.E:kr(l)))}(a,n,e,r).pipe((0,b.U)(l=>(n._resolvedData=l,n.data=xC(n,t).resolve,i&&Oy(i)&&(n.data[Mi]=i.title),null)))}(l.route,r,n,e)),(0,hi.b)(()=>a++),If(1),(0,Mr.z)(l=>a===i.length?ze(t):Rr.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,hi.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(f),this.cancelNavigationTransition(f,"",2,t))}}))}),(0,hi.b)(f=>{const m=new IC(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}))}),HE(l=>{const f=m=>{const v=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&v.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,hi.b)(C=>{m.component=C}),(0,b.U)(()=>{})));for(const C of m.children)v.push(...f(C));return v};return et(f(l.targetSnapshot.root)).pipe(qu(),Hu(1))}),HE(()=>t.afterPreactivation()),(0,b.U)(l=>{const f=function RC(n,e,t){const r=ac(n,e._root,t?t._root:void 0);return new Fa(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:f}}),(0,hi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,b.U)(r=>(new FC(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,hi.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Yu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),vd(()=>{i||a||this.cancelNavigationTransition(r,"",1,t),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Na(l=>{if(a=!0,PC(l)){MC(l)||(t.navigated=!0,t.restoreHistory(r,!0));const f=new Lg(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(f),MC(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),v={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Uy(r.source)};t.scheduleNavigation(m,"imperative",null,v,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const f=new ay(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(f);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return Rr.E}))}))}cancelNavigationTransition(t,r,i,a){const l=new Lg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(l),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Uy(n){return"imperative"!==n}let WE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===Wt);return r}getResolvedTitleForRoute(t){return t.data[Mi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(eD)},providedIn:"root"}),n})(),eD=(()=>{class n extends WE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(wo))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(zE)},providedIn:"root"}),n})();class nD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let zE=(()=>{class n extends nD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zg=new c.OlP("",{providedIn:"root",factory:()=>({})});let iD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(qt)},providedIn:"root"}),n})(),qt=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KE(n){throw n}function YE(n,e,t){return e.parse("/")}const sD={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},oD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,c.f3M)(c.c2e),this.isNgZoneEnabled=!1,this.options=(0,c.f3M)(zg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||KE,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||YE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ze(void 0),this.urlHandlingStrategy=(0,c.f3M)(iD),this.routeReuseStrategy=(0,c.f3M)(tD),this.urlCreationStrategy=(0,c.f3M)(EE),this.titleStrategy=(0,c.f3M)(WE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Ag((0,c.f3M)(Vd,{optional:!0})??[]),this.navigationTransitions=(0,c.f3M)(Fy),this.urlSerializer=(0,c.f3M)(re),this.location=(0,c.f3M)(Me),this.rootComponentType=null,this.isNgZoneEnabled=(0,c.f3M)(c.R0b)instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new w,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Md(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(t.state){const f={...t.state};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Iy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=m?this.currentUrlTree.fragment:l;let C=null;switch(f){case"merge":C={...this.currentUrlTree.queryParams,...a};break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=a||null}return null!==C&&(C=this.removeEmptyProps(C)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,C,v??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=rc(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aD(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...sD}:!1===r?{...oD}:r,rc(t))return bd(this.currentUrlTree,t,i);const a=this.parseUrl(t);return bd(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v,C;return l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((A,P)=>{f=A,m=P}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),C=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):C=0,this.navigationTransitions.handleNavigationRequest({targetPageId:C,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(A=>Promise.reject(A))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===i?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xu=(()=>{class n{constructor(t,r,i,a,l,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.locationStrategy=f,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new zs.x;const m=l.nativeElement.tagName;this.isAnchorElement="A"===m||"AREA"===m,this.isAnchorElement?this.subscription=t.events.subscribe(v=>{v instanceof Yu&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,a,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,c.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pi),c.Y36(Lf),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(it))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&c.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&c.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})(),QE=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new c.vpe,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Yu&&this.update()})}ngAfterContentInit(){ze(this.links.changes,ze(null)).pipe((0,Nt.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Vt.D)(t).pipe((0,Nt.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function uD(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(pi),c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(c.sBO),c.Y36(Xu,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,Xu,5),2&t){let a;c.iGM(a=c.CRH())&&(r.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[c.TTD]}),n})();class lD{}let fc=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ss(t=>t instanceof Yu),Gu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,c.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Vt.D)(i).pipe((0,Nt.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ze(null);const a=i.pipe((0,Mr.z)(l=>null===l?ze(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Vt.D)([a,l]).pipe((0,Nt.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(pi),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(lD),c.LFG(Wg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const By=new c.OlP("");let Kg=(()=>{class n{constructor(t,r,i,a,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof oy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Yu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Of&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Of(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function qf(n,e){return{\u0275kind:n,\u0275providers:e}}function JE(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(pi),i=n.get(pc);1===n.get(Zy)&&r.initialNavigation(),n.get(jy,null,c.XFs.Optional)?.setUpPreloading(),n.get(By,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const pc=new c.OlP("",{factory:()=>new zs.x}),Zy=new c.OlP("",{providedIn:"root",factory:()=>1});const jy=new c.OlP("");function mD(n){return qf(0,[{provide:jy,useExisting:fc},{provide:lD,useExisting:n}])}const tI=new c.OlP("ROUTER_FORROOT_GUARD"),nI=[Me,{provide:re,useClass:Ae},pi,uc,{provide:Lf,useFactory:function hD(n){return n.routerState.root},deps:[pi]},Wg,[]];function _D(){return new c.PXZ("Router",pi)}let $y=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[nI,[],{provide:Vd,multi:!0,useValue:t},{provide:tI,useFactory:qy,deps:[[pi,new c.FiY,new c.tp0]]},{provide:zg,useValue:r||{}},r?.useHash?{provide:it,useClass:Te}:{provide:it,useClass:De},{provide:By,useFactory:()=>{const n=(0,c.f3M)(co),e=(0,c.f3M)(c.R0b),t=(0,c.f3M)(zg),r=(0,c.f3M)(Fy),i=(0,c.f3M)(re);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Kg(i,r,n,e,t)}},r?.preloadingStrategy?mD(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:_D},r?.initialNavigation?yD(r):[],[{provide:vD,useFactory:JE},{provide:c.tb,multi:!0,useExisting:vD}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Vd,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(tI,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[yy]}),n})();function qy(n){return"guarded"}function yD(n){return["disabled"===n.initialNavigation?qf(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(pi);return()=>{e.setUpLocationChangeListener()}}},{provide:Zy,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?qf(2,[{provide:Zy,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(me,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const a=e.get(pi),l=e.get(pc);(function r(i){e.get(pi).events.pipe(ss(l=>l instanceof Yu||l instanceof Lg||l instanceof ay),(0,b.U)(l=>l instanceof Yu||l instanceof Lg&&(0===l.code||1===l.code)&&null),ss(l=>null!==l),Hu(1)).subscribe(()=>{i()})})(()=>{i(!0)}),a.afterPreactivation=()=>(i(!0),l.closed?ze(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const vD=new c.OlP("");class Wf{}Wf.\u0275fac=function(e){return new(e||Wf)},Wf.\u0275cmp=c.Xpm({type:Wf,selectors:[["app-homepage"]],decls:242,vars:0,consts:[[1,"nk-content"],[1,"container-fluid"],[1,"nk-content-inner"],[1,"nk-content-body"],[1,"nk-block"],[1,"row","g-gs"],[1,"col-12"],[1,"card","card-bordered"],[1,"card-inner"],[1,"card-title","mb-4"],[1,"title"],[1,"col-xxl-3"],[1,"fake-class"],[1,"nk-block-des","text-soft"],["href","#",1,"btn","btn-primary","btn-lg","mt-4"],[1,"col-sm-6","col-md-4","col-xxl-3"],[1,"link-list","is-compact","pb-0"],["href","post-add.html"],[1,"icon","ni","ni-file-text"],["href","page-add.html"],[1,"icon","ni","ni-property-add"],["href","#"],[1,"icon","ni","ni-laptop"],["href","post-list.html"],[1,"icon","ni","ni-edit-fill"],["href","page-list.html"],[1,"icon","ni","ni-files"],["href","comments.html"],[1,"icon","ni","ni-comments"],[1,"icon","ni","ni-grid-fill"],[1,"icon","ni","ni-more-h"],[1,"col-12","col-xxl-6"],[1,"card","card-bordered","h-100"],[1,"card-inner","border-bottom"],[1,"card-title-group","g-2"],[1,"card-title","card-title-sm"],["action","#"],[1,"row","g-gs","align-center"],[1,"form-group"],[1,"form-control-wrap"],["for","title",1,"form-label"],["type","text","id","title","placeholder","Title",1,"form-control"],["for","content",1,"form-label"],["id","content","placeholder","What's on your mind?!",1,"form-control","form-control-sm","no-resize"],[1,"form-group","mt-4"],["type","submit",1,"btn","btn-primary"],[1,"col-md-6","col-xxl-3"],[1,"card-inner","mb-n2"],[1,"card-title-group"],[1,"card-tools"],[1,"drodown"],["href","#","data-bs-toggle","dropdown",1,"dropdown-toggle","dropdown-indicator","btn","btn-sm","btn-outline-light","btn-white"],[1,"dropdown-menu","dropdown-menu-end","dropdown-menu-xs"],[1,"link-list-opt","no-bdr"],[1,"nk-tb-list","is-compact"],[1,"nk-tb-item","nk-tb-head"],[1,"nk-tb-col"],[1,"nk-tb-col","text-end"],[1,"nk-tb-item"],[1,"tb-sub"],[1,"tb-sub","tb-amount"],[1,"nk-activity"],[1,"nk-activity-item"],[1,"nk-activity-media","user-avatar","bg-success"],["src","../images/avatar/c-sm.jpg","alt",""],[1,"nk-activity-data"],[1,"label"],[1,"time"],[1,"nk-activity-media","user-avatar","bg-warning"],[1,"nk-activity-media","user-avatar","bg-azure"],[1,"nk-activity-media","user-avatar","bg-pink"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h3",10),c._uU(11,"Welcome to CMS Dashboard!"),c.qZA()(),c.TgZ(12,"div",5)(13,"div",11)(14,"div",12)(15,"h5",10),c._uU(16,"Get Started"),c.qZA(),c.TgZ(17,"div",13)(18,"p"),c._uU(19,"You can customize your site from here."),c.qZA()(),c.TgZ(20,"a",14),c._uU(21,"Customize Site"),c.qZA()()(),c.TgZ(22,"div",15)(23,"div",12)(24,"h5",10),c._uU(25,"Next Steps"),c.qZA(),c.TgZ(26,"ul",16)(27,"li")(28,"a",17),c._UZ(29,"em",18),c.TgZ(30,"span"),c._uU(31,"Write a blog post"),c.qZA()()(),c.TgZ(32,"li")(33,"a",19),c._UZ(34,"em",20),c.TgZ(35,"span"),c._uU(36,"Add an about page"),c.qZA()()(),c.TgZ(37,"li")(38,"a",21),c._UZ(39,"em",22),c.TgZ(40,"span"),c._uU(41,"View your site"),c.qZA()()()()()(),c.TgZ(42,"div",15)(43,"div",12)(44,"h5",10),c._uU(45,"At a Glance"),c.qZA(),c.TgZ(46,"ul",16)(47,"li")(48,"a",23),c._UZ(49,"em",24),c.TgZ(50,"span"),c._uU(51,"35 Posts"),c.qZA()()(),c.TgZ(52,"li")(53,"a",25),c._UZ(54,"em",26),c.TgZ(55,"span"),c._uU(56,"21 Pages"),c.qZA()()(),c.TgZ(57,"li")(58,"a",27),c._UZ(59,"em",28),c.TgZ(60,"span"),c._uU(61,"18 Comments"),c.qZA()()()()()(),c.TgZ(62,"div",15)(63,"div",12)(64,"h5",10),c._uU(65,"More Actions"),c.qZA(),c.TgZ(66,"ul",16)(67,"li")(68,"a",21),c._UZ(69,"em",29),c.TgZ(70,"span"),c._uU(71,"Manage widgets or menu"),c.qZA()()(),c.TgZ(72,"li")(73,"a",21),c._UZ(74,"em",28),c.TgZ(75,"span"),c._uU(76,"Trun comments off or on"),c.qZA()()(),c.TgZ(77,"li")(78,"a",21),c._UZ(79,"em",30),c.TgZ(80,"span"),c._uU(81,"More about getting started"),c.qZA()()()()()()()()()(),c.TgZ(82,"div",31)(83,"div",32)(84,"div",33)(85,"div",34)(86,"div",35)(87,"h6",10),c._uU(88,"Quick Draft"),c.qZA()()()(),c.TgZ(89,"div",8)(90,"form",36)(91,"div",37)(92,"div",6)(93,"div",38)(94,"div",39)(95,"label",40),c._uU(96,"Title"),c.qZA(),c._UZ(97,"input",41),c.qZA()()(),c.TgZ(98,"div",6)(99,"div",39)(100,"label",42),c._uU(101,"Content"),c.qZA(),c._UZ(102,"textarea",43),c.qZA(),c.TgZ(103,"div",44)(104,"button",45),c._uU(105,"Save Draft"),c.qZA()()()()()()()(),c.TgZ(106,"div",46)(107,"div",32)(108,"div",47)(109,"div",48)(110,"div",35)(111,"h6",10),c._uU(112,"Viewed pages by users"),c.qZA()(),c.TgZ(113,"div",49)(114,"div",50)(115,"a",51),c._uU(116,"30 Days"),c.qZA(),c.TgZ(117,"div",52)(118,"ul",53)(119,"li")(120,"a",21)(121,"span"),c._uU(122,"7 Days"),c.qZA()()(),c.TgZ(123,"li")(124,"a",21)(125,"span"),c._uU(126,"15 Days"),c.qZA()()(),c.TgZ(127,"li")(128,"a",21)(129,"span"),c._uU(130,"30 Days"),c.qZA()()()()()()()()(),c.TgZ(131,"div",54)(132,"div",55)(133,"div",56)(134,"span"),c._uU(135,"Page"),c.qZA()(),c.TgZ(136,"div",57)(137,"span"),c._uU(138,"Page Views"),c.qZA()()(),c.TgZ(139,"div",58)(140,"div",56)(141,"span",59)(142,"span"),c._uU(143,"/"),c.qZA()()(),c.TgZ(144,"div",57)(145,"span",60)(146,"span"),c._uU(147,"2,879"),c.qZA()()()(),c.TgZ(148,"div",58)(149,"div",56)(150,"span",59)(151,"span"),c._uU(152,"/subscription/index.html"),c.qZA()()(),c.TgZ(153,"div",57)(154,"span",60)(155,"span"),c._uU(156,"2,094"),c.qZA()()()(),c.TgZ(157,"div",58)(158,"div",56)(159,"span",59)(160,"span"),c._uU(161,"/general/index.html"),c.qZA()()(),c.TgZ(162,"div",57)(163,"span",60)(164,"span"),c._uU(165,"1,634"),c.qZA()()()(),c.TgZ(166,"div",58)(167,"div",56)(168,"span",59)(169,"span"),c._uU(170,"/crypto/index.html"),c.qZA()()(),c.TgZ(171,"div",57)(172,"span",60)(173,"span"),c._uU(174,"1,497"),c.qZA()()()(),c.TgZ(175,"div",58)(176,"div",56)(177,"span",59)(178,"span"),c._uU(179,"/invest/index.html"),c.qZA()()(),c.TgZ(180,"div",57)(181,"span",60)(182,"span"),c._uU(183,"1,349"),c.qZA()()()(),c.TgZ(184,"div",58)(185,"div",56)(186,"span",59)(187,"span"),c._uU(188,"/subscription/profile.html"),c.qZA()()(),c.TgZ(189,"div",57)(190,"span",60)(191,"span"),c._uU(192,"984"),c.qZA()()()(),c.TgZ(193,"div",58)(194,"div",56)(195,"span",59)(196,"span"),c._uU(197,"/general/index-crypto.html"),c.qZA()()(),c.TgZ(198,"div",57)(199,"span",60)(200,"span"),c._uU(201,"879"),c.qZA()()()()()()(),c.TgZ(202,"div",46)(203,"div",32)(204,"div",33)(205,"div",34)(206,"div",35)(207,"h6",10),c._uU(208,"Recent Activities"),c.qZA()()()(),c.TgZ(209,"ul",61)(210,"li",62)(211,"div",63),c._UZ(212,"img",64),c.qZA(),c.TgZ(213,"div",65)(214,"div",66),c._uU(215,"Keith Jensen posted a comment."),c.qZA(),c.TgZ(216,"span",67),c._uU(217,"2 hours ago"),c.qZA()()(),c.TgZ(218,"li",62)(219,"div",68),c._uU(220,"HS"),c.qZA(),c.TgZ(221,"div",65)(222,"div",66),c._uU(223,"Harry Simpson posted a comment."),c.qZA(),c.TgZ(224,"span",67),c._uU(225,"2 hours ago"),c.qZA()()(),c.TgZ(226,"li",62)(227,"div",69),c._uU(228,"SM"),c.qZA(),c.TgZ(229,"div",65)(230,"div",66),c._uU(231,"Stephanie edited his post."),c.qZA(),c.TgZ(232,"span",67),c._uU(233,"2 hours ago"),c.qZA()()(),c.TgZ(234,"li",62)(235,"div",70),c._uU(236,"TM"),c.qZA(),c.TgZ(237,"div",65)(238,"div",66),c._uU(239,"Timothy Moreno add a new post."),c.qZA(),c.TgZ(240,"span",67),c._uU(241,"2 hours ago"),c.qZA()()()()()()()()()()()())}});class gc{}gc.\u0275fac=function(e){return new(e||gc)},gc.\u0275cmp=c.Xpm({type:gc,selectors:[["app-pcbpage"]],decls:141,vars:0,consts:[[1,"nk-content"],[1,"container-fluid"],[1,"nk-content-inner"],[1,"nk-content-body"],[1,"nk-block"],[1,"row","g-gs"],[1,"col-12"],[1,"card","card-bordered"],[1,"card-inner"],[1,"card-title","mb-4"],[1,"title"],["action","#"],[1,"col-md-3"],[1,"form-group"],[1,"form-control-wrap"],[1,"form-label"],["type","text","name","data","id","data",1,"form-control"],[1,"custom-control-group","g-3","align-center","flex-wrap"],[1,"custom-control","custom-radio"],["type","radio","checked","","name","boltsYesNo-public","id","bolts-enable",1,"custom-control-input"],["for","bolts-enable",1,"custom-control-label"],["type","radio","name","boltsYesNo-public","id","bolts-disable",1,"custom-control-input"],["for","bolts-disable",1,"custom-control-label"],["type","radio","checked","","name","antennaYesNo-public","id","antenna-enable",1,"custom-control-input"],["for","antenna-enable",1,"custom-control-label"],["type","radio","name","antennaYesNo-public","id","antenna-disable",1,"custom-control-input"],["for","antenna-disable",1,"custom-control-label"],[1,"custom-control-group","g-3","align-center"],[1,"custom-control","custom-control-sm","custom-checkbox"],["type","checkbox","id","switch_One",1,"custom-control-input"],["for","switch_One",1,"custom-control-label"],["type","checkbox","id","switch_Two",1,"custom-control-input"],["for","switch_Two",1,"custom-control-label"],["type","checkbox","id","switch_Three",1,"custom-control-input"],["for","switch_Three",1,"custom-control-label"],["type","checkbox","id","switch_four",1,"custom-control-input"],["for","switch_four",1,"custom-control-label"],[1,"form-control-label"],["type","checkbox","id","connector-j0",1,"custom-control-input"],["for","connector-j0",1,"custom-control-label"],["type","checkbox","id","connector-ch0",1,"custom-control-input"],["for","connector-ch0",1,"custom-control-label"],["type","checkbox","id","connector-ch1",1,"custom-control-input"],["for","connector-ch1",1,"custom-control-label"],["type","radio","checked","","name","visualYesNo-public","id","visual-enable",1,"custom-control-input"],["for","visual-enable",1,"custom-control-label"],["type","radio","name","visualYesNo-public","id","visual-disable",1,"custom-control-input"],["for","visual-disable",1,"custom-control-label"],[1,"form-select"],["selected",""],["value","12AM"],["value","08AM"],["value","04AM"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h3",10),c._uU(11,"Generate New PCB"),c.qZA()(),c.TgZ(12,"form",11)(13,"div",5)(14,"div",12)(15,"div",13)(16,"div",14)(17,"label",15),c._uU(18,"FM"),c.qZA(),c._UZ(19,"input",16),c.qZA()()(),c.TgZ(20,"div",12)(21,"div",13)(22,"div",14)(23,"label",15),c._uU(24,"KIAB"),c.qZA(),c._UZ(25,"input",16),c.qZA()()(),c.TgZ(26,"div",12)(27,"div",13)(28,"div",14)(29,"label",15),c._uU(30,"KMAB"),c.qZA(),c._UZ(31,"input",16),c.qZA()()(),c.TgZ(32,"div",12)(33,"div",13)(34,"div",14)(35,"label",15),c._uU(36,"Bolts"),c.qZA(),c.TgZ(37,"ul",17)(38,"li")(39,"div",18),c._UZ(40,"input",19),c.TgZ(41,"label",20),c._uU(42,"Yes"),c.qZA()()(),c.TgZ(43,"li")(44,"div",18),c._UZ(45,"input",21),c.TgZ(46,"label",22),c._uU(47,"No"),c.qZA()()()()()()(),c.TgZ(48,"div",12)(49,"div",13)(50,"div",14)(51,"label",15),c._uU(52,"Antenna"),c.qZA(),c.TgZ(53,"ul",17)(54,"li")(55,"div",18),c._UZ(56,"input",23),c.TgZ(57,"label",24),c._uU(58,"Yes"),c.qZA()()(),c.TgZ(59,"li")(60,"div",18),c._UZ(61,"input",25),c.TgZ(62,"label",26),c._uU(63,"No"),c.qZA()()()()()()(),c.TgZ(64,"div",12)(65,"div",13)(66,"div",14)(67,"label",15),c._uU(68,"Switches"),c.qZA(),c.TgZ(69,"ul",27)(70,"li")(71,"div",28),c._UZ(72,"input",29),c.TgZ(73,"label",30),c._uU(74,"SW1"),c.qZA()()(),c.TgZ(75,"li")(76,"div",28),c._UZ(77,"input",31),c.TgZ(78,"label",32),c._uU(79,"SW2"),c.qZA()()(),c.TgZ(80,"li")(81,"div",28),c._UZ(82,"input",33),c.TgZ(83,"label",34),c._uU(84,"SW3"),c.qZA()()(),c.TgZ(85,"li")(86,"div",28),c._UZ(87,"input",35),c.TgZ(88,"label",36),c._uU(89,"SW4"),c.qZA()()()()()()(),c.TgZ(90,"div",12)(91,"div",13)(92,"div",37)(93,"label",15),c._uU(94,"Connector"),c.qZA(),c.TgZ(95,"ul",27)(96,"li")(97,"div",28),c._UZ(98,"input",38),c.TgZ(99,"label",39),c._uU(100,"J0"),c.qZA()()(),c.TgZ(101,"li")(102,"div",28),c._UZ(103,"input",40),c.TgZ(104,"label",41),c._uU(105,"CH0"),c.qZA()()(),c.TgZ(106,"li")(107,"div",28),c._UZ(108,"input",42),c.TgZ(109,"label",43),c._uU(110,"CH1"),c.qZA()()()()()()(),c.TgZ(111,"div",12)(112,"div",13)(113,"div",14)(114,"label",15),c._uU(115,"Visual Check"),c.qZA(),c.TgZ(116,"ul",17)(117,"li")(118,"div",18),c._UZ(119,"input",44),c.TgZ(120,"label",45),c._uU(121,"Yes"),c.qZA()()(),c.TgZ(122,"li")(123,"div",18),c._UZ(124,"input",46),c.TgZ(125,"label",47),c._uU(126,"No"),c.qZA()()()()()()(),c.TgZ(127,"div",12)(128,"div",13)(129,"div",14)(130,"label",15),c._uU(131,"Data Points"),c.qZA(),c.TgZ(132,"select",48)(133,"option",49),c._uU(134,"Open this select menu"),c.qZA(),c.TgZ(135,"option",50),c._uU(136,"12AM"),c.qZA(),c.TgZ(137,"option",51),c._uU(138,"08AM"),c.qZA(),c.TgZ(139,"option",52),c._uU(140,"04AM"),c.qZA()()()()()()()()()()()()()()()())}});var ED=F(552),L=F(2090),Jr=F(9681),Pi=F(1877),Is=F(4859),mc=F(4986),ln=F(2122);function Zd(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,ne.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function Gy(n,e=Gi.y){return n=n??Wy,(0,_r.e)((t,r)=>{let i,a=!0;t.subscribe((0,ne.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function Wy(n,e){return n===e}var yt,vr=F(2011),Qg=(F(9568),F(3942)),ye=F(5861),ID=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Za={},zy=zy||{},Zt=ID||self;function zf(){}function Xg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Kf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jg="closure_uid_"+(1e9*Math.random()>>>0),bD=0;function Ak(n,e,t){return n.call.apply(n.bind,arguments)}function Ky(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function gi(n,e,t){return(gi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ak:Ky).apply(null,arguments)}function em(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function el(){this.s=this.s,this.o=this.o}el.prototype.s=!1,el.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function bs(n){Object.prototype.hasOwnProperty.call(n,Jg)&&n[Jg]||(n[Jg]=++bD)}(this)},el.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Yy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function tm(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Xg(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function Ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ni.prototype.h=function(){this.defaultPrevented=!0};var TD=function(){if(!Zt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Zt.addEventListener("test",zf,e),Zt.removeEventListener("test",zf,e)}catch{}return n}();function nm(n){return/^[\s\xa0]*$/.test(n)}var aI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qy(n,e){return n<e?-1:n>e?1:0}function Ts(){var n=Zt.navigator;return n&&(n=n.userAgent)?n:""}function Js(n){return-1!=Ts().indexOf(n)}function Xy(n){return Xy[" "](n),n}Xy[" "]=zf;var _c,n,uI=Js("Opera"),jd=Js("Trident")||Js("MSIE"),lI=Js("Edge"),Jy=lI||jd,rm=Js("Gecko")&&!(-1!=Ts().toLowerCase().indexOf("webkit")&&!Js("Edge"))&&!(Js("Trident")||Js("MSIE"))&&!Js("Edge"),DD=-1!=Ts().toLowerCase().indexOf("webkit")&&!Js("Edge");function cI(){var n=Zt.document;return n?n.documentMode:void 0}e:{var Yf="",$d=(n=Ts(),rm?/rv:([^\);]+)(\)|;)/.exec(n):lI?/Edge\/([\d\.]+)/.exec(n):jd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):DD?/WebKit\/(\S+)/.exec(n):uI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if($d&&(Yf=$d?$d[1]:""),jd){var dI=cI();if(null!=dI&&dI>parseFloat(Yf)){_c=String(dI);break e}}_c=Yf}var ev={};var hI=Zt.document&&jd&&(cI()||parseInt(_c,10))||void 0;function Hd(n,e){if(Ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(rm){e:{try{Xy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:nv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Hd.X.h.call(this)}}mi(Hd,Ni);var nv={2:"touch",3:"pen",4:"mouse"};Hd.prototype.h=function(){Hd.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Cs="closure_listenable_"+(1e6*Math.random()|0),sm=0;function om(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++sm,this.ba=this.ea=!1}function tl(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function rv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iv(n){const e={};for(const t in n)e[t]=n[t];return e}const sv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fI(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<sv.length;a++)t=sv[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function am(n){this.src=n,this.g={},this.h=0}function yc(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=oI(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(tl(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function ov(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}am.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=ov(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new om(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var pI="closure_lm_"+(1e6*Math.random()|0),av={};function gI(n,e,t,r,i){if(r&&r.once)return _I(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)gI(n,e[a],t,r,i);return null}return t=dv(t),n&&n[Cs]?n.N(e,t,Kf(r)?!!r.capture:!!r,i):mI(n,e,t,!1,r,i)}function mI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Kf(i)?!!i.capture:!!i,f=cv(n);if(f||(n[pI]=f=new am(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function SD(){const e=vI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)TD||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(lv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _I(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)_I(n,e[a],t,r,i);return null}return t=dv(t),n&&n[Cs]?n.O(e,t,Kf(r)?!!r.capture:!!r,i):mI(n,e,t,!0,r,i)}function yI(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)yI(n,e[a],t,r,i);else r=Kf(r)?!!r.capture:!!r,t=dv(t),n&&n[Cs]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=ov(a=n.g[e],t,r,i))&&(tl(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=cv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=ov(e,t,r,i)),(t=-1<n?e[n]:null)&&uv(t))}function uv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Cs])yc(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(lv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cv(e))?(yc(t,n),0==t.h&&(t.src=null,e[pI]=null)):tl(n)}}}function lv(n){return n in av?av[n]:av[n]="on"+n}function vI(n,e){if(n.ba)n=!0;else{e=new Hd(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&uv(n),n=t.call(r,e)}return n}function cv(n){return(n=n[pI])instanceof am?n:null}var Qf="__closure_events_fn_"+(1e9*Math.random()>>>0);function dv(n){return"function"==typeof n?n:(n[Qf]||(n[Qf]=function(e){return n.handleEvent(e)}),n[Qf])}function ei(){el.call(this),this.i=new am(this),this.P=this,this.I=null}function _i(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ni(e,n);else if(e instanceof Ni)e.target=e.target||n;else{var i=e;fI(e=new Ni(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=um(l,r,!0,e)&&i}if(i=um(l=e.g=n,r,!0,e)&&i,i=um(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=um(l=e.g=t[a],r,!1,e)&&i}function um(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var f=l.listener,m=l.ha||l.src;l.ea&&yc(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}mi(ei,el),ei.prototype[Cs]=!0,ei.prototype.removeEventListener=function(n,e,t,r){yI(this,n,e,t,r)},ei.prototype.M=function(){if(ei.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)tl(t[r]);delete n.g[e],n.h--}}this.I=null},ei.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ei.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hv=Zt.JSON.stringify;function AD(){var n=MD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var lm,fv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new wI,n=>n.reset());class wI{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kD(n){Zt.setTimeout(()=>{throw n},0)}function RD(n,e){lm||function cm(){var n=Zt.Promise.resolve(void 0);lm=function(){n.then(Xf)}}(),ja||(lm(),ja=!0),MD.add(n,e)}var ja=!1,MD=new class xD{constructor(){this.h=this.g=null}add(e,t){const r=fv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Xf(){for(var n;n=AD();){try{n.h.call(n.g)}catch(t){kD(t)}var e=fv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ja=!1}function dm(n,e){ei.call(this),this.h=n||1,this.g=e||Zt,this.j=gi(this.lb,this),this.l=Date.now()}function pv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Jf(n,e,t){if("function"==typeof n)t&&(n=gi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Zt.setTimeout(n,e||0)}function EI(n){n.g=Jf(()=>{n.g=null,n.i&&(n.i=!1,EI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mi(dm,ei),(yt=dm.prototype).ca=!1,yt.R=null,yt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),_i(this,"tick"),this.ca&&(pv(this),this.start()))}},yt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},yt.M=function(){dm.X.M.call(this),pv(this),delete this.g};class ia extends el{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:EI(this)}M(){super.M(),this.g&&(Zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $a(n){el.call(this),this.h=n,this.g={}}mi($a,el);var yi=[];function nl(n,e,t,r){Array.isArray(t)||(t&&(yi[0]=t.toString()),t=yi);for(var i=0;i<t.length;i++){var a=gI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function ep(n){rv(n.g,function(e,t){this.g.hasOwnProperty(t)&&uv(e)},n),n.g={}}function Wi(){this.g=!0}function To(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Wd(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return hv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}$a.prototype.M=function(){$a.X.M.call(this),ep(this)},$a.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wi.prototype.Aa=function(){this.g=!1},Wi.prototype.info=function(){};var eo={},vc=null;function Ha(){return vc=vc||new ei}function wc(n){Ni.call(this,eo.Pa,n)}function sa(n){const e=Ha();_i(e,new wc(e))}function mv(n,e){Ni.call(this,eo.STAT_EVENT,n),this.stat=e}function Oi(n){const e=Ha();_i(e,new mv(e,n))}function _v(n,e){Ni.call(this,eo.Qa,n),this.size=e}function zd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Zt.setTimeout(function(){n()},e)}eo.Pa="serverreachability",mi(wc,Ni),eo.STAT_EVENT="statevent",mi(mv,Ni),eo.Qa="timingevent",mi(_v,Ni);var tp={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yv={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function hm(){}function wv(){}hm.prototype.h=null;var Iv,np={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ev(){Ni.call(this,"d")}function fm(){Ni.call(this,"c")}function rp(){}function Ec(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new $a(this),this.O=PD,this.T=new dm(n=Jy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new pm}function pm(){this.i=null,this.g="",this.h=!1}mi(Ev,Ni),mi(fm,Ni),mi(rp,hm),rp.prototype.g=function(){return new XMLHttpRequest},rp.prototype.i=function(){return{}},Iv=new rp;var PD=45e3,Kd={},Ic={};function ip(n,e,t){n.K=1,n.v=op(Ga(e)),n.s=t,n.P=!0,II(n,null)}function II(n,e){n.F=Date.now(),Yd(n),n.A=Ga(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),bm(t.i,"t",r),n.C=0,t=n.l.H,n.h=new pm,n.g=Hv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ia(gi(n.La,n,n.g),n.N)),nl(n.S,n.g,"readystatechange",n.ib),e=n.H?iv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),sa(),function gv(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var C=v[0];v=v[1];var A=C.split("_");l=2<=A.length&&"type"==A[1]?l+(C+"=")+v+"&":l+(C+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function gm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function mm(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=bI(n,t),i==Ic){4==e&&(n.o=4,Oi(14),r=!1),To(n.j,n.m,null,"[Incomplete Response]");break}if(i==Kd){n.o=4,Oi(15),To(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}To(n.j,n.m,i,null),ym(n,i)}gm(n)&&i!=Ic&&i!=Kd&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ih(e),e.K=!0,Oi(11))):(To(n.j,n.m,t,"[Invalid Chunked Response]"),qa(n),Qd(n))}function bI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ic:(t=Number(e.substring(t,r)),isNaN(t)?Kd:(r+=1)+t>e.length?Ic:(e=e.substr(r,t),n.C=r+t,e))}function Yd(n){n.V=Date.now()+n.O,_m(n,n.O)}function _m(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=zd(gi(n.gb,n),e)}function sp(n){n.B&&(Zt.clearTimeout(n.B),n.B=null)}function Qd(n){0==n.l.G||n.I||Bv(n.l,n)}function qa(n){sp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,pv(n.T),ep(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ym(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Av(t.h,n)))if(!n.J&&Av(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;mp(t),dp(t)}gp(t),Oi(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=zd(gi(t.cb,t),6e3));if(1>=Sv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ol(t,11)}else if((n.J||t.g==n)&&mp(t),!nm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.T=v[0],v=v[1],2==t.G)if("c"==v[0]){t.I=v[1],t.ka=v[2];const C=v[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const A=v[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const j=n.g;if(j){const z=j.g?j.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.h;a.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(wr(a,a.h),a.h=null))}if(r.D){const ge=j.g?j.g.getResponseHeader("X-HTTP-Session-Id"):null;ge&&(r.za=ge,Fn(r.F,r.D,ge))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=$v(r,r.H?r.ka:null,r.V),l.J){xv(r.h,l);var f=l,m=r.J;m&&f.setTimeout(m),f.B&&(sp(f),Yd(f)),r.g=l}else Uv(r);0<t.i.length&&hp(t)}else"stop"!=v[0]&&"close"!=v[0]||ol(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?ol(t,7):Lv(t):"noop"!=v[0]&&t.l&&t.l.wa(v),t.A=0)}sa()}catch{}}function bv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Xg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function TI(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function ND(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Xg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(yt=Ec.prototype).setTimeout=function(n){this.O=n},yt.ib=function(n){n=n.target;const e=this.L;e&&3==Wa(n)?e.l():this.La(n)},yt.La=function(n){try{if(n==this.g)e:{const C=Wa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Jy||this.g&&(this.h.h||this.g.fa()||MI(this.g)))){this.I||4!=C||7==e||sa(),sp(this);var t=this.g.aa();this.Y=t;t:if(gm(this)){var r=MI(this.g);n="";var i=r.length,a=4==Wa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qa(this),Qd(this);var l="";break t}this.h.i=new Zt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function qd(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!nm(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Oi(12),qa(this),Qd(this);break e}To(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ym(this,t)}this.P?(mm(this,C,l),Jy&&this.i&&3==C&&(nl(this.S,this.T,"tick",this.hb),this.T.start())):(To(this.j,this.m,l,null),ym(this,l)),4==C&&qa(this),this.i&&!this.I&&(4==C?Bv(this.l,this):(this.i=!1,Yd(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),qa(this),Qd(this)}}}catch{}},yt.hb=function(){if(this.g){var n=Wa(this.g),e=this.g.fa();this.C<e.length&&(sp(this),mm(this,n,e),this.i&&4!=n&&Yd(this))}},yt.cancel=function(){this.I=!0,qa(this)},yt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Gd(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sa(),Oi(17)),qa(this),this.o=2,Qd(this)):_m(this,this.V-n)};var Tv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof bc){this.h=void 0!==e?e:n.h,vm(this,n.j),this.s=n.s,this.g=n.g,Xd(this,n.m),this.l=n.l,e=n.i;var t=new ap;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),wm(this,t),this.o=n.o}else n&&(t=String(n).match(Tv))?(this.h=!!e,vm(this,t[1]||"",!0),this.s=Jd(t[2]||""),this.g=Jd(t[3]||"",!0),Xd(this,t[4]),this.l=Jd(t[5]||"",!0),wm(this,t[6]||"",!0),this.o=Jd(t[7]||"")):(this.h=!!e,this.i=new ap(null,this.h))}function Ga(n){return new bc(n)}function vm(n,e,t){n.j=t?Jd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Xd(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function wm(n,e,t){e instanceof ap?(n.i=e,function Dv(n,e){e&&!n.j&&(il(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Im(this,r),bm(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=eh(e,Em)),n.i=new ap(e,n.h))}function Fn(n,e,t){n.i.set(e,t)}function op(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,CI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function CI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}bc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eh(e,Cv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eh(e,Cv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(eh(t,"/"==t.charAt(0)?SI:DI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eh(t,rl)),n.join("")};var Cv=/[#\/\?@]/g,DI=/[#\?:]/g,SI=/[#\?]/g,Em=/[#\?@]/g,rl=/#/g;function ap(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function il(n){n.g||(n.g=new Map,n.h=0,n.i&&function OD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Im(n,e){il(n),e=th(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function sl(n,e){return il(n),e=th(n,e),n.g.has(e)}function bm(n,e,t){Im(n,e),0<t.length&&(n.i=null,n.g.set(th(n,e),Yy(t)),n.h+=t.length)}function th(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function LD(n){this.l=n||FD,n=Zt.PerformanceNavigationTiming?0<(n=Zt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Zt.g&&Zt.g.Ga&&Zt.g.Ga()&&Zt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(yt=ap.prototype).add=function(n,e){il(this),this.i=null,n=th(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},yt.forEach=function(n,e){il(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},yt.oa=function(){il(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},yt.W=function(n){il(this);let e=[];if("string"==typeof n)sl(this,n)&&(e=e.concat(this.g.get(th(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},yt.set=function(n,e){return il(this),this.i=null,sl(this,n=th(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},yt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},yt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var FD=10;function AI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Sv(n){return n.h?1:n.g?n.g.size:0}function Av(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function wr(n,e){n.g?n.g.add(e):n.h=e}function xv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function xI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yy(n.i)}function kv(){}function kI(){this.g=new kv}function UD(n,e,t){const r=t||"";try{bv(n,function(i,a){let l=i;Kf(i)&&(l=hv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function up(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function oa(n){this.l=n.ac||null,this.j=n.jb||!1}function Tm(n,e){ei.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Rv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}LD.prototype.cancel=function(){if(this.i=xI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},kv.prototype.stringify=function(n){return Zt.JSON.stringify(n,void 0)},kv.prototype.parse=function(n){return Zt.JSON.parse(n,void 0)},mi(oa,hm),oa.prototype.g=function(){return new Tm(this.l,this.j)},oa.prototype.i=function(n){return function(){return n}}({}),mi(Tm,ei);var Rv=0;function Mv(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function lp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,nh(n)}function nh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(yt=Tm.prototype).open=function(n,e){if(this.readyState!=Rv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,nh(this)},yt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Zt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},yt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lp(this)),this.readyState=Rv},yt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,nh(this)),this.g&&(this.readyState=3,nh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Zt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mv(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},yt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?lp(this):nh(this),3==this.readyState&&Mv(this)}},yt.Va=function(n){this.g&&(this.response=this.responseText=n,lp(this))},yt.Ua=function(n){this.g&&(this.response=n,lp(this))},yt.ga=function(){this.g&&lp(this)},yt.setRequestHeader=function(n,e){this.v.append(n,e)},yt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},yt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Tm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Rk=Zt.JSON.parse;function Xn(n){ei.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Pv,this.K=this.L=!1}mi(Xn,ei);var Pv="",aa=/^https?$/i,VD=["POST","PUT"];function Co(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,to(n),cp(n)}function to(n){n.D||(n.D=!0,_i(n,"complete"),_i(n,"error"))}function no(n){if(n.h&&typeof zy<"u"&&(!n.C[1]||4!=Wa(n)||2!=n.aa()))if(n.v&&4==Wa(n))Jf(n.Ha,0,n);else if(_i(n,"readystatechange"),4==Wa(n)){n.h=!1;try{const f=n.aa();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(Tv)[1]||null;if(!i&&Zt.self&&Zt.self.location){var a=Zt.self.location.protocol;i=a.substr(0,a.length-1)}r=!aa.test(i?i.toLowerCase():"")}t=r}if(t)_i(n,"complete"),_i(n,"success");else{n.m=6;try{var l=2<Wa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",to(n)}}finally{cp(n)}}}function cp(n,e){if(n.g){Nv(n);const t=n.g,r=n.C[0]?zf:null;n.g=null,n.C=null,e||_i(n,"ready");try{t.onreadystatechange=r}catch{}}}function Nv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Zt.clearTimeout(n.A),n.A=null)}function Wa(n){return n.g?n.g.readyState:0}function MI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Pv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function PI(n){let e="";return rv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Ov(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=PI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function Tc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function rh(n){this.Ca=0,this.i=[],this.j=new Wi,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Tc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Tc("baseRetryDelayMs",5e3,n),this.bb=Tc("retryDelaySeedMs",1e4,n),this.$a=Tc("forwardChannelMaxRetries",2,n),this.ta=Tc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new LD(n&&n.concurrentRequestLimit),this.Fa=new kI,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Lv(n){if(NI(n),3==n.G){var e=n.U++,t=Ga(n.F);Fn(t,"SID",n.I),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),pp(n,t),(e=new Ec(n,n.j,e,void 0)).K=2,e.v=op(Ga(t)),t=!1,Zt.navigator&&Zt.navigator.sendBeacon&&(t=Zt.navigator.sendBeacon(e.v.toString(),"")),!t&&Zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Hv(e.l,null),e.g.da(e.v)),e.F=Date.now(),Yd(e)}jv(n)}function dp(n){n.g&&(ih(n),n.g.cancel(),n.g=null)}function NI(n){dp(n),n.u&&(Zt.clearTimeout(n.u),n.u=null),mp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Zt.clearTimeout(n.m),n.m=null)}function hp(n){AI(n.h)||n.m||(n.m=!0,RD(n.Ja,n),n.C=0)}function fp(n,e){var t;t=e?e.m:n.U++;const r=Ga(n.F);Fn(r,"SID",n.I),Fn(r,"RID",t),Fn(r,"AID",n.T),pp(n,r),n.o&&n.s&&Ov(r,n.o,n.s),t=new Ec(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Fv(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),wr(n.h,t),ip(t,r,e)}function pp(n,e){n.ia&&rv(n.ia,function(t,r){Fn(e,r,t)}),n.l&&bv({},function(t,r){Fn(e,r,t)})}function Fv(n,e,t){t=Math.min(n.i.length,t);var r=n.l?gi(n.l.Ra,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const C=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{UD(C,l,"req"+v+"_")}catch{r&&r(C)}}if(f){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Uv(n){n.g||n.u||(n.Z=1,RD(n.Ia,n),n.A=0)}function gp(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=zd(gi(n.Ia,n),Zv(n,n.A)),n.A++,0))}function ih(n){null!=n.B&&(Zt.clearTimeout(n.B),n.B=null)}function Vv(n){n.g=new Ec(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ga(n.sa);Fn(e,"RID","rpc"),Fn(e,"SID",n.I),Fn(e,"CI",n.L?"0":"1"),Fn(e,"AID",n.T),Fn(e,"TYPE","xmlhttp"),pp(n,e),n.o&&n.s&&Ov(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=op(Ga(e)),t.s=null,t.P=!0,II(t,n)}function mp(n){null!=n.v&&(Zt.clearTimeout(n.v),n.v=null)}function Bv(n,e){var t=null;if(n.g==e){mp(n),ih(n),n.g=null;var r=2}else{if(!Av(n.h,e))return;t=e.D,xv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;_i(r=Ha(),new _v(r,t)),hp(n)}else Uv(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function OI(n,e){return!(Sv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=zd(gi(n.Ja,n,e),Zv(n,n.C)),n.C++,0)))}(n,e)||2==r&&gp(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function Zv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ol(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=gi(n.kb,n);t||(t=new bc("//www.google.com/images/cleardot.gif"),Zt.location&&"http"==Zt.location.protocol||vm(t,"https"),op(t)),function RI(n,e){const t=new Wi;if(Zt.Image){const r=new Image;r.onload=em(up,t,r,"TestLoadImage: loaded",!0,e),r.onerror=em(up,t,r,"TestLoadImage: error",!1,e),r.onabort=em(up,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=em(up,t,r,"TestLoadImage: timeout",!1,e),Zt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.l&&n.l.va(e),jv(n),NI(n)}function jv(n){if(n.G=0,n.la=[],n.l){const e=xI(n.h);(0!=e.length||0!=n.i.length)&&(tm(n.la,e),tm(n.la,n.i),n.h.i.length=0,Yy(n.i),n.i.length=0),n.l.ua()}}function $v(n,e,t){var r=t instanceof bc?Ga(t):new bc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),Xd(r,r.m);else{var i=Zt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new bc(null,void 0);r&&vm(a,r),e&&(a.g=e),i&&Xd(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&Fn(r,t,e),Fn(r,"VER",n.ma),pp(n,r),r}function Hv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Xn(t&&n.Da&&!n.ra?new oa({jb:!0}):n.ra)).Ka(n.H),e}function LI(){}function Cm(){if(jd&&!(10<=Number(hI)))throw Error("Environmental error: no available transport.")}function Ds(n,e){ei.call(this),this.g=new rh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!nm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!nm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sh(this)}function FI(n){Ev.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function UI(){fm.call(this),this.status=1}function sh(n){this.g=n}(yt=Xn.prototype).Ka=function(n){this.L=n},yt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Iv.g(),this.C=function vv(n){return n.h||(n.h=n.i())}(this.u?this.u:Iv),this.g.onreadystatechange=gi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Co(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Zt.FormData&&n instanceof Zt.FormData,!(0<=oI(VD,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Nv(this),0<this.B&&((this.K=function BD(n){return jd&&function xk(){return function CD(n){var e=ev;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=aI(String(_c)).split("."),t=aI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Qy(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Qy(0==i[2].length,0==a[2].length)||Qy(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gi(this.qa,this)):this.A=Jf(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Co(this,a)}},yt.qa=function(){typeof zy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_i(this,"timeout"),this.abort(8))},yt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,_i(this,"complete"),_i(this,"abort"),cp(this))},yt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cp(this,!0)),Xn.X.M.call(this)},yt.Ha=function(){this.s||(this.F||this.v||this.l?no(this):this.fb())},yt.fb=function(){no(this)},yt.aa=function(){try{return 2<Wa(this)?this.g.status:-1}catch{return-1}},yt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},yt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Rk(e)}},yt.Ea=function(){return this.m},yt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(yt=rh.prototype).ma=8,yt.G=1,yt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ec(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=iv(a),fI(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Fv(this,i,e),Fn(t=Ga(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),pp(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(PI(a)))+"&"+e:this.o&&Ov(t,this.o,a)),wr(this.h,i),this.Ya&&Fn(t,"TYPE","init"),this.O?(Fn(t,"$req",e),Fn(t,"SID","null"),i.Z=!0,ip(i,t,null)):ip(i,t,e),this.G=2}}else 3==this.G&&(n?fp(this,n):0==this.i.length||AI(this.h)||fp(this))},yt.Ia=function(){if(this.u=null,Vv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=zd(gi(this.eb,this),n)}},yt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Oi(10),dp(this),Vv(this))},yt.cb=function(){null!=this.v&&(this.v=null,dp(this),gp(this),Oi(19))},yt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Oi(2)):(this.j.info("Failed to ping google.com"),Oi(1))},(yt=LI.prototype).xa=function(){},yt.wa=function(){},yt.va=function(){},yt.ua=function(){},yt.Ra=function(){},Cm.prototype.g=function(n,e){return new Ds(n,e)},mi(Ds,ei),Ds.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Oi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=$v(n,null,n.V),hp(n)},Ds.prototype.close=function(){Lv(this.g)},Ds.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=hv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&hp(e)},Ds.prototype.M=function(){this.g.l=null,delete this.j,Lv(this.g),delete this.g,Ds.X.M.call(this)},mi(FI,Ev),mi(UI,fm),mi(sh,LI),sh.prototype.xa=function(){_i(this.g,"a")},sh.prototype.wa=function(n){_i(this.g,new FI(n))},sh.prototype.va=function(n){_i(this.g,new UI)},sh.prototype.ua=function(){_i(this.g,"b")},Cm.prototype.createWebChannel=Cm.prototype.g,Ds.prototype.send=Ds.prototype.u,Ds.prototype.open=Ds.prototype.m,Ds.prototype.close=Ds.prototype.close,tp.NO_ERROR=0,tp.TIMEOUT=8,tp.HTTP_ERROR=6,yv.COMPLETE="complete",wv.EventType=np,np.OPEN="a",np.CLOSE="b",np.ERROR="c",np.MESSAGE="d",ei.prototype.listen=ei.prototype.N,Xn.prototype.listenOnce=Xn.prototype.O,Xn.prototype.getLastError=Xn.prototype.Oa,Xn.prototype.getLastErrorCode=Xn.prototype.Ea,Xn.prototype.getStatus=Xn.prototype.aa,Xn.prototype.getResponseJson=Xn.prototype.Sa,Xn.prototype.getResponseText=Xn.prototype.fa,Xn.prototype.send=Xn.prototype.da,Xn.prototype.setWithCredentials=Xn.prototype.Ka;var ZD=Za.createWebChannelTransport=function(){return new Cm},jD=Za.getStatEventTarget=function(){return Ha()},qv=Za.ErrorCode=tp,$D=Za.EventType=yv,HD=Za.Event=eo,VI=Za.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},qD=Za.FetchXmlHttpFactory=oa,Dm=Za.WebChannel=wv,GD=Za.XhrIo=Xn;const BI="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let oh="9.15.0";const za=new Pi.Yd("@firebase/firestore");function Sm(){return za.logLevel}function Ze(n,...e){if(za.logLevel<=Pi.in.DEBUG){const t=e.map(Am);za.debug(`Firestore (${oh}): ${n}`,...t)}}function sr(n,...e){if(za.logLevel<=Pi.in.ERROR){const t=e.map(Am);za.error(`Firestore (${oh}): ${n}`,...t)}}function al(n,...e){if(za.logLevel<=Pi.in.WARN){const t=e.map(Am);za.warn(`Firestore (${oh}): ${n}`,...t)}}function Am(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${oh}) INTERNAL ASSERTION FAILED: `+n;throw sr(e),new Error(e)}function gt(n,e){n||rt()}function Ke(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class $r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cc{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class Gv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Pk{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new $r,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,ye.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new $r)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new Cc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new ti(e)}}class $I{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(gt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class HI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new $I(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dt{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Ze("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.A=t.token,new WD(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function zD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class qI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=zD(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function ah(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function _p(n){return n+"\0"}class Sn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sn.fromMillis(Date.now())}static fromDate(e){return Sn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ye(e)}static min(){return new Ye(new Sn(0,0))}static max(){return new Ye(new Sn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class xm{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===xm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends xm{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const GI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends xm{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return GI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ne(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ne(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ne(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(an.fromString(e))}static fromName(e){return new We(an.fromString(e).popFirst(5))}static empty(){return new We(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new an(e.slice()))}}class yp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function km(n){return n.fields.find(e=>2===e.kind)}function ul(n){return n.fields.filter(e=>2!==e.kind)}yp.UNKNOWN_ID=-1;class Rm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ka{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ka(0,Ss.min())}}function WI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ye.fromTimestamp(1e9===r?new Sn(t+1,0):new Sn(t,r));return new Ss(i,We.empty(),e)}function zI(n){return new Ss(n.readTime,n.key,-1)}class Ss{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ss(Ye.min(),We.empty(),-1)}static max(){return new Ss(Ye.max(),We.empty(),-1)}}function uh(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}const Wv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ya(n){return Kv.apply(this,arguments)}function Kv(){return Kv=(0,ye.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==Wv)throw n;Ze("LocalStore","Unexpectedly lost primary lease")}),Kv.apply(this,arguments)}class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):le.reject(t)}static resolve(e){return new le((t,r)=>{t(e)})}static reject(e){return new le((t,r)=>{r(e)})}static waitFor(e){return new le((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next(i=>i?le.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new le((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(C=>{l[v]=C,++f,f===a&&r(l)},C=>i(C))}})}static doWhile(e,t){return new le((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class ll{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new $r,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new vp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=Mm(r.target.error);this.P.reject(new vp(e,i))}}static open(e,t,r,i){try{return new ll(t,e.transaction(i,r))}catch(a){throw new vp(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KI(t)}}class Do{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Do.D((0,L.z$)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ze("SimpleDb","Removing database:",e),cl(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(Do.N())return!0;const e=(0,L.z$)(),t=Do.D(e),r=0<t&&t<10,i=Do.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new vp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ne(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ne(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new vp(e,f))},a.onupgradeneeded=l=>{Ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ye.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.F(e);const m=ll.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(C=>(m.V(),C)).catch(C=>(m.abort(C),le.reject(C))).toPromise();return v.catch(()=>{}),yield m.v,v}catch(m){const v=m,C="FirebaseError"!==v.name&&f<3;if(Ze("SimpleDb","Transaction failed with error:",v.message,"Retrying:",C),a.close(),!C)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class QD{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return cl(this.q.delete())}}class vp extends Ne{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Qa(n){return"IndexedDbTransactionError"===n.name}class KI{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),cl(r)}add(e){return Ze("SimpleDb","ADD",this.store.name,e,e),cl(this.store.add(e))}get(e){return cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ze("SimpleDb","DELETE",this.store.name,e),cl(this.store.delete(e))}count(){return Ze("SimpleDb","COUNT",this.store.name),cl(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new le((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new le((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,f)=>f.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new le((r,i)=>{t.onerror=a=>{const l=Mm(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}H(e,t){const r=[];return new le((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new QD(f),v=t(f.primaryKey,f.value,m);if(v instanceof le){const C=v.catch(A=>(m.done(),le.reject(A)));r.push(C)}m.isDone?i():null===m.G?f.continue():f.continue(m.G)}}).next(()=>le.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cl(n){return new le((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Mm(r.target.error);t(i)}})}let YI=!1;function Mm(n){const e=Do.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return YI||(YI=!0,setTimeout(()=>{throw r},0)),r}}return n}class XD{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Ze("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Qa(r)?Ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ya(r)}yield t.nt(6e4)}))}}class JD{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return le.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ze("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(f=>(Ze("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=zI(a);uh(l,r)>0&&(r=l)}),new Ss(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ro=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>r.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class Ok{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class Dc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Dc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}function eS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function lh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ch(n){return null==n}function dl(n){return 0===n&&1/n==-1/0}function QI(n){return"number"==typeof n&&Number.isInteger(n)&&!dl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Or(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const wp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(n){if(gt(!!n),"string"==typeof n){let e=0;const t=wp.exec(n);if(gt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Sc(n){return"string"==typeof n?Or.fromBase64String(n):Or.fromUint8Array(n)}function Yv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function XI(n){const e=n.mapValue.fields.__previous_value__;return Yv(e)?XI(e):e}function dh(n){const e=hl(n.mapValue.fields.__local_write_time__.timestampValue);return new Sn(e.seconds,e.nanos)}const fl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pm={nullValue:"NULL_VALUE"};function So(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yv(n)?4:JI(n)?9007199254740991:10:rt()}function ua(n,e){if(n===e)return!0;const t=So(n);if(t!==So(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dh(n).isEqual(dh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=hl(r.timestampValue),l=hl(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Sc(n.bytesValue).isEqual(Sc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ar(r.geoPointValue.latitude)===ar(i.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ar(r.integerValue)===ar(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=ar(r.doubleValue),l=ar(i.doubleValue);return a===l?dl(a)===dl(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return ah(n.arrayValue.values||[],e.arrayValue.values||[],ua);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(eS(a)!==eS(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!ua(a[f],l[f])))return!1;return!0}(n,e);default:return rt()}var i}function hh(n,e){return void 0!==(n.values||[]).find(t=>ua(t,e))}function pl(n,e){if(n===e)return 0;const t=So(n),r=So(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=ar(i.integerValue||i.doubleValue),f=ar(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return Qv(n.timestampValue,e.timestampValue);case 4:return Qv(dh(n),dh(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Sc(i),f=Sc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Mt(l[m],f[m]);if(0!==v)return v}return Mt(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Mt(ar(i.latitude),ar(a.latitude));return 0!==l?l:Mt(ar(i.longitude),ar(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=pl(l[m],f[m]);if(v)return v}return Mt(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===fl.mapValue&&a===fl.mapValue)return 0;if(i===fl.mapValue)return 1;if(a===fl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let C=0;C<f.length&&C<v.length;++C){const A=Mt(f[C],v[C]);if(0!==A)return A;const P=pl(l[f[C]],m[v[C]]);if(0!==P)return P}return Mt(f.length,v.length)}(n.mapValue,e.mapValue);default:throw rt()}}function Qv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=hl(n),r=hl(e),i=Mt(t.seconds,r.seconds);return 0!==i?i:Mt(t.nanos,r.nanos)}function fh(n){return Nm(n)}function Nm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=hl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Sc(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Nm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Nm(r.fields[f])}`;return a+"}"}(n.mapValue):rt();var e}function Ac(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ep(n){return!!n&&"integerValue"in n}function Ip(n){return!!n&&"arrayValue"in n}function Xv(n){return!!n&&"nullValue"in n}function Jv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Om(n){return!!n&&"mapValue"in n}function bp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return lh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function JI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function e0(n){return"nullValue"in n?Pm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ac(Dc.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function rS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ac(Dc.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?fl:rt()}function t0(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eb(n,e){const t=pl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class gl{constructor(e,t){this.position=e,this.inclusive=t}}function tb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):pl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ua(n.position[t],e.position[t]))return!1;return!0}class rb{}class sn extends rb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new iS(e,t,r):"array-contains"===t?new u0(e,r):"in"===t?new ub(e,r):"not-in"===t?new sS(e,r):"array-contains-any"===t?new l0(e,r):new sn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new s0(e,r):new o0(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(pl(t,this.value)):null!==t&&So(this.value)===So(t)&&this.matchesComparison(pl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends rb{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new En(e,t)}matches(e){return ph(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ph(n){return"and"===n.op}function Lm(n){return"or"===n.op}function n0(n){return ib(n)&&ph(n)}function ib(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function sb(n){if(n instanceof sn)return n.field.canonicalString()+n.op.toString()+fh(n.value);{const e=n.filters.map(t=>sb(t)).join(",");return`${n.op}(${e})`}}function r0(n,e){return n instanceof sn?(t=n,(r=e)instanceof sn&&t.op===r.op&&t.field.isEqual(r.field)&&ua(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&r0(a,r.filters[l]),!0)}(n,e):void rt();var t,r}function ob(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function ab(n){return n instanceof sn?`${(e=n).field.canonicalString()} ${e.op} ${fh(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(ab).join(" ,")+"}"}(n):"Filter";var e}class iS extends sn{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.matchesComparison(t)}}class s0 extends sn{constructor(e,t){super(e,"in",t),this.keys=a0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class o0 extends sn{constructor(e,t){super(e,"not-in",t),this.keys=a0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function a0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class u0 extends sn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ip(t)&&hh(t.arrayValue,this.value)}}class ub extends sn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&hh(this.value.arrayValue,t)}}class sS extends sn{constructor(e,t){super(e,"not-in",t)}matches(e){if(hh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!hh(this.value.arrayValue,t)}}class l0 extends sn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ip(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>hh(this.value.arrayValue,r))}}class gh{constructor(e,t="asc"){this.field=e,this.dir=t}}function oS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class An{constructor(e,t){this.comparator=e,this.root=t||vi.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vi.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tp(this.root,e,this.comparator,!0)}}class Tp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??vi.RED,this.left=i??vi.EMPTY,this.right=a??vi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new vi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return vi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}vi.EMPTY=null,vi.RED=!0,vi.BLACK=!1,vi.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new vi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class xn{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new c0(this.data.getIterator())}getIteratorFrom(e){return new c0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new xn(this.comparator);return t.data=e,t}}class c0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ml(n){return n.hasNext()?n.getNext():void 0}class As{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new As([])}unionWith(e){let t=new xn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new As(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ah(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Om(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bp(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=bp(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Om(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ua(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Om(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){lh(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Hr(bp(this.value))}}function lb(n){const e=[];return lh(n.fields,(t,r)=>{const i=new or([t]);if(Om(r)){const a=lb(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new As(e)}class Pn{constructor(e,t,r,i,a,l,f){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=f}static newInvalidDocument(e){return new Pn(e,0,Ye.min(),Ye.min(),Ye.min(),Hr.empty(),0)}static newFoundDocument(e,t,r,i){return new Pn(e,1,t,Ye.min(),r,i,0)}static newNoDocument(e,t){return new Pn(e,2,t,Ye.min(),Ye.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,Ye.min(),Ye.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class d0{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ft=null}}function Fm(n,e=null,t=[],r=[],i=null,a=null,l=null){return new d0(n,e,t,r,i,a,l)}function _l(n){const e=Ke(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>sb(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),ch(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fh(r)).join(",")),e.ft=t}return e.ft}function mh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!r0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nb(n.startAt,e.startAt)&&nb(n.endAt,e.endAt)}function Cp(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Um(n,e){return n.filters.filter(t=>t instanceof sn&&t.field.isEqual(e))}function cb(n,e,t){let r=Pm,i=!0;for(const a of Um(n,e)){let l=Pm,f=!0;switch(a.op){case"<":case"<=":l=e0(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=Pm}t0({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];t0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function db(n,e,t){let r=fl,i=!0;for(const a of Um(n,e)){let l=fl,f=!0;switch(a.op){case">=":case">":l=rS(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=fl}eb({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];eb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Xa{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.dt=null,this._t=null}}function h0(n,e,t,r,i,a,l,f){return new Xa(n,e,t,r,i,a,l,f)}function Dp(n){return new Xa(n)}function f0(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function p0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Vm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function hb(n){return null!==n.collectionGroup}function xc(n){const e=Ke(n);if(null===e.dt){e.dt=[];const t=Vm(e),r=p0(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new gh(t)),e.dt.push(new gh(or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.dt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new gh(or.keyField(),a))}}}return e.dt}function zi(n){const e=Ke(n);if(!e._t)if("F"===e.limitType)e._t=Fm(e.path,e.collectionGroup,xc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of xc(e))t.push(new gh(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new gl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new gl(e.startAt.position,e.startAt.inclusive):null;e._t=Fm(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function g0(n,e){e.getFirstInequalityField(),Vm(n);const t=n.filters.concat([e]);return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Bm(n,e,t){return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Sp(n,e){return mh(zi(n),zi(e))&&n.limitType===e.limitType}function fb(n){return`${_l(zi(n))}|lt:${n.limitType}`}function m0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>ab(r)).join(", ")}]`),ch(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fh(r)).join(",")),`Target(${t})`}(zi(n))}; limitType=${n.limitType})`}function _0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of xc(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=tb(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,xc(t),r)||t.endAt&&!function(i,a,l){const f=tb(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,xc(t),r)));var t,r}function pb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gb(n){return(e,t)=>{let r=!1;for(const i of xc(n)){const a=aS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function aS(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?pl(f,m):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function mb(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dl(e)?"-0":e}}function _h(n){return{integerValue:""+n}}function y0(n,e){return QI(e)?_h(e):mb(n,e)}class Ap{constructor(){this._=void 0}}function _b(n,e,t){return n instanceof yh?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof kc?uS(n,e):n instanceof Rc?vb(n,e):function(r,i){const a=v0(r,i),l=wb(a)+wb(r.gt);return Ep(a)&&Ep(r.gt)?_h(l):mb(r.yt,l)}(n,e)}function yb(n,e,t){return n instanceof kc?uS(n,e):n instanceof Rc?vb(n,e):t}function v0(n,e){return n instanceof vh?Ep(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class yh extends Ap{}class kc extends Ap{constructor(e){super(),this.elements=e}}function uS(n,e){const t=Eb(e);for(const r of n.elements)t.some(i=>ua(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rc extends Ap{constructor(e){super(),this.elements=e}}function vb(n,e){let t=Eb(e);for(const r of n.elements)t=t.filter(i=>!ua(i,r));return{arrayValue:{values:t}}}class vh extends Ap{constructor(e,t){super(),this.yt=e,this.gt=t}}function wb(n){return ar(n.integerValue||n.doubleValue)}function Eb(n){return Ip(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ja{constructor(e,t){this.field=e,this.transform=t}}class w0{constructor(e,t){this.version=e,this.transformResults=t}}class hn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hn}static exists(e){return new hn(void 0,e)}static updateTime(e){return new hn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wh{}function Eh(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yl(n.key,hn.none()):new eu(n.key,n.data,hn.none());{const t=n.data,r=Hr.empty();let i=new xn(or.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new tu(n.key,r,new As(i.toArray()),hn.none())}}function cS(n,e,t){n instanceof eu?function(r,i,a){const l=r.value.clone(),f=E0(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof tu?function(r,i,a){if(!Zm(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=E0(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(Ib(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xp(n,e,t,r){return n instanceof eu?function(i,a,l,f){if(!Zm(i.precondition,a))return l;const m=i.value.clone(),v=I0(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof tu?function(i,a,l,f){if(!Zm(i.precondition,a))return l;const m=I0(i.fieldTransforms,f,a),v=a.data;return v.setAll(Ib(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,Zm(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function dS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=v0(r.transform,i||null);null!=a&&(null===t&&(t=Hr.empty()),t.set(r.field,a))}return t||null}function kp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ah(t,r,(i,a)=>function lS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof kc&&r instanceof kc||t instanceof Rc&&r instanceof Rc?ah(t.elements,r.elements,ua):t instanceof vh&&r instanceof vh?ua(t.gt,r.gt):t instanceof yh&&r instanceof yh);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class eu extends wh{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class tu extends wh{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Ib(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function E0(n,e,t){const r=new Map;gt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,yb(l,f,t[i]))}return r}function I0(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,_b(a,l,e))}return r}class yl extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class jm extends wh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class b0{constructor(e){this.count=e}}var ur,un;function $m(n){switch(n){default:return rt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function Hm(n){if(void 0===n)return sr("GRPC error has no .code"),he.UNKNOWN;switch(n){case ur.OK:return he.OK;case ur.CANCELLED:return he.CANCELLED;case ur.UNKNOWN:return he.UNKNOWN;case ur.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case ur.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case ur.INTERNAL:return he.INTERNAL;case ur.UNAVAILABLE:return he.UNAVAILABLE;case ur.UNAUTHENTICATED:return he.UNAUTHENTICATED;case ur.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case ur.NOT_FOUND:return he.NOT_FOUND;case ur.ALREADY_EXISTS:return he.ALREADY_EXISTS;case ur.PERMISSION_DENIED:return he.PERMISSION_DENIED;case ur.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case ur.ABORTED:return he.ABORTED;case ur.OUT_OF_RANGE:return he.OUT_OF_RANGE;case ur.UNIMPLEMENTED:return he.UNIMPLEMENTED;case ur.DATA_LOSS:return he.DATA_LOSS;default:return rt()}}(un=ur||(ur={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class vl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){lh(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return tS(this.inner)}size(){return this.innerSize}}const hS=new An(We.comparator);function as(){return hS}const bb=new An(We.comparator);function Ih(...n){let e=bb;for(const t of n)e=e.insert(t.key,t);return e}function qm(n){let e=bb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ao(){return bh()}function Tb(){return bh()}function bh(){return new vl(n=>n.toString(),(n,e)=>n.isEqual(e))}const Cb=new An(We.comparator),fS=new xn(We.comparator);function zt(...n){let e=fS;for(const t of n)e=e.add(t);return e}const Db=new xn(Mt);function Gm(){return Db}class Th{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Rp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Th(Ye.min(),i,Gm(),as(),zt())}}class Rp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Rp(r,t,zt(),zt(),zt())}}class ni{constructor(e,t,r,i){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=i}}class Mc{constructor(e,t){this.targetId=e,this.Et=t}}class Sb{constructor(e,t,r=Or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ab{constructor(){this.At=0,this.Rt=T0(),this.bt=Or.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=zt(),t=zt(),r=zt();return this.Rt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:rt()}}),new Rp(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=T0()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Lk{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=as(),this.qt=pS(),this.Ut=new xn(Mt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,i)=>{this.zt(i)&&t(i)})}Jt(e){const t=e.targetId,r=e.Et.count,i=this.Yt(t);if(i){const a=i.target;if(Cp(a))if(0===r){const l=new We(a.path);this.Qt(t,l,Pn.newNoDocument(l,Ye.min()))}else gt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((a,l)=>{const f=this.Yt(l);if(f){if(a.current&&Cp(f.target)){const m=new We(f.target.path);null!==this.Lt.get(m)||this.te(l,m)||this.Qt(l,m,Pn.newNoDocument(m,e))}a.St&&(t.set(l,a.Ct()),a.xt())}});let r=zt();this.qt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Yt(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.Lt.forEach((a,l)=>l.setReadTime(e));const i=new Th(e,t,this.Ut,this.Lt,r);return this.Lt=as(),this.qt=pS(),this.Ut=new xn(Mt),i}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const i=this.Wt(e);this.te(e,t)?i.Nt(t,1):i.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new Ab,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new xn(Mt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ze("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new Ab),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function pS(){return new An(We.comparator)}function T0(){return new An(We.comparator)}const xb={asc:"ASCENDING",desc:"DESCENDING"},Mp={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gS={and:"AND",or:"OR"};class C0{constructor(e,t){this.databaseId=e,this.wt=t}}function Ch(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function D0(n,e){return n.wt?e.toBase64():e.toUint8Array()}function mS(n,e){return Ch(n,e.toTimestamp())}function Er(n){return gt(!!n),Ye.fromTimestamp(function(e){const t=hl(e);return new Sn(t.seconds,t.nanos)}(n))}function S0(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Wm(n){const e=an.fromString(n);return gt(k0(e)),e}function Dh(n,e){return S0(n.databaseId,e.path)}function xo(n,e){const t=Wm(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(A0(t))}function Sh(n,e){return S0(n.databaseId,e)}function zm(n){const e=Wm(n);return 4===e.length?an.emptyPath():A0(e)}function Km(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function A0(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function kb(n,e,t){return{name:Dh(n,e),fields:t.value.mapValue.fields}}function x0(n,e,t){const r=xo(n,e.name),i=Er(e.updateTime),a=e.createTime?Er(e.createTime):Ye.min(),l=new Hr({mapValue:{fields:e.fields}}),f=Pn.newFoundDocument(r,i,a,l);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function xh(n,e){let t;if(e instanceof eu)t={update:kb(n,e.key,e.value)};else if(e instanceof yl)t={delete:Dh(n,e.key)};else if(e instanceof tu)t={update:kb(n,e.key,e.data),updateMask:wS(e.fieldMask)};else{if(!(e instanceof jm))return rt();t={verify:Dh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof yh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof kc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vh)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:mS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:rt()),t;var i}function Pp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?hn.updateTime(Er(i.updateTime)):void 0!==i.exists?hn.exists(i.exists):hn.none():hn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(gt("REQUEST_TIME"===l.setToServerValue),f=new yh):"appendMissingElements"in l?f=new kc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Rc(l.removeAllFromArray.values||[]):"increment"in l?f=new vh(a,l.increment):rt();const m=or.fromServerFormat(l.fieldPath);return new Ja(m,f)}(n,i)):[];var i;if(e.update){const i=xo(n,e.update.name),a=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new As((e.updateMask.fieldPaths||[]).map(v=>or.fromServerFormat(v)));return new tu(i,a,l,t,r)}return new eu(i,a,t,r)}if(e.delete){const i=xo(n,e.delete);return new yl(i,t)}if(e.verify){const i=xo(n,e.verify);return new jm(i,t)}return rt()}function Rb(n,e){return{documents:[Sh(n,e.path)]}}function Mb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Sh(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Sh(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return Fb(En.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:Pc((C=v).field),direction:Ob(C.dir)};var C})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.wt||ch(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function Pb(n){let e=zm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){gt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=function(C){const A=Nb(C);return A instanceof En&&n0(A)?A.getFilters():[A]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new gh(Nc((A=C).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let f=null;t.limit&&(f=function(C){let A;return A="object"==typeof C?C.value:C,ch(A)?null:A}(t.limit));let m=null;var C;t.startAt&&(m=new gl((C=t.startAt).values||[],!!C.before));let v=null;return t.endAt&&(v=function(C){return new gl(C.values||[],!C.before)}(t.endAt)),h0(e,i,l,a,f,"F",m,v)}function Nb(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Nc(e.unaryFilter.field);return sn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Nc(e.unaryFilter.field);return sn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Nc(e.unaryFilter.field);return sn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nc(e.unaryFilter.field);return sn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?sn.create(Nc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>Nb(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function Ob(n){return xb[n]}function Lb(n){return Mp[n]}function vS(n){return gS[n]}function Pc(n){return{fieldPath:n.canonicalString()}}function Nc(n){return or.fromServerFormat(n.fieldPath)}function Fb(n){return n instanceof sn?function(e){if("=="===e.op){if(Jv(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NAN"}};if(Xv(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Jv(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NOT_NAN"}};if(Xv(e.value))return{unaryFilter:{field:Pc(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pc(e.field),op:Lb(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>Fb(r));return 1===t.length?t[0]:{compositeFilter:{op:vS(e.op),filters:t}}}(n):rt()}function wS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function k0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ki(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=R0(e)),e=Ub(n.get(t),e);return R0(e)}function Ub(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function R0(n){return n+"\x01\x01"}function ko(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:rt()}a=l+2}return new an(r)}const M0=["userId","batchId"];function Ym(n,e){return[n,Ki(e)]}function Vb(n,e,t){return[n,Ki(e),t]}const Uk={},Bb=["prefixPath","collectionGroup","readTime","documentId"],Vk=["prefixPath","collectionGroup","documentId"],Bk=["collectionGroup","readTime","prefixPath","documentId"],Zk=["canonicalId","targetId"],jk=["targetId","path"],$k=["path","targetId"],Hk=["collectionId","parent"],qk=["indexId","uid"],Gk=["uid","sequenceNumber"],Qm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wk=["indexId","uid","orderedDocumentKey"],Zb=["userId","collectionPath","documentId"],Xm=["userId","collectionPath","largestBatchId"],jb=["userId","collectionGroup","largestBatchId"],P0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zk=[...P0,"documentOverlays"],Jm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],N0=Jm,ES=[...N0,"indexConfiguration","indexState","indexEntries"];class e_ extends zv{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function wi(n,e){const t=Ke(n);return Do.M(t.se,e)}class $b{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&cS(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Tb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=Eh(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Ye.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&ah(this.mutations,e.mutations,(t,r)=>kp(t,r))&&ah(this.baseMutations,e.baseMutations,(t,r)=>kp(t,r))}}class O0{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){gt(e.mutations.length===r.length);let i=Cb;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new O0(e,t,r,i)}}class L0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ro{constructor(e,t,r,i,a=Ye.min(),l=Ye.min(),f=Or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new Ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Hb{constructor(e){this.ie=e}}function IS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:F0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Dh(i=n.ie,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Ch(i,a.version.toTimestamp()),createTime:Ch(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Oc(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:Oc(e.version)}}var i,a;return r}function F0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Oc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Lc(n){const e=new Sn(n.seconds,n.nanoseconds);return Ye.fromTimestamp(e)}function Fc(n,e){const t=(e.baseMutations||[]).map(a=>Pp(n.ie,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Pp(n.ie,a)),i=Sn.fromMillis(e.localWriteTimeMs);return new $b(e.batchId,i,t,r)}function t_(n){const e=Lc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Lc(n.lastLimboFreeSnapshotVersion):Ye.min();let r;var i;return void 0!==n.query.documents?(gt(1===(i=n.query).documents.length),r=zi(Dp(zm(i.documents[0])))):r=zi(Pb(n.query)),new Ro(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Or.fromBase64String(n.resumeToken))}function qb(n,e){const t=Oc(e.snapshotVersion),r=Oc(e.lastLimboFreeSnapshotVersion);let i;i=Cp(e.target)?Rb(n.ie,e.target):Mb(n.ie,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:_l(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function n_(n){const e=Pb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Bm(e,e.limit,"L"):e}function r_(n,e){return new L0(e.largestBatchId,Pp(n.ie,e.overlayMutation))}function bS(n,e){const t=e.path.lastSegment();return[n,Ki(e.path.popLast()),t]}function io(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Oc(r.readTime),documentKey:Ki(r.documentKey.path),largestBatchId:r.largestBatchId}}class TS{getBundleMetadata(e,t){return i_(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Lc(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return i_(e).put({bundleId:(r=t).id,createTime:Oc(Er(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Gb(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:n_(i.bundledQuery),readTime:Lc(i.readTime)};var i})}saveNamedQuery(e,t){return Gb(e).put({name:(r=t).name,readTime:Oc(Er(r.readTime)),bundledQuery:r.bundledQuery});var r}}function i_(n){return wi(n,"bundles")}function Gb(n){return wi(n,"namedQueries")}class U0{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new U0(e,t.uid||"")}getOverlay(e,t){return Li(e).get(bS(this.userId,t)).next(r=>r?r_(this.yt,r):null)}getOverlays(e,t){const r=Ao();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new L0(t,l);i.push(this.oe(e,f))}),le.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ki(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Li(e).Y("collectionPathOverlayIndex",f))}),le.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Ao(),a=Ki(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Li(e).W("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=r_(this.yt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Ao();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Li(e).Z({index:"collectionGroupOverlayIndex",range:f},(m,v,C)=>{const A=r_(this.yt,v);a.size()<i||A.largestBatchId===l?(a.set(A.getKey(),A),l=A.largestBatchId):C.done()}).next(()=>a)}oe(e,t){return Li(e).put(function(r,i,a){const[l,f,m]=bS(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:xh(r.ie,a.mutation)}}(this.yt,this.userId,t))}}function Li(n){return wi(n,"documentOverlays")}class Uc{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),dl(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Sc(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?JI(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):rt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const i of Object.keys(r))this.de(i,t),this.ce(r[i],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const i of r)this.ce(i,t)}me(e,t){this.he(t,37),We.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function V0(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Wb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=V0(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Uc.Ie=new Uc;class CS{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const i=t.codePointAt(0);this.Ee(240|i>>>18),this.Ee(128|63&i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const i=t.codePointAt(0);this.be(240|i>>>18),this.be(128|63&i>>>12),this.be(128|63&i>>>6),this.be(128|63&i)}}this.Pe()}Se(e){const t=this.De(e),r=Wb(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}xe(e){const t=this.De(e),r=Wb(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class B0{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class zb{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class kh{constructor(){this.$e=new CS,this.Be=new B0(this.$e),this.Le=new zb(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class Vc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Vc(this.indexId,this.documentKey,this.arrayValue,r)}}function nu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Z0(n.arrayValue,e.arrayValue),0!==t?t:(t=Z0(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function Z0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class DS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){gt(e.collectionGroup===this.collectionId);const t=km(e);if(void 0!==t&&!this.We(t))return!1;const r=ul(e);let i=0,a=0;for(;i<r.length&&this.We(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Qe){const l=r[i];if(!this.ze(this.Qe,l)||!this.He(this.Ke[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ke.length||!this.He(this.Ke[a++],l))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function j0(n){var e,t;if(gt(n instanceof sn||n instanceof En),n instanceof sn){if(n instanceof ub){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>sn.create(n.field,"==",a)))||[];return En.create(i,"or")}return n}const r=n.filters.map(i=>j0(i));return En.create(r,n.op)}function SS(n){if(0===n.getFilters().length)return[];const e=Op(j0(n));return gt($0(e)),Np(e)||la(e)?[e]:e.getFilters()}function Np(n){return n instanceof sn}function la(n){return n instanceof En&&n0(n)}function $0(n){return Np(n)||la(n)||function(e){if(e instanceof En&&Lm(e)){for(const t of e.getFilters())if(!Np(t)&&!la(t))return!1;return!0}return!1}(n)}function Op(n){if(gt(n instanceof sn||n instanceof En),n instanceof sn)return n;if(1===n.filters.length)return Op(n.filters[0]);const e=n.filters.map(r=>Op(r));let t=En.create(e,n.op);return t=H0(t),$0(t)?t:(gt(t instanceof En),gt(ph(t)),gt(t.filters.length>1),t.filters.reduce((r,i)=>Mo(r,i)))}function Mo(n,e){let t;return gt(n instanceof sn||n instanceof En),gt(e instanceof sn||e instanceof En),t=n instanceof sn?e instanceof sn?En.create([n,e],"and"):Kb(n,e):e instanceof sn?Kb(e,n):function(r,i){if(gt(r.filters.length>0&&i.filters.length>0),ph(r)&&ph(i))return ob(r,i.getFilters());const a=Lm(r)?r:i,l=Lm(r)?i:r,f=a.filters.map(m=>Mo(m,l));return En.create(f,"or")}(n,e),H0(t)}function Kb(n,e){if(ph(e))return ob(e,n.getFilters());{const t=e.filters.map(r=>Mo(n,r));return En.create(t,"or")}}function H0(n){if(gt(n instanceof sn||n instanceof En),n instanceof sn)return n;const e=n.getFilters();if(1===e.length)return H0(e[0]);if(ib(n))return n;const t=e.map(i=>H0(i)),r=[];return t.forEach(i=>{i instanceof sn?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:En.create(r,n.op)}class AS{constructor(){this.Je=new q0}addToCollectionParentIndex(e,t){return this.Je.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Ss.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class q0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new xn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xn(an.comparator)).toArray()}}const s_=new Uint8Array(0);class xS{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new q0,this.Xe=new vl(r=>_l(r),(r,i)=>mh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const a={collectionId:r,parent:Ki(i)};return G0(e).put(a)}return le.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[_p(t),""],!1,!0);return G0(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ko(l.parent))}return r})}addFieldIndex(e,t){const r=Lp(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Fp(e);return a.next(f=>{l.put(io(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=Lp(e),i=Fp(e),a=o_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=o_(e);let i=!0;const a=new Map;return le.forEach(this.Ze(t),l=>this.tn(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=zt();const f=[];return le.forEach(a,(m,v)=>{var C;Ze("IndexedDbIndexManager",`Using index ${C=m,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${_l(t)}`);const A=function(ot,ht){const kt=km(ht);if(void 0===kt)return null;for(const $t of Um(ot,kt.fieldPath))switch($t.op){case"array-contains-any":return $t.value.arrayValue.values||[];case"array-contains":return[$t.value]}return null}(v,m),P=function(ot,ht){const kt=new Map;for(const $t of ul(ht))for(const Cr of Um(ot,$t.fieldPath))switch(Cr.op){case"==":case"in":kt.set($t.fieldPath.canonicalString(),Cr.value);break;case"not-in":case"!=":return kt.set($t.fieldPath.canonicalString(),Cr.value),Array.from(kt.values())}return null}(v,m),j=function(ot,ht){const kt=[];let $t=!0;for(const Cr of ul(ht)){const du=0===Cr.kind?cb(ot,Cr.fieldPath,ot.startAt):db(ot,Cr.fieldPath,ot.startAt);kt.push(du.value),$t&&($t=du.inclusive)}return new gl(kt,$t)}(v,m),z=function(ot,ht){const kt=[];let $t=!0;for(const Cr of ul(ht)){const du=0===Cr.kind?db(ot,Cr.fieldPath,ot.endAt):cb(ot,Cr.fieldPath,ot.endAt);kt.push(du.value),$t&&($t=du.inclusive)}return new gl(kt,$t)}(v,m),ge=this.en(m,v,j),Ee=this.en(m,v,z),dt=this.nn(m,v,P),Et=this.sn(m.indexId,A,ge,j.inclusive,Ee,z.inclusive,dt);return le.forEach(Et,ot=>r.J(ot,t.limit).next(ht=>{ht.forEach(kt=>{const $t=We.fromSegments(kt.documentKey);l.has($t)||(l=l.add($t),f.push($t))})}))}).next(()=>f)}return le.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:SS(En.create(e.filters,"and")).map(r=>Fm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),C=[];for(let A=0;A<m;++A){const P=t?this.rn(t[A/v]):s_,j=this.on(e,P,r[A%v],i),z=this.un(e,P,a[A%v],l),ge=f.map(Ee=>this.on(e,P,Ee,!0));C.push(...this.createRange(j,z,ge))}return C}on(e,t,r,i){const a=new Vc(e,We.empty(),t,r);return i?a:a.Ue()}un(e,t,r,i){const a=new Vc(e,We.empty(),t,r);return i?a.Ue():a}tn(e,t){const r=new DS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.je(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;const i=this.Ze(t);return le.forEach(i,a=>this.tn(e,a).next(l=>{l?0!==r&&l.fields.length<function(f){let m=new xn(or.comparator),v=!1;for(const C of f.filters)for(const A of C.getFlattenedFilters())A.field.isKeyField()||("array-contains"===A.op||"array-contains-any"===A.op?v=!0:m=m.add(A.field));for(const C of f.orderBy)C.field.isKeyField()||(m=m.add(C.field));return m.size+(v?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}cn(e,t){const r=new kh;for(const i of ul(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Uc.Ie.ue(a,l)}return r.Fe()}rn(e){const t=new kh;return Uc.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new kh;return Uc.Ie.ue(Ac(this.databaseId,t),r.qe(function(i){const a=ul(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let i=[];i.push(new kh);let a=0;for(const l of ul(e)){const f=r[a++];for(const m of i)if(this.hn(t,l.fieldPath)&&Ip(f))i=this.ln(i,l,f);else{const v=m.qe(l.kind);Uc.Ie.ue(f,v)}}return this.fn(i)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new kh;m.seed(f.Fe()),Uc.Ie.ue(l,m.qe(t.kind)),a.push(m)}return a}hn(e,t){return!!e.filters.find(r=>r instanceof sn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Lp(e),i=Fp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return le.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,C){const A=C?new Ka(C.sequenceNumber,new Ss(Lc(C.readTime),new We(ko(C.documentKey)),C.largestBatchId)):Ka.empty(),P=v.fields.map(([j,z])=>new Rm(or.fromServerFormat(j),z));return new yp(v.indexId,v.collectionGroup,P,A)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Mt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Lp(e),a=Fp(e);return this.dn(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>le.forEach(f,m=>a.put(io(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return le.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?le.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),le.forEach(f,m=>this._n(e,i,m).next(v=>{const C=this.wn(a,m);return v.isEqual(C)?le.resolve():this.mn(e,a,m,v,C)}))))})}gn(e,t,r,i){return o_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,i){return o_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const i=o_(e);let a=new xn(nu);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,f)=>{a=a.add(new Vc(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}wn(e,t){let r=new xn(nu);const i=this.cn(t,e);if(null==i)return r;const a=km(t);if(null!=a){const l=e.data.field(a.fieldPath);if(Ip(l))for(const f of l.arrayValue.values||[])r=r.add(new Vc(t.indexId,e.key,this.rn(f),i))}else r=r.add(new Vc(t.indexId,e.key,s_,i));return r}mn(e,t,r,i,a){Ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,C,A){const P=f.getIterator(),j=m.getIterator();let z=ml(P),ge=ml(j);for(;z||ge;){let Ee=!1,dt=!1;if(z&&ge){const Et=v(z,ge);Et<0?dt=!0:Et>0&&(Ee=!0)}else null!=z?dt=!0:Ee=!0;Ee?(C(ge),ge=ml(j)):dt?(A(z),z=ml(P)):(z=ml(P),ge=ml(j))}}(i,a,nu,f=>{l.push(this.gn(e,t,r,f))},f=>{l.push(this.yn(e,t,r,f))}),le.waitFor(l)}dn(e){let t=1;return Fp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>nu(l,f)).filter((l,f,m)=>!f||0!==nu(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=nu(l,e),m=nu(l,t);if(0===f)i[0]=e.Ue();else if(f>0&&m<0)i.push(l),i.push(l.Ue());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.pn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,s_,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,s_,[]]))}return a}pn(e,t){return nu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(W0)}getMinOffset(e,t){return le.mapArray(this.Ze(t),r=>this.tn(e,r).next(i=>i||rt())).next(W0)}}function G0(n){return wi(n,"collectionParents")}function o_(n){return wi(n,"indexEntries")}function Lp(n){return wi(n,"indexConfiguration")}function Fp(n){return wi(n,"indexState")}function W0(n){gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;uh(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ss(e.readTime,e.documentKey,t)}const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Fi(e,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function z0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.Z({range:l},(C,A,P)=>(f++,P.delete()));a.push(m.next(()=>{gt(1===f)}));const v=[];for(const C of t.mutations){const A=Vb(e,C.key.path,t.batchId);a.push(i.delete(A)),v.push(C.key)}return le.waitFor(a).next(()=>v)}function Up(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}Fi.DEFAULT_COLLECTION_PERCENTILE=10,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fi.DEFAULT=new Fi(41943040,Fi.DEFAULT_COLLECTION_PERCENTILE,Fi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fi.DISABLED=new Fi(-1,0,0);class Vp{constructor(e,t,r,i){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static re(e,t,r,i){gt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new Vp(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=iu(e),l=ru(e);return l.add({}).next(f=>{gt("number"==typeof f);const m=new $b(f,t,r,i),v=function(P,j,z){const ge=z.baseMutations.map(dt=>xh(P.ie,dt)),Ee=z.mutations.map(dt=>xh(P.ie,dt));return{userId:j,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ge,mutations:Ee}}(this.yt,this.userId,m),C=[];let A=new xn((P,j)=>Mt(P.canonicalString(),j.canonicalString()));for(const P of i){const j=Vb(this.userId,P.key.path,f);A=A.add(P.key.path.popLast()),C.push(l.put(v)),C.push(a.put(j,Uk))}return A.forEach(P=>{C.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[f]=m.keys()}),le.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return ru(e).get(t).next(r=>r?(gt(r.userId===this.userId),Fc(this.yt,r)):null)}Tn(e,t){return this.In[t]?le.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return ru(e).Z({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(gt(f.batchId>=r),a=Fc(this.yt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ru(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ru(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fc(this.yt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ym(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return iu(e).Z({range:i},(l,f,m)=>{const[v,C,A]=l,P=ko(C);if(v===this.userId&&t.path.isEqual(P))return ru(e).get(A).next(j=>{if(!j)throw rt();gt(j.userId===this.userId),a.push(Fc(this.yt,j))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Mt);const i=[];return t.forEach(a=>{const l=Ym(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=iu(e).Z({range:f},(v,C,A)=>{const[P,j,z]=v,ge=ko(j);P===this.userId&&a.path.isEqual(ge)?r=r.add(z):A.done()});i.push(m)}),le.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ym(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new xn(Mt);return iu(e).Z({range:l},(m,v,C)=>{const[A,P,j]=m,z=ko(P);A===this.userId&&r.isPrefixOf(z)?z.length===i&&(f=f.add(j)):C.done()}).next(()=>this.En(e,f))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(ru(e).get(a).next(l=>{if(null===l)throw rt();gt(l.userId===this.userId),r.push(Fc(this.yt,l))}))}),le.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return z0(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),le.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return le.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return iu(e).Z({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=ko(a[1]);i.push(m)}else f.done()}).next(()=>{gt(0===i.length)})})}containsKey(e,t){return K0(e,this.userId,t)}Rn(e){return Bp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function K0(n,e,t){const r=Ym(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return iu(n).Z({range:a,X:!0},(f,m,v)=>{const[C,A,P]=f;C===e&&A===i&&(l=!0),v.done()}).next(()=>l)}function ru(n){return wi(n,"mutations")}function iu(n){return wi(n,"documentMutations")}function Bp(n){return wi(n,"mutationQueues")}class wl{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wl(0)}static vn(){return new wl(-1)}}class RS{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new wl(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Ye.fromTimestamp(new Sn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Rh(e).Z((l,f)=>{const m=t_(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>le.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Rh(e).Z((r,i)=>{const a=t_(i);t(a)})}Vn(e){return MS(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}Sn(e,t){return MS(e).put("targetGlobalKey",t)}Dn(e,t){return Rh(e).put(qb(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=_l(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Rh(e).Z({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=t_(f);mh(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Bc(e);return t.forEach(l=>{const f=Ki(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),le.waitFor(i)}removeMatchingKeys(e,t,r){const i=Bc(e);return le.forEach(t,a=>{const l=Ki(a.path);return le.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Bc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Bc(e);let a=zt();return i.Z({range:r,X:!0},(l,f,m)=>{const v=ko(l[1]),C=new We(v);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Ki(t.path),i=IDBKeyRange.bound([r],[_p(r)],!1,!0);let a=0;return Bc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}ne(e,t){return Rh(e).get(t).next(r=>r?t_(r):null)}}function Rh(n){return wi(n,"targets")}function MS(n){return wi(n,"targetGlobal")}function Bc(n){return wi(n,"targetDocuments")}function PS([n,e],[t,r]){const i=Mt(n,t);return 0===i?Mt(e,r):i}class Yb{constructor(e){this.xn=e,this.buffer=new xn(PS),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();PS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Qa(r)?Ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ya(r)}yield t.Fn(3e5)}))}}class OS{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return le.resolve(ro.at);const r=new Yb(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(kS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,i,a,l,f,m,v;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),i=this.params.maximumSequenceNumbersToCollect):i=A,l=Date.now(),this.nthSequenceNumber(e,i))).next(A=>(r=A,f=Date.now(),this.removeTargets(e,r,t))).next(A=>(a=A,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(v=Date.now(),Sm()<=Pi.in.DEBUG&&Ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${A} documents in `+(v-m)+`ms\nTotal Duration: ${v-C}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:A})))}}class LS{constructor(e,t){this.db=e,this.garbageCollector=new OS(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Y0(e,r)}removeReference(e,t,r){return Y0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Y0(e,t)}Gn(e,t){return function(r,i){let a=!1;return Bp(r).tt(l=>K0(r,l,i).next(f=>(f&&(a=!0),le.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,f)=>{if(f<=t){const m=this.Gn(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ye.min()),Bc(e).delete([0,Ki(l.path)])))});i.push(m)}}).next(()=>le.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Y0(e,t)}Kn(e,t){const r=Bc(e);let i,a=ro.at;return r.Z({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==ro.at&&t(new We(ko(i)),a),a=v,i=m):a=ro.at}).next(()=>{a!==ro.at&&t(new We(ko(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Y0(n,e){return Bc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ki(e.path),sequenceNumber:r}));var r}class FS{constructor(){this.changes=new vl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yk{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ca(e).put(r)}removeEntry(e,t,r){return ca(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],F0(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return ca(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zp(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return ca(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Zp(t))},(i,a)=>{r={document:this.jn(t,a),size:Up(a)}}).next(()=>r)}getEntries(e,t){let r=as();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=as(),i=new An(We.comparator);return this.zn(e,t,(a,l)=>{const f=this.jn(a,l);r=r.insert(a,f),i=i.insert(a,Up(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return le.resolve();let i=new xn(Q0);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(Zp(i.first()),Zp(i.last())),l=i.getIterator();let f=l.getNext();return ca(e).Z({index:"documentKeyIndex",range:a},(m,v,C)=>{const A=We.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&Q0(f,A)<0;)r(f,null),f=l.getNext();f&&f.isEqual(A)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?C.j(Zp(f)):C.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),F0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ca(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let f=as();for(const m of l){const v=this.jn(We.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=as();const l=Xb(t,r),f=Xb(t,Ss.max());return ca(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,C)=>{const A=this.jn(We.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(A.key,A),a.size===i&&C.done()}).next(()=>a)}newChangeBuffer(e){return new Qk(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Qb(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Qn(e,t){return Qb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Kk(n,e){let t;if(e.document)t=x0(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Lc(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=We.fromSegments(e.unknownDocument.path),i=Lc(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Sn(r[0],r[1]);return Ye.fromTimestamp(i)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Ye.min()))return r}return Pn.newInvalidDocument(e)}}function US(n){return new Yk(n)}class Qk extends FS{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new vl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new xn((a,l)=>Mt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=IS(this.Yn.yt,l);i=i.add(a.path.popLast());const v=Up(m);r+=v-f.size,t.push(this.Yn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=IS(this.Yn.yt,l.convertToNoDocument(Ye.min()));t.push(this.Yn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),le.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Qb(n){return wi(n,"remoteDocumentGlobal")}function ca(n){return wi(n,"remoteDocumentsV14")}function Zp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Xb(n,e){const t=e.documentKey.path.toArray();return[n,F0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Q0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Mt(t[a],r[a]),i)return i;return i=Mt(t.length,r.length),i||(i=Mt(t[t.length-2],r[r.length-2]),i||Mt(t[t.length-1],r[r.length-1]))}class Zc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class X0{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&xp(r.mutation,i,As.empty(),Sn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=zt()){const i=Ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Ih();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,zt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=as();const l=bh(),f=bh();return t.forEach((m,v)=>{const C=r.get(v.key);i.has(v.key)&&(void 0===C||C.mutation instanceof tu)?a=a.insert(v.key,v):void 0!==C&&(l.set(v.key,C.mutation.getFieldMask()),xp(C.mutation,v,C.mutation.getFieldMask(),Sn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,C)=>l.set(v,C)),t.forEach((v,C)=>{var A;return f.set(v,new Zc(C,null!==(A=l.get(v))&&void 0!==A?A:null))}),f))}recalculateAndSaveOverlays(e,t){const r=bh();let i=new An((l,f)=>l-f),a=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let C=r.get(m)||As.empty();C=f.applyToLocalView(v,C),r.set(m,C);const A=(i.get(f.batchId)||zt()).add(m);i=i.insert(f.batchId,A)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,C=m.value,A=Tb();C.forEach(P=>{if(!a.has(P)){const j=Eh(t.get(P),r.get(P));null!==j&&A.set(P,j),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,A))}return le.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):le.resolve(Ao());let f=-1,m=a;return l.next(v=>le.forEach(v,(C,A)=>(f<A.largestBatchId&&(f=A.largestBatchId),a.get(C)?le.resolve():this.remoteDocumentCache.getEntry(e,C).next(P=>{m=m.insert(C,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,zt())).next(C=>({batchId:f,changes:qm(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=Ih();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Ih();return this.indexManager.getCollectionParents(e,i).next(l=>le.forEach(l,f=>{const m=(v=t,C=f.child(i),new Xa(C,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,C;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((C,A)=>{a=a.insert(C,A)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,Pn.newInvalidDocument(v)))});let l=Ih();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&xp(v.mutation,m,As.empty(),Sn.now()),_0(t,m)&&(l=l.insert(f,m))}),l})}}class J0{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return le.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Er(r.createTime)}),le.resolve()}getNamedQuery(e,t){return le.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:n_(r.bundledQuery),readTime:Er(r.readTime)}),le.resolve();var r}}class ew{constructor(){this.overlays=new An(We.comparator),this.es=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ao();return le.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.oe(e,t,a)}),le.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const i=Ao(),a=t.length+1,l=new We(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return le.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new An((v,C)=>v-C);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let C=a.get(v.largestBatchId);null===C&&(C=Ao(),a=a.insert(v.largestBatchId,C)),C.set(v.getKey(),v)}}const f=Ao(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,C)=>f.set(v,C)),!(f.size()>=i)););return le.resolve(f)}oe(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new L0(t,r));let a=this.es.get(t);void 0===a&&(a=zt(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class tw{constructor(){this.ns=new xn(Lr.ss),this.rs=new xn(Lr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Lr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Lr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new We(new an([])),r=new Lr(t,e),i=new Lr(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new We(new an([])),r=new Lr(t,e),i=new Lr(t,e+1);let a=zt();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Lr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Lr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return We.comparator(e.key,t.key)||Mt(e._s,t._s)}static os(e,t){return Mt(e._s,t._s)||We.comparator(e.key,t.key)}}class nw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new xn(Lr.ss)}checkEmpty(e){return le.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new $b(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.gs=this.gs.add(new Lr(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return le.resolve(l)}lookupMutationBatch(e,t){return le.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return le.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Lr(t,0),i=new Lr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const f=this.ys(l._s);a.push(f)}),le.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new xn(Mt);return t.forEach(i=>{const a=new Lr(i,0),l=new Lr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],f=>{r=r.add(f._s)})}),le.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new Lr(new We(a),0);let f=new xn(Mt);return this.gs.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m._s)),!0)},l),le.resolve(this.Is(f))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){gt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return le.forEach(t.mutations,i=>{const a=new Lr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Lr(t,0),i=this.gs.firstAfterOrEqual(r);return le.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return le.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class a_{constructor(e){this.Es=e,this.docs=new An(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=as();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Pn.newInvalidDocument(i))}),le.resolve(r)}getAllFromCollection(e,t,r){let i=as();const a=new We(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:m}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||uh(zI(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return le.resolve(i)}getAllFromCollectionGroup(e,t,r,i){rt()}As(e,t){return le.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xk(this)}getSize(e){return le.resolve(this.size)}}class Xk extends FS{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),le.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Jk{constructor(e){this.persistence=e,this.Rs=new vl(t=>_l(t),mh),this.lastRemoteSnapshotVersion=Ye.min(),this.highestTargetId=0,this.bs=0,this.Ps=new tw,this.targetCount=0,this.vs=wl.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),le.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new wl(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Dn(t),le.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),le.waitFor(a).next(()=>i)}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),le.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),le.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this.Ps.containsKey(t))}}class VS{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ro(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Jk(this),this.indexManager=new AS,this.remoteDocumentCache=new a_(r=>this.referenceDelegate.xs(r)),this.yt=new Hb(t),this.Ns=new J0(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ew,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new nw(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ze("MemoryPersistence","Starting transaction:",e);const i=new eR(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Os(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ms(e,t){return le.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class eR extends zv{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Fs=new tw,this.$s=null}static Bs(e){return new jp(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),le.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.Ls,r=>{const i=We.fromPath(r);return this.qs(e,i).next(a=>{a||t.removeEntry(i,Ye.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return le.or([()=>le.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class BS{constructor(e){this.yt=e}$(e,t,r,i){const a=new ll("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M0,{unique:!0}),f.createObjectStore("documentMutations"),Jb(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=le.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),Jb(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ye.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").W().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",M0,{unique:!0});const C=m.store("mutations"),A=v.map(P=>C.put(P));return le.waitFor(A)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Us(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:Zb});m.createIndex("collectionPathOverlayIndex",Xm,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",jb,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:Bb});m.createIndex("documentKeyIndex",Vk),m.createIndex("collectionGroupIndex",Bk)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:qk}).createIndex("sequenceNumberIndex",Gk,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:Qm}).createIndex("documentKeyIndex",Wk,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Up(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>le.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(f=>le.forEach(f,m=>{gt(m.userId===a.userId);const v=Fc(this.yt,m);return z0(e,a.userId,v).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,f)=>{const m=new an(l),v=[0,Ki(m)];a.push(t.get(v).next(C=>C?le.resolve():t.put({targetId:0,path:Ki(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>le.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Hk});const r=t.store("collectionParents"),i=new q0,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Ki(m)})}};return t.store("remoteDocuments").Z({X:!0},(l,f)=>{const m=new an(l);return a(m.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,f,m],v)=>{const C=ko(f);return a(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=t_(i),l=qb(this.yt,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new We(an.fromString(v.document.name).popFirst(5)):v.noDocument?We.fromSegments(v.noDocument.path):v.unknownDocument?We.fromSegments(v.unknownDocument.path):rt()).path.toArray();var v;const C={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(C))}).next(()=>le.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=US(this.yt),a=new VS(jp.Bs,this.yt.ie);return r.W().next(l=>{const f=new Map;return l.forEach(m=>{var v;let C=null!==(v=f.get(m.userId))&&void 0!==v?v:zt();Fc(this.yt,m).keys().forEach(A=>C=C.add(A)),f.set(m.userId,C)}),le.forEach(f,(m,v)=>{const C=new ti(v),A=U0.re(this.yt,C),P=a.getIndexManager(C),j=Vp.re(C,this.yt,P,a.referenceDelegate);return new X0(i,j,A,P).recalculateAndSaveOverlaysForDocumentKeys(new e_(t,ro.at),m).next()})})}}function Jb(n){n.createObjectStore("targetDocuments",{keyPath:jk}).createIndex("documentTargetsIndex",$k,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Zk,{unique:!0}),n.createObjectStore("targetGlobal")}const rw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class iw{constructor(e,t,r,i,a,l,f,m,v,C,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=f,this.Js=v,this.Ys=C,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!iw.C())throw new Ne(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new LS(this,i),this.ii=t+"main",this.yt=new Hb(m),this.ri=new Do(this.ii,this.Xs,new BS(this.yt)),this.Cs=new RS(this.referenceDelegate,this.yt),this.remoteDocumentCache=US(this.yt),this.Ns=new TS,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,rw);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ro(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,ye.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$p(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Qa(e))return Ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Mh(e).get("owner").next(t=>le.resolve(this.mi(t)))}gi(e){return $p(e).delete(this.clientId)}yi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=wi(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return le.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?le.resolve(!0):Mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(he.FAILED_PRECONDITION,rw);return!1}}return!(!this.networkEnabled||!this.inForeground)||$p(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new e_(t,ro.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>$p(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Vp.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new xS(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return U0.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?ES:14===l?N0:13===l?Jm:12===l?zk:11===l?P0:void rt();var l;let f;return this.ri.runTransaction(e,i,a,m=>(f=new e_(m,this.Ss?this.Ss.next():ro.at),"readwrite-primary"===t?this.fi(f).next(v=>!!v||this.di(f)).next(v=>{if(!v)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(he.FAILED_PRECONDITION,Wv);return r(f)}).next(v=>this.wi(f).next(()=>v)):this.Vi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}Vi(e){return Mh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(he.FAILED_PRECONDITION,rw)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mh(e).put("owner",t)}static C(){return Do.C()}_i(e){const t=Mh(e);return t.get("owner").next(r=>this.mi(r)?(Ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):le.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Mh(n){return wi(n,"owner")}function $p(n){return wi(n,"clientMetadata")}function u_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class sw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=zt(),i=zt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new sw(e,t.fromCache,r,i)}}class eT{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Oi(e,t,i,r)).next(a=>a||this.Mi(e,t))}ki(e,t){if(f0(t))return le.resolve(null);let r=zi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Bm(t,null,"F"),r=zi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=zt(...a);return this.Ni.getDocuments(e,l).next(f=>this.indexManager.getMinOffset(e,r).next(m=>{const v=this.Fi(t,f);return this.$i(t,v,l,m.readTime)?this.ki(e,Bm(t,null,"F")):this.Bi(e,v,t,m)}))})))}Oi(e,t,r,i){return f0(t)||i.isEqual(Ye.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Mi(e,t):(Sm()<=Pi.in.DEBUG&&Ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),m0(t)),this.Bi(e,l,t,WI(i,-1)))})}Fi(e,t){let r=new xn(gb(e));return t.forEach((i,a)=>{_0(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Mi(e,t){return Sm()<=Pi.in.DEBUG&&Ze("QueryEngine","Using full collection scan to execute query:",m0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ss.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class tT{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.yt=i,this.qi=new An(Mt),this.Ui=new vl(a=>_l(a),mh),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new X0(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function l_(n,e,t,r){return new tT(n,e,t,r)}function ZS(n,e){return c_.apply(this,arguments)}function c_(){return c_=(0,ye.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=zt();for(const v of i){l.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}for(const v of a){f.push(v.batchId);for(const C of v.mutations)m=m.add(C.key)}return t.localDocuments.getDocuments(r,m).next(v=>({ji:v,removedBatchIds:l,addedBatchIds:f}))})})}),c_.apply(this,arguments)}function ow(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const C=m.batch,A=C.keys();let P=le.resolve();return A.forEach(j=>{P=P.next(()=>v.getEntry(f,j)).next(z=>{const ge=m.docVersions.get(j);gt(null!==ge),z.version.compareTo(ge)<0&&(C.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),v.addEntry(z)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=zt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function nT(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function jS(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.qi;const f=[];e.targetChanges.forEach((C,A)=>{const P=i.get(A);if(!P)return;f.push(t.Cs.removeMatchingKeys(a,C.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(a,C.addedDocuments,A)));let j=P.withSequenceNumber(a.currentSequenceNumber);var z,ge,Ee;e.targetMismatches.has(A)?j=j.withResumeToken(Or.EMPTY_BYTE_STRING,Ye.min()).withLastLimboFreeSnapshotVersion(Ye.min()):C.resumeToken.approximateByteSize()>0&&(j=j.withResumeToken(C.resumeToken,r)),i=i.insert(A,j),ge=j,Ee=C,(0===(z=P).resumeToken.approximateByteSize()||ge.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&f.push(t.Cs.updateTargetData(a,j))});let m=as(),v=zt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,C))}),f.push($S(a,l,e.documentUpdates).next(C=>{m=C.Wi,v=C.zi})),!r.isEqual(Ye.min())){const C=t.Cs.getLastRemoteSnapshotVersion(a).next(A=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(C)}return le.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.qi=i,a))}function $S(n,e,t){let r=zt(),i=zt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=as();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(Ye.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Ze("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Wi:l,zi:i}})}function tR(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ph(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,le.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Ro(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qi.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function Nh(n,e,t){return aw.apply(this,arguments)}function aw(){return aw=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=r.qi.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Qa(l))throw l;Ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(i.target)}),aw.apply(this,arguments)}function uw(n,e,t){const r=Ke(n);let i=Ye.min(),a=zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const C=Ke(f),A=C.Ui.get(v);return void 0!==A?le.resolve(C.qi.get(A)):C.Cs.getTargetData(m,v)}(r,l,zi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Ye.min(),t?a:zt())).next(f=>(GS(r,pb(e),f),{documents:f,Hi:a})))}function HS(n,e){const t=Ke(n),r=Ke(t.Cs),i=t.qi.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.ne(a,e).next(l=>l?l.target:null))}function qS(n,e){const t=Ke(n),r=t.Ki.get(e)||Ye.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,WI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(GS(t,e,i),i))}function GS(n,e,t){let r=n.Ki.get(e)||Ye.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function lw(){return lw=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);let a=zt(),l=as();for(const v of t){const C=e.Ji(v.metadata.name);v.document&&(a=a.add(C));const A=e.Yi(v);A.setReadTime(e.Xi(v.metadata.readTime)),l=l.insert(C,A)}const f=i.Gi.newChangeBuffer({trackRemovals:!0}),m=yield Ph(i,(v=r,zi(Dp(an.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>$S(v,f,l).next(C=>(f.apply(v),C)).next(C=>i.Cs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Cs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,C.Wi,C.zi)).next(()=>C.Wi)))}),lw.apply(this,arguments)}function rR(n,e){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n,e,t=zt()){const r=yield Ph(n,zi(n_(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Er(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const f=r.withResumeToken(Or.EMPTY_BYTE_STRING,l);return i.qi=i.qi.insert(f.targetId,f),i.Cs.updateTargetData(a,f).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),rT.apply(this,arguments)}function WS(n,e){return`firestore_clients_${n}_${e}`}function zS(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function iT(n,e){return`firestore_targets_${n}_${e}`}class cw{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ne(i.error.code,i.error.message))),l?new cw(e,t,i.state,a):(sr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ne(r.error.code,r.error.message))),a?new s(e,r.state,i):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class o{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gm();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=QI(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new o(e,a):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class u{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new u(t.clientId,t.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class d{constructor(){this.activeTargetIds=Gm()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new An(Mt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=WS(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new d),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(WS(e.persistenceKey,i));if(a){const l=o.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(iT(this.persistenceKey,e));if(r){const i=s.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ze("SharedClientState","READ",e,t),t}setItem(e,t){Ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=ro.at;if(null!=a)try{const f=JSON.parse(a);gt("number"==typeof f),l=f}catch(f){sr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==ro.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Mr(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new cw(this.currentUser,e,t,r),a=zS(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=zS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=iT(this.persistenceKey,e),a=new s(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return o.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return cw.Zi(new ti(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return s.Zi(i,t)}yr(e){return u.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Br(l,f).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Gm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class p{constructor(){this.Lr=new d,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new d,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class y{Ur(e){}shutdown(){}}class E{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class S{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class R extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,a){const l=this.ho(e,t);Ze("RestConnection","Sending: ",l,r);const f={};return this.lo(f,i,a),this.fo(e,l,f,r).then(m=>(Ze("RestConnection","Received: ",m),m),m=>{throw al("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}_o(e,t,r,i,a,l){return this.ao(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+oh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.oo}/v1/${t}:${T[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const f=new GD;f.setWithCredentials(!0),f.listenOnce($D.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case qv.NO_ERROR:const v=f.getResponseJson();Ze("Connection","XHR received:",JSON.stringify(v)),a(v);break;case qv.TIMEOUT:Ze("Connection",'RPC "'+e+'" timed out'),l(new Ne(he.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const C=f.getStatus();if(Ze("Connection",'RPC "'+e+'" failed with status:',C,"response text:",f.getResponseText()),C>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const P=A?.error;if(P&&P.status&&P.message){const j=function(z){const ge=z.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(ge)>=0?ge:he.UNKNOWN}(P.status);l(new Ne(j,P.message))}else l(new Ne(he.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Ne(he.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{Ze("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZD(),l=jD(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new qD({})),this.lo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const m=i.join("");Ze("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let C=!1,A=!1;const P=new S({Hr:z=>{A?Ze("Connection","Not sending because WebChannel is closed:",z):(C||(Ze("Connection","Opening WebChannel transport."),v.open(),C=!0),Ze("Connection","WebChannel sending:",z),v.send(z))},Jr:()=>v.close()}),j=(z,ge,Ee)=>{z.listen(ge,dt=>{try{Ee(dt)}catch(Et){setTimeout(()=>{throw Et},0)}})};return j(v,Dm.EventType.OPEN,()=>{A||Ze("Connection","WebChannel transport opened.")}),j(v,Dm.EventType.CLOSE,()=>{A||(A=!0,Ze("Connection","WebChannel transport closed"),P.io())}),j(v,Dm.EventType.ERROR,z=>{A||(A=!0,al("Connection","WebChannel transport errored:",z),P.io(new Ne(he.UNAVAILABLE,"The operation could not be completed")))}),j(v,Dm.EventType.MESSAGE,z=>{var ge;if(!A){const Ee=z.data[0];gt(!!Ee);const dt=Ee,Et=dt.error||(null===(ge=dt[0])||void 0===ge?void 0:ge.error);if(Et){Ze("Connection","WebChannel received error:",Et);const ot=Et.status;let ht=function($t){const Cr=ur[$t];if(void 0!==Cr)return Hm(Cr)}(ot),kt=Et.message;void 0===ht&&(ht=he.INTERNAL,kt="Unknown error status: "+ot+" with message "+Et.message),A=!0,P.io(new Ne(ht,kt)),v.close()}else Ze("Connection","WebChannel received:",Ee),P.ro(Ee)}}),j(l,HD.STAT_EVENT,z=>{z.stat===VI.PROXY?Ze("Connection","Detected buffering proxy"):z.stat===VI.NOPROXY&&Ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function U(){return typeof window<"u"?window:null}function K(){return typeof document<"u"?document:null}function ie(n){return new C0(n,!0)}class we{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class $e{constructor(e,t,r,i,a,l,f,m){this.Hs=e,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new we(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,ye.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,ye.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,ye.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Qe extends $e{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.yt=a}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function _S(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:rt(),i=e.targetChange.targetIds||[],a=function(m,v){return m.wt?(gt(void 0===v||"string"==typeof v),Or.fromBase64String(v||"")):(gt(void 0===v||v instanceof Uint8Array),Or.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?he.UNKNOWN:Hm(m.code);return new Ne(v,m.message||"")}(l);t=new Sb(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=xo(n,r.document.name),a=Er(r.document.updateTime),l=r.document.createTime?Er(r.document.createTime):Ye.min(),f=new Hr({mapValue:{fields:r.document.fields}}),m=Pn.newFoundDocument(i,a,l,f);t=new ni(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=xo(n,r.document),a=r.readTime?Er(r.readTime):Ye.min(),l=Pn.newNoDocument(i,a);t=new ni([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=xo(n,r.document);t=new ni([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return rt();{const r=e.filter,a=new b0(r.count||0);t=new Mc(r.targetId,a)}}var m;return t}(this.yt,e),r=function(i){if(!("targetChange"in i))return Ye.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ye.min():a.readTime?Er(a.readTime):Ye.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Km(this.yt),t.addTarget=function(i,a){let l;const f=a.target;return l=Cp(f)?{documents:Rb(i,f)}:{query:Mb(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=D0(i,a.resumeToken):a.snapshotVersion.compareTo(Ye.min())>0&&(l.readTime=Ch(i,a.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function yS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Km(this.yt),t.removeTarget=e,this.Bo(t)}}class ut extends $e{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.yt=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Fk(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,i){let a=Er(r.updateTime?r.updateTime:i);return a.isEqual(Ye.min())&&(a=Er(i)),new w0(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.Zo(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Km(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>xh(this.yt,r))};this.Bo(t)}}class xt extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=i,this.nu=!1}su(){if(this.nu)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.ao(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(he.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection._o(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ne(he.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class qn{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(sr(t),this.ou=!1):Ze("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class Ir{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur(f=>{r.enqueueAndForget((0,ye.Z)(function*(){var m;jc(l)&&(Ze("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,ye.Z)(function*(v){const C=Ke(v);C._u.add(4),yield h_(C),C.gu.set("Unknown"),C._u.delete(4),yield d_(C)}),function(v){return m.apply(this,arguments)})(l))}))}),this.gu=new qn(r,i)}}function d_(n){return KS.apply(this,arguments)}function KS(){return KS=(0,ye.Z)(function*(n){if(jc(n))for(const e of n.wu)yield e(!0)}),KS.apply(this,arguments)}function h_(n){return YS.apply(this,arguments)}function YS(){return YS=(0,ye.Z)(function*(n){for(const e of n.wu)yield e(!1)}),YS.apply(this,arguments)}function sT(n,e){const t=Ke(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),JS(t)?XS(t):p_(t).ko()&&QS(t,e))}function dw(n,e){const t=Ke(n),r=p_(t);t.du.delete(e),r.ko()&&iR(t,e),0===t.du.size&&(r.ko()?r.Fo():jc(t)&&t.gu.set("Unknown"))}function QS(n,e){n.yu.Ot(e.targetId),p_(n).zo(e)}function iR(n,e){n.yu.Ot(e),p_(n).Ho(e)}function XS(n){n.yu=new Lk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),p_(n).start(),n.gu.uu()}function JS(n){return jc(n)&&!p_(n).No()&&n.du.size>0}function jc(n){return 0===Ke(n)._u.size}function sR(n){n.yu=void 0}function tL(n){return eA.apply(this,arguments)}function eA(){return eA=(0,ye.Z)(function*(n){n.du.forEach((e,t)=>{QS(n,e)})}),eA.apply(this,arguments)}function nL(n,e){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n,e){sR(n),JS(n)?(n.gu.hu(e),XS(n)):n.gu.set("Unknown")}),tA.apply(this,arguments)}function rL(n,e,t){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof Sb&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.du.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.du.delete(f),i.yu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield oT(n,r)}else if(e instanceof ni?n.yu.Kt(e):e instanceof Mc?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Ye.min()))try{const r=yield nT(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.Zt(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.du.get(m);v&&i.du.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.du.get(f);if(!m)return;i.du.set(f,m.withResumeToken(Or.EMPTY_BYTE_STRING,m.snapshotVersion)),iR(i,f);const v=new Ro(m.target,f,1,m.sequenceNumber);QS(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ze("RemoteStore","Failed to raise snapshot:",r),yield oT(n,r)}var r}),nA.apply(this,arguments)}function oT(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n,e,t){if(!Qa(e))throw e;n._u.add(1),yield h_(n),n.gu.set("Offline"),t||(t=()=>nT(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Ze("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield d_(n)}))}),rA.apply(this,arguments)}function oR(n,e){return e().catch(t=>oT(n,t,e))}function f_(n){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n){const e=Ke(n),t=Oh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iL(e);)try{const i=yield tR(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,sL(e,i)}catch(i){yield oT(e,i)}aR(e)&&uR(e)}),iA.apply(this,arguments)}function iL(n){return jc(n)&&n.fu.length<10}function sL(n,e){n.fu.push(e);const t=Oh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function aR(n){return jc(n)&&!Oh(n).No()&&n.fu.length>0}function uR(n){Oh(n).start()}function oL(n){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n){Oh(n).eu()}),sA.apply(this,arguments)}function aL(n){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n){const e=Oh(n);for(const t of n.fu)e.Xo(t.mutations)}),oA.apply(this,arguments)}function uL(n,e,t){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n,e,t){const r=n.fu.shift(),i=O0.from(r,e,t);yield oR(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield f_(n)}),aA.apply(this,arguments)}function lL(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e){var t;e&&Oh(n).Yo&&(yield(t=(0,ye.Z)(function*(r,i){if($m(a=i.code)&&a!==he.ABORTED){const l=r.fu.shift();Oh(r).Mo(),yield oR(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield f_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),aR(n)&&uR(n)}),uA.apply(this,arguments)}function lR(n,e){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ze("RemoteStore","RemoteStore received new credentials");const r=jc(t);t._u.add(3),yield h_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield d_(t)}),lA.apply(this,arguments)}function cA(n,e){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e){const t=Ke(n);e?(t._u.delete(2),yield d_(t)):e||(t._u.add(2),yield h_(t),t.gu.set("Unknown"))}),dA.apply(this,arguments)}function p_(n){return n.pu||(n.pu=function(e,t,r){const i=Ke(e);return i.su(),new Qe(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:tL.bind(null,n),Zr:nL.bind(null,n),Wo:rL.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.pu.Mo(),JS(n)?XS(n):n.gu.set("Unknown")):(yield n.pu.stop(),sR(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Oh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ke(e);return i.su(),new ut(t,i.connection,i.authCredentials,i.appCheckCredentials,i.yt,r)}(n.datastore,n.asyncQueue,{Yr:oL.bind(null,n),Zr:lL.bind(null,n),tu:aL.bind(null,n),Zo:uL.bind(null,n)}),n.wu.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Iu.Mo(),yield f_(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ze("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class hA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new hA(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g_(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Qa(n))return new Ne(he.UNAVAILABLE,`${e}: ${n}`);throw n}class m_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Ih(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new m_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof m_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new m_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class cR{constructor(){this.Tu=new An(We.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class __{constructor(e,t,r,i,a,l,f,m,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(f=>{l.push({type:0,doc:f})}),new __(e,t,m_.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class cL{constructor(){this.Au=void 0,this.listeners=[]}}class dL{constructor(){this.queries=new vl(e=>fb(e),Sp),this.onlineState="Unknown",this.Ru=new Set}}function fA(n,e){return pA.apply(this,arguments)}function pA(){return pA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new cL),i)try{a.Au=yield t.onListen(r)}catch(l){const f=g_(l,`Initialization of query '${m0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&_A(t)}),pA.apply(this,arguments)}function gA(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),mA.apply(this,arguments)}function hL(n,e){const t=Ke(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Pu(i)&&(r=!0);l.Au=i}}r&&_A(t)}function fL(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function _A(n){n.Ru.forEach(e=>{e.next()})}class yA{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new __(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=__.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class pL{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class dR{constructor(e){this.yt=e}Ji(e){return xo(this.yt,e)}Yi(e){return e.metadata.exists?x0(this.yt,e.document,!1):Pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Er(e)}}class gL{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=hR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=an.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new dR(this.yt);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||zt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function nR(n,e,t,r){return lw.apply(this,arguments)}(e.localStore,new dR(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield rR(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function hR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fR{constructor(e){this.key=e}}class pR{constructor(e){this.key=e}}class gR{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=zt(),this.mutatedKeys=zt(),this.Gu=gb(e),this.Qu=new m_(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new cR,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,A)=>{const P=i.get(C),j=_0(this.query,A)?A:null,z=!!P&&this.mutatedKeys.has(P.key),ge=!!j&&(j.hasLocalMutations||this.mutatedKeys.has(j.key)&&j.hasCommittedMutations);let Ee=!1;P&&j?P.data.isEqual(j.data)?z!==ge&&(r.track({type:3,doc:j}),Ee=!0):this.Hu(P,j)||(r.track({type:2,doc:j}),Ee=!0,(m&&this.Gu(j,m)>0||v&&this.Gu(j,v)<0)&&(f=!0)):!P&&j?(r.track({type:0,doc:j}),Ee=!0):P&&!j&&(r.track({type:1,doc:P}),Ee=!0,(m||v)&&(f=!0)),Ee&&(j?(l=l.add(j),a=ge?a.add(C):a.delete(C)):(l=l.delete(C),a=a.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:f,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Eu();a.sort((v,C)=>function(A,P){const j=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return j(A)-j(P)}(v.type,C.type)||this.Gu(v.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],f=0===this.Ku.size&&this.current?1:0,m=f!==this.Uu;return this.Uu=f,0!==a.length||m?{snapshot:new __(this.query,e.Qu,i,a,e.mutatedKeys,0===f,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new cR,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=zt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new pR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new fR(r))}),t}tc(e){this.qu=e.Hi,this.Ku=zt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return __.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class mL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _L{constructor(e){this.key=e,this.nc=!1}}class yL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new vl(f=>fb(f),Sp),this.rc=new Map,this.oc=new Set,this.uc=new An(We.comparator),this.cc=new Map,this.ac=new tw,this.hc={},this.lc=new Map,this.fc=wl.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function vL(n,e){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n,e){const t=jA(n);let r,i;const a=t.ic.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ec();else{const l=yield Ph(t.localStore,zi(e));t.isPrimaryClient&&sT(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield wA(t,e,r,"current"===f,l.resumeToken)}return i}),vA.apply(this,arguments)}function wA(n,e,t,r,i){return EA.apply(this,arguments)}function EA(){return EA=(0,ye.Z)(function*(n,e,t,r,i){n._c=(A,P,j)=>{return(z=(0,ye.Z)(function*(ge,Ee,dt,Et){let ot=Ee.view.Wu(dt);ot.$i&&(ot=yield uw(ge.localStore,Ee.query,!1).then(({documents:$t})=>Ee.view.Wu($t,ot)));const ht=Et&&Et.targetChanges.get(Ee.targetId),kt=Ee.view.applyChanges(ot,ge.isPrimaryClient,ht);return RA(ge,Ee.targetId,kt.Xu),kt.snapshot}),function(ge,Ee,dt,Et){return z.apply(this,arguments)})(n,A,P,j);var z};const a=yield uw(n.localStore,e,!0),l=new gR(e,a.Hi),f=l.Wu(a.documents),m=Rp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),v=l.applyChanges(f,n.isPrimaryClient,m);RA(n,t,v.Xu);const C=new mL(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),v.snapshot}),EA.apply(this,arguments)}function wL(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(a=>!Sp(a,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),dw(t.remoteStore,r.targetId),y_(t,r.targetId)}).catch(Ya))):(y_(t,r.targetId),yield Nh(t.localStore,r.targetId,!0))}),IA.apply(this,arguments)}function bA(){return bA=(0,ye.Z)(function*(n,e,t){const r=$A(n);try{const i=yield function(a,l){const f=Ke(a),m=Sn.now(),v=l.reduce((P,j)=>P.add(j.key),zt());let C,A;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let j=as(),z=zt();return f.Gi.getEntries(P,v).next(ge=>{j=ge,j.forEach((Ee,dt)=>{dt.isValidDocument()||(z=z.add(Ee))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,j)).next(ge=>{C=ge;const Ee=[];for(const dt of l){const Et=dS(dt,C.get(dt.key).overlayedDocument);null!=Et&&Ee.push(new tu(dt.key,Et,lb(Et.value.mapValue),hn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,Ee,l)}).next(ge=>{A=ge;const Ee=ge.applyToLocalDocumentSet(C,z);return f.documentOverlayCache.saveOverlays(P,ge.batchId,Ee)})}).then(()=>({batchId:A.batchId,changes:qm(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.hc[a.currentUser.toKey()];m||(m=new An(Mt)),m=m.insert(l,f),a.hc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield $c(r,i.changes),yield f_(r.remoteStore)}catch(i){const a=g_(i,"Failed to persist write");t.reject(a)}}),bA.apply(this,arguments)}function mR(n,e){return TA.apply(this,arguments)}function TA(){return TA=(0,ye.Z)(function*(n,e){const t=Ke(n);try{const r=yield jS(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.cc.get(a);l&&(gt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.nc=!0:i.modifiedDocuments.size>0?gt(l.nc):i.removedDocuments.size>0&&(gt(l.nc),l.nc=!1))}),yield $c(t,r,e)}catch(r){yield Ya(r)}}),TA.apply(this,arguments)}function _R(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((a,l)=>{const f=l.view.bu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=Ke(a);f.onlineState=l;let m=!1;f.queries.forEach((v,C)=>{for(const A of C.listeners)A.bu(l)&&(m=!0)}),m&&_A(f)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IL(n,e,t){return CA.apply(this,arguments)}function CA(){return CA=(0,ye.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),a=i&&i.key;if(a){let l=new An(We.comparator);l=l.insert(a,Pn.newNoDocument(a,Ye.min()));const f=zt().add(a),m=new Th(Ye.min(),new Map,new xn(Mt),l,f);yield mR(r,m),r.uc=r.uc.remove(a),r.cc.delete(e),MA(r)}else yield Nh(r.localStore,e,!1).then(()=>y_(r,e,t)).catch(Ya)}),CA.apply(this,arguments)}function bL(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield ow(t.localStore,e);kA(t,r,null),xA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield $c(t,i)}catch(i){yield Ya(i)}}),DA.apply(this,arguments)}function TL(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,ye.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(a,l){const f=Ke(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(C=>(gt(null!==C),v=C.keys(),f.mutationQueue.removeMutationBatch(m,C))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);kA(r,e,t),xA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield $c(r,i)}catch(i){yield Ya(i)}}),SA.apply(this,arguments)}function AA(){return AA=(0,ye.Z)(function*(n,e){const t=Ke(n);jc(t.remoteStore)||Ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ke(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=g_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),AA.apply(this,arguments)}function xA(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function kA(n,e,t){const r=Ke(n);let i=r.hc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function y_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||yR(n,r)})}function yR(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(dw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),MA(n))}function RA(n,e,t){for(const r of t)r instanceof fR?(n.ac.addReference(r.key,e),DL(n,r)):r instanceof pR?(Ze("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||yR(n,r.key)):rt()}function DL(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ze("SyncEngine","New document in limbo: "+t),n.oc.add(r),MA(n))}function MA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new We(an.fromString(e)),r=n.fc.next();n.cc.set(r,new _L(t)),n.uc=n.uc.insert(t,r),sT(n.remoteStore,new Ro(zi(Dp(t.path)),r,2,ro.at))}}function $c(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[],l=[];var f;r.ic.isEmpty()||(r.ic.forEach((f,m)=>{l.push(r._c(m,e,t).then(v=>{if((v||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v?.fromCache?"not-current":"current"),v){i.push(v);const C=sw.Ci(m.targetId,v);a.push(C)}}))}),yield Promise.all(l),r.sc.Wo(i),yield(f=(0,ye.Z)(function*(m,v){const C=Ke(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>le.forEach(v,P=>le.forEach(P.Si,j=>C.persistence.referenceDelegate.addReference(A,P.targetId,j)).next(()=>le.forEach(P.Di,j=>C.persistence.referenceDelegate.removeReference(A,P.targetId,j)))))}catch(A){if(!Qa(A))throw A;Ze("LocalStore","Failed to update sequence numbers: "+A)}for(const A of v){const P=A.targetId;if(!A.fromCache){const j=C.qi.get(P),ge=j.withLastLimboFreeSnapshotVersion(j.snapshotVersion);C.qi=C.qi.insert(P,ge)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),PA.apply(this,arguments)}function SL(n,e){return NA.apply(this,arguments)}function NA(){return NA=(0,ye.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ze("SyncEngine","User change. New user:",e.toKey());const r=yield ZS(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(l=>{l.forEach(f=>{f.reject(new Ne(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield $c(t,r.ji)}var i}),NA.apply(this,arguments)}function AL(n,e){const t=Ke(n),r=t.cc.get(e);if(r&&r.nc)return zt().add(r.key);{let i=zt();const a=t.rc.get(e);if(!a)return i;for(const l of a){const f=t.ic.get(l);i=i.unionWith(f.view.ju)}return i}}function xL(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,ye.Z)(function*(n,e){const t=Ke(n),r=yield uw(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&RA(t,e.targetId,i.Xu),i}),OA.apply(this,arguments)}function kL(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,ye.Z)(function*(n,e){const t=Ke(n);return qS(t.localStore,e).then(r=>$c(t,r))}),LA.apply(this,arguments)}function RL(n,e,t,r){return FA.apply(this,arguments)}function FA(){return FA=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n),a=yield function(l,f){const m=Ke(l),v=Ke(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>v.Tn(C,f).next(A=>A?m.localDocuments.getDocuments(C,A):le.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield f_(i.remoteStore):"acknowledged"===t||"rejected"===t?(kA(i,e,r||null),xA(i,e),f=e,Ke(Ke(i.localStore).mutationQueue).An(f)):rt(),yield $c(i,a)):Ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),FA.apply(this,arguments)}function UA(){return UA=(0,ye.Z)(function*(n,e){const t=Ke(n);if(jA(t),$A(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield vR(t,r.toArray());t.dc=!0,yield cA(t.remoteStore,!0);for(const a of i)sT(t.remoteStore,a)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(y_(t,l),Nh(t.localStore,l,!0))),dw(t.remoteStore,l)}),yield i,yield vR(t,r),function(a){const l=Ke(a);l.cc.forEach((f,m)=>{dw(l.remoteStore,m)}),l.ac.fs(),l.cc=new Map,l.uc=new An(We.comparator)}(t),t.dc=!1,yield cA(t.remoteStore,!1)}}),UA.apply(this,arguments)}function vR(n,e,t){return VA.apply(this,arguments)}function VA(){return VA=(0,ye.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[];for(const l of e){let f;const m=r.rc.get(l);if(m&&0!==m.length){f=yield Ph(r.localStore,zi(m[0]));for(const v of m){const C=r.ic.get(v),A=yield xL(r,C);A.snapshot&&a.push(A.snapshot)}}else{const v=yield HS(r.localStore,l);f=yield Ph(r.localStore,v),yield wA(r,wR(v),l,!1,f.resumeToken)}i.push(f)}return r.sc.Wo(a),i}),VA.apply(this,arguments)}function wR(n){return h0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function PL(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function NL(n,e,t,r){return BA.apply(this,arguments)}function BA(){return BA=(0,ye.Z)(function*(n,e,t,r){const i=Ke(n);if(i.dc)return void Ze("SyncEngine","Ignoring unexpected query state notification.");const a=i.rc.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield qS(i.localStore,pb(a[0])),f=Th.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Or.EMPTY_BYTE_STRING);yield $c(i,l,f);break}case"rejected":yield Nh(i.localStore,e,!0),y_(i,e,r);break;default:rt()}}),BA.apply(this,arguments)}function OL(n,e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,ye.Z)(function*(n,e,t){const r=jA(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Ze("SyncEngine","Adding an already active target "+i);continue}const a=yield HS(r.localStore,i),l=yield Ph(r.localStore,a);yield wA(r,wR(a),l.targetId,!1,l.resumeToken),sT(r.remoteStore,l)}for(const i of t)r.rc.has(i)&&(yield Nh(r.localStore,i,!1).then(()=>{dw(r.remoteStore,i),y_(r,i)}).catch(Ya))}}),ZA.apply(this,arguments)}function jA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IL.bind(null,e),e.sc.Wo=hL.bind(null,e.eventManager),e.sc.wc=fL.bind(null,e.eventManager),e}function $A(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=bL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TL.bind(null,e),e}class ER{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.yt=ie(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return l_(this.persistence,new eT,e.initialUser,this.yt)}yc(e){return new VS(jp.Bs,this.yt)}gc(e){return new p}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class IR extends ER{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield $A(r.Ac.syncEngine),yield f_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return l_(this.persistence,new eT,e.initialUser,this.yt)}Tc(e,t){return new NS(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new JD(t,this.persistence);return new XD(e.asyncQueue,r)}yc(e){const t=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Fi.withCacheSize(this.cacheSizeBytes):Fi.DEFAULT;return new iw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,U(),K(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new p}}class FL extends IR{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof h&&(r.sharedClientState.syncEngine={Fr:RL.bind(null,i),$r:NL.bind(null,i),Br:OL.bind(null,i),vi:PL.bind(null,i),Mr:kL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,ye.Z)(function*(l){yield function ML(n,e){return UA.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}gc(e){const t=U();if(!h.C(t))throw new Ne(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=u_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new h(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class HA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>_R(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=SL.bind(null,r.syncEngine),yield cA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new dL}createDatastore(e){const t=ie(e.databaseInfo.databaseId),r=new R(e.databaseInfo);return new xt(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>_R(this.syncEngine,f,0),l=E.C()?new E:new y,new Ir(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const C=new yL(r,i,a,l,f,m);return v&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ke(t);Ze("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield h_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function qA(n,e,t){if(!t)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bR(n,e,t,r){if(!0===e&&!0===r)throw new Ne(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TR(n){if(!We.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function CR(n){if(We.isDocumentKey(n))throw new Ne(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=aT(n);throw new Ne(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DR(n,e){if(e<=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const SR=new Map;class AR{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,bR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new AR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new AR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Mk;switch(t.type){case"gapi":return new HI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SR.get(e);t&&(Ze("ComponentProvider","Removing Datastore"),SR.delete(e),t.terminate())}(this),Promise.resolve()}}class Jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new El(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jn(this.firestore,e,this._key)}}class Yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Yi(this.firestore,e,this._query)}}class El extends Yi{constructor(e,t,r){super(e,t,Dp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jn(this.firestore,null,new We(e))}withConverter(e){return new El(this.firestore,e,this._path)}}function kR(n,e,...t){if(n=(0,L.m9)(n),qA("collection","path",e),n instanceof hw){const r=an.fromString(e,...t);return CR(r),new El(n,null,r)}{if(!(n instanceof Jn||n instanceof El))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return CR(r),new El(n.firestore,null,r)}}function uT(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=qI.R()),qA("doc","path",e),n instanceof hw){const r=an.fromString(e,...t);return TR(r),new Jn(n,null,new We(r))}{if(!(n instanceof Jn||n instanceof El))throw new Ne(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return TR(r),new Jn(n.firestore,n instanceof El?n.converter:null,new We(r))}}function RR(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof Jn||n instanceof El)&&(e instanceof Jn||e instanceof El)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function GA(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Yi&&e instanceof Yi&&n.firestore===e.firestore&&Sp(n._query,e._query)&&n.converter===e.converter}function MR(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class lT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class VL{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new $r,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const a=yield e.Cc(i);return new pL(JSON.parse(a),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ye.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class jL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ye.Z)(function*(a,l){const f=Ke(a),m=Km(f.yt)+"/documents",v={documents:l.map(j=>Dh(f.yt,j))},C=yield f._o("BatchGetDocuments",m,v,l.length),A=new Map;C.forEach(j=>{const z=function Ah(n,e){return"found"in e?function(t,r){gt(!!r.found);const i=xo(t,r.found.name),a=Er(r.found.updateTime),l=r.found.createTime?Er(r.found.createTime):Ye.min(),f=new Hr({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,a,l,f)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const i=xo(t,r.missing),a=Er(r.readTime);return Pn.newNoDocument(i,a)}(n,e):rt()}(f.yt,j);A.set(z.key.toString(),z)});const P=[];return l.forEach(j=>{const z=A.get(j.toString());gt(!!z),P.push(z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new jm(a,e.precondition(a)))}),yield(r=(0,ye.Z)(function*(i,a){const l=Ke(i),f=Km(l.yt)+"/documents",m={writes:a.map(v=>xh(l.yt,v))};yield l.ao("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=Ye.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ye.min())?hn.exists(!1):hn.updateTime(t):hn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ye.min()))throw new Ne(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hn.updateTime(t)}return hn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $L{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new we(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,ye.Z)(function*(){const t=new jL(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Fc(a)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!ch(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$m(t)}return!1}}class HL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ti.UNAUTHENTICATED,this.clientId=qI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(f){Ze("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=g_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function PR(n,e){return WA.apply(this,arguments)}function WA(){return WA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ye.Z)(function*(a){r.isEqual(a)||(yield ZS(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),WA.apply(this,arguments)}function NR(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield KA(n);Ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>lR(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>lR(e.remoteStore,a)),n.onlineComponents=e}),zA.apply(this,arguments)}function KA(n){return YA.apply(this,arguments)}function YA(){return YA=(0,ye.Z)(function*(n){return n.offlineComponents||(Ze("FirestoreClient","Using default OfflineComponentProvider"),yield PR(n,new ER)),n.offlineComponents}),YA.apply(this,arguments)}function cT(n){return QA.apply(this,arguments)}function QA(){return QA=(0,ye.Z)(function*(n){return n.onlineComponents||(Ze("FirestoreClient","Using default OnlineComponentProvider"),yield NR(n,new HA)),n.onlineComponents}),QA.apply(this,arguments)}function OR(n){return KA(n).then(e=>e.persistence)}function dT(n){return KA(n).then(e=>e.localStore)}function XA(n){return cT(n).then(e=>e.remoteStore)}function JA(n){return cT(n).then(e=>e.syncEngine)}function v_(n){return e1.apply(this,arguments)}function e1(){return e1=(0,ye.Z)(function*(n){const e=yield cT(n),t=e.eventManager;return t.onListen=vL.bind(null,e.syncEngine),t.onUnlisten=wL.bind(null,e.syncEngine),t}),e1.apply(this,arguments)}function FR(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,f,m){const v=new lT({next:A=>{a.enqueueAndForget(()=>gA(i,C));const P=A.docs.has(l);!P&&A.fromCache?m.reject(new Ne(he.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&A.fromCache&&f&&"server"===f.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(A)},error:A=>m.reject(A)}),C=new yA(Dp(l.path),v,{includeMetadataChanges:!0,Nu:!0});return fA(i,C)}(yield v_(n),n.asyncQueue,e,t,r)})),r.promise}function UR(n,e,t={}){const r=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(i,a,l,f,m){const v=new lT({next:A=>{a.enqueueAndForget(()=>gA(i,C)),A.fromCache&&"server"===f.source?m.reject(new Ne(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(A)},error:A=>m.reject(A)}),C=new yA(l,v,{includeMetadataChanges:!0,Nu:!0});return fA(i,C)}(yield v_(n),n.asyncQueue,e,t,r)})),r.promise}class XL{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new we(this,"async_queue_retry"),this.Wc=()=>{const t=K();t&&Ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=K();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=K();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new $r;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Qa(t))throw t;Ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,sr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=hA.createAndSchedule(this,e,t,r,a=>this.Yc(a));return this.Uc.push(i),i}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function t1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class JL{constructor(){this._progressObserver={},this._taskCompletionResolver=new $r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends hw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new XL,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||VR(this),this._firestoreClient.terminate()}}function qr(n){return n._firestoreClient||VR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function VR(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Ok(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new HL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function BR(n,e,t){const r=new $r;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield PR(n,t),yield NR(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===he.FAILED_PRECONDITION||l.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;al("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function ZR(n){if(n._initialized||n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Il(Or.fromBase64String(e))}catch(t){throw new Ne(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Il(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Hc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Hp{constructor(e){this._methodName=e}}class hT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const lF=/^__.*__$/;class cF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tu(e,this.data,this.fieldMask,t,this.fieldTransforms):new eu(e,this.data,t,this.fieldTransforms)}}class jR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function $R(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class fT{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new fT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return mT(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($R(this.sa)&&lF.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class dF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||ie(e)}da(e,t,r,i=!1){return new fT({sa:e,methodName:t,fa:r,path:or.emptyPath(),oa:!1,la:i},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function qp(n){const e=n._freezeSettings(),t=ie(n._databaseId);return new dF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pT(n,e,t,r,i,a={}){const l=n.da(a.merge||a.mergeFields?2:0,e,t,i);s1("Data must be an object, but it was:",l,r);const f=GR(r,l);let m,v;if(a.merge)m=new As(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const C=[];for(const A of a.mergeFields){const P=o1(e,A,t);if(!l.contains(P))throw new Ne(he.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);zR(C,P)||C.push(P)}m=new As(C),v=l.fieldTransforms.filter(A=>m.covers(A.field))}else m=null,v=l.fieldTransforms;return new cF(new Hr(f),m,v)}class fw extends Hp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fw}}function HR(n,e,t){return new fT({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class n1 extends Hp{_toFieldTransform(e){return new Ja(e.path,new yh)}isEqual(e){return e instanceof n1}}class hF extends Hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=HR(this,e,!0),r=this._a.map(a=>Gp(a,t)),i=new kc(r);return new Ja(e.path,i)}isEqual(e){return this===e}}class fF extends Hp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=HR(this,e,!0),r=this._a.map(a=>Gp(a,t)),i=new Rc(r);return new Ja(e.path,i)}isEqual(e){return this===e}}class pF extends Hp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new vh(e.yt,y0(e.yt,this.wa));return new Ja(e.path,t)}isEqual(e){return this===e}}function r1(n,e,t,r){const i=n.da(1,e,t);s1("Data must be an object, but it was:",i,r);const a=[],l=Hr.empty();lh(r,(m,v)=>{const C=gT(e,m,t);v=(0,L.m9)(v);const A=i.ca(C);if(v instanceof fw)a.push(C);else{const P=Gp(v,A);null!=P&&(a.push(C),l.set(C,P))}});const f=new As(a);return new jR(l,f,i.fieldTransforms)}function i1(n,e,t,r,i,a){const l=n.da(1,e,t),f=[o1(e,r,t)],m=[i];if(a.length%2!=0)throw new Ne(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(o1(e,a[P])),m.push(a[P+1]);const v=[],C=Hr.empty();for(let P=f.length-1;P>=0;--P)if(!zR(v,f[P])){const j=f[P];let z=m[P];z=(0,L.m9)(z);const ge=l.ca(j);if(z instanceof fw)v.push(j);else{const Ee=Gp(z,ge);null!=Ee&&(v.push(j),C.set(j,Ee))}}const A=new As(v);return new jR(C,A,l.fieldTransforms)}function qR(n,e,t,r=!1){return Gp(t,n.da(r?4:3,e))}function Gp(n,e){if(WR(n=(0,L.m9)(n)))return s1("Unsupported field value:",e,n),GR(n,e);if(n instanceof Hp)return function(t,r){if(!$R(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Gp(l,r.aa(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return y0(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Sn.fromDate(t);return{timestampValue:Ch(r.yt,i)}}if(t instanceof Sn){const i=new Sn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ch(r.yt,i)}}if(t instanceof hT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Il)return{bytesValue:D0(r.yt,t._byteString)};if(t instanceof Jn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ha(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:S0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${aT(t)}`)}(n,e)}function GR(n,e){const t={};return tS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):lh(n,(r,i)=>{const a=Gp(i,e.ra(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function WR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sn||n instanceof hT||n instanceof Il||n instanceof Jn||n instanceof Hp)}function s1(n,e,t){if(!WR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=aT(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function o1(n,e,t){if((e=(0,L.m9)(e))instanceof Hc)return e._internalPath;if("string"==typeof e)return gT(n,e);throw mT("Field path arguments must be of type string or ",n,!1,void 0,t)}const gF=new RegExp("[~\\*/\\[\\]]");function gT(n,e,t){if(e.search(gF)>=0)throw mT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Hc(...e.split("."))._internalPath}catch{throw mT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function mT(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ne(he.INVALID_ARGUMENT,f+n+m)}function zR(n,e){return n.some(t=>t.isEqual(e))}class pw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mF extends pw{data(){return super.data()}}function _T(n,e){return"string"==typeof e?gT(n,e):e instanceof Hc?e._internalPath:e._delegate._internalPath}function KR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class a1{}class gw extends a1{}function Lh(n,e,...t){let r=[];e instanceof a1&&r.push(e),r=r.concat(t),function(i){const a=i.filter(f=>f instanceof w_).length,l=i.filter(f=>f instanceof mw).length;if(a>1||a>0&&l>0)throw new Ne(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class mw extends gw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new mw(e,t,r)}_apply(e){const t=this._parse(e);return JR(e._query,t),new Yi(e.firestore,e.converter,g0(e._query,t))}_parse(e){const t=qp(e.firestore);return function(i,a,l,f,m,v,C){let A;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){XR(C,v);const P=[];for(const j of C)P.push(QR(f,i,j));A={arrayValue:{values:P}}}else A=QR(f,i,C)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||XR(C,v),A=qR(l,"where",C,"in"===v||"not-in"===v);return sn.create(m,v,A)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class w_ extends a1{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new w_(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const f of l)JR(a,f),a=g0(a,f)}(e._query,t),new Yi(e.firestore,e.converter,g0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class u1 extends gw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new u1(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new gh(i,a);return function(f,m){if(null===p0(f)){const v=Vm(f);null!==v&&eM(0,v,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Yi(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Xa(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class yT extends gw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new yT(e,t,r)}_apply(e){return new Yi(e.firestore,e.converter,Bm(e._query,this._limit,this._limitType))}}class vT extends gw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new vT(e,t,r)}_apply(e){const t=YR(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new Xa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class wT extends gw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new wT(e,t,r)}_apply(e){const t=YR(e,this.type,this._docOrFields,this._inclusive);return new Yi(e.firestore,e.converter,(i=t,new Xa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function YR(n,e,t,r){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof pw)return function(i,a,l,f,m){if(!f)throw new Ne(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const C of xc(i))if(C.field.isKeyField())v.push(Ac(a,f.key));else{const A=f.data.field(C.field);if(Yv(A))throw new Ne(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const P=C.field.canonicalString();throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(A)}return new gl(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=qp(n.firestore);return function(a,l,f,m,v,C){const A=a.explicitOrderBy;if(v.length>A.length)throw new Ne(he.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let j=0;j<v.length;j++){const z=v[j];if(A[j].field.isKeyField()){if("string"!=typeof z)throw new Ne(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!hb(a)&&-1!==z.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const ge=a.path.child(an.fromString(z));if(!We.isDocumentKey(ge))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ge}' is not because it contains an odd number of segments.`);const Ee=new We(ge);P.push(Ac(l,Ee))}else{const ge=qR(f,m,z);P.push(ge)}}return new gl(P,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function QR(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ne(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hb(e)&&-1!==t.indexOf("/"))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!We.isDocumentKey(r))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ac(n,new We(r))}if(t instanceof Jn)return Ac(n,t._key);throw new Ne(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aT(t)}.`)}function XR(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function JR(n,e){if(e.isInequality()){const r=Vm(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=p0(n);null!==a&&eM(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ne(he.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function eM(n,e,t){if(!t.isEqual(e))throw new Ne(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class l1{convertValue(e,t="none"){switch(So(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return lh(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new hT(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=XI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dh(e));default:return null}}convertTimestamp(e){const t=hl(e);return new Sn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);gt(k0(r));const i=new Dc(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||sr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function ET(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CF extends l1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}class Wp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qc extends pw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _w(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_T("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _w extends qc{data(e={}){return super.data(e)}}class Fh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _w(this._firestore,this._userDataWriter,r.key,r,new Wp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new _w(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new _w(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Wp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:DF(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function DF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function nM(n,e){return n instanceof qc&&e instanceof qc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Fh&&e instanceof Fh&&n._firestore===e._firestore&&GA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Uh extends l1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jn(this.firestore,null,t)}}function rM(n,e,t){n=cn(n,Jn);const r=cn(n.firestore,er),i=ET(n.converter,e,t);return E_(r,[pT(qp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,hn.none())])}function iM(n,e,t,...r){n=cn(n,Jn);const i=cn(n.firestore,er),a=qp(i);let l;return l="string"==typeof(e=(0,L.m9)(e))||e instanceof Hc?i1(a,"updateDoc",n._key,e,t,r):r1(a,"updateDoc",n._key,e),E_(i,[l.toMutation(n._key,hn.exists(!0))])}function sM(n,...e){var t,r,i;n=(0,L.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||t1(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(t1(e[l])){const A=e[l];e[l]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[l+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[l+2]=null===(i=A.complete)||void 0===i?void 0:i.bind(A)}let m,v,C;if(n instanceof Jn)v=cn(n.firestore,er),C=Dp(n._key.path),m={next:A=>{e[l]&&e[l](c1(v,n,A))},error:e[l+1],complete:e[l+2]};else{const A=cn(n,Yi);v=cn(A.firestore,er),C=A._query;const P=new Uh(v);m={next:j=>{e[l]&&e[l](new Fh(v,P,A,j))},error:e[l+1],complete:e[l+2]},KR(n._query)}return function(A,P,j,z){const ge=new lT(z),Ee=new yA(P,ge,j);return A.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return fA(yield v_(A),Ee)})),()=>{ge.bc(),A.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return gA(yield v_(A),Ee)}))}}(qr(v),C,f,m)}function E_(n,e){return function(t,r){const i=new $r;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function EL(n,e,t){return bA.apply(this,arguments)}(yield JA(t),r,i)})),i.promise}(qr(n),e)}function c1(n,e,t){const r=t.docs.get(e._key),i=new Uh(n);return new qc(n,i,e._key,r,new Wp(t.hasPendingWrites,t.fromCache),e.converter)}const LF={maxAttempts:5};class oM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=qp(e)}set(e,t,r){this._verifyNotCommitted();const i=Vh(e,this._firestore),a=ET(i.converter,t,r),l=pT(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,hn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Vh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Hc?i1(this._dataReader,"WriteBatch.update",a._key,t,r,i):r1(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,hn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Vh(e,this._firestore);return this._mutations=this._mutations.concat(new yl(t._key,hn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Vh(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ne(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class FF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=qp(e)}get(e){const t=Vh(e,this._firestore),r=new CF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return rt();const a=i[0];if(a.isFoundDocument())return new pw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new pw(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const i=Vh(e,this._firestore),a=ET(i.converter,t,r),l=pT(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Vh(e,this._firestore);let l;return l="string"==typeof(t=(0,L.m9)(t))||t instanceof Hc?i1(this._dataReader,"Transaction.update",a._key,t,r,i):r1(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Vh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Vh(e,this._firestore),r=new Uh(this._firestore);return super.get(e).then(i=>new qc(this._firestore,r,t._key,i._document,new Wp(!1,!1),t.converter))}}function d1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function uM(){if(typeof Uint8Array>"u")throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function lM(){if(!function nS(){return typeof atob<"u"}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){oh=Jr.SDK_VERSION,(0,Jr._registerComponent)(new Is.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new er(new Pk(t.getProvider("auth-internal")),new Dt(t.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(f.options.projectId,m)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(BI,"3.8.0",n),(0,Jr.registerVersion)(BI,"3.8.0","esm2017")}();class yw{constructor(e){this._delegate=e}static fromBase64String(e){return lM(),new yw(Il.fromBase64String(e))}static fromUint8Array(e){return uM(),new yw(Il.fromUint8Array(e))}toBase64(){return lM(),this._delegate.toBase64()}toUint8Array(){return uM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function h1(n){return function GF(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class WF{enableIndexedDbPersistence(e,t){return function tF(n,e){ZR(n=cn(n,er));const t=qr(n),r=n._freezeSettings(),i=new HA;return BR(t,i,new IR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function nF(n){ZR(n=cn(n,er));const e=qr(n),t=n._freezeSettings(),r=new HA;return BR(e,r,new FL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function rF(n){if(n._initialized&&!n._terminated)throw new Ne(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new $r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Do.C())return Promise.resolve();const i=r+"main";yield Do.delete(i)}),function(r){return t.apply(this,arguments)})(u_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Dc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&al("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xR(n,e,t,r={}){var i;const a=(n=cn(n,hw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&al("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=ti.MOCK_USER;else{l=(0,L.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ne(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new ti(m)}n._authCredentials=new Gv(new Cc(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function sF(n){return function qL(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield OR(n),t=yield XA(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i._u.delete(0),d_(i)}(t)}))}(qr(n=cn(n,er)))}(this._delegate)}disableNetwork(){return function oF(n){return function GL(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield OR(n),t=yield XA(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(i){const a=Ke(i);a._u.add(0),yield h_(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(qr(n=cn(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,bR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function iF(n){return function(e){const t=new $r;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function CL(n,e){return AA.apply(this,arguments)}(yield JA(e),t)})),t.promise}(qr(n=cn(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function OF(n,e){return function KL(n,e){const t=new lT(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield v_(n),i=t,Ke(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield v_(n),i=t,void Ke(r).Ru.delete(i);var r,i}))}}(qr(n=cn(n,er)),t1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new I_(this,kR(this._delegate,e))}catch(t){throw xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new da(this,uT(this._delegate,e))}catch(t){throw xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ks(this,function UL(n,e){if(n=cn(n,hw),qA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yi(n,null,(t=e,new Xa(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function UF(n,e,t){n=cn(n,er);const r=Object.assign(Object.assign({},LF),t);return function(i){if(i.maxAttempts<1)throw new Ne(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const f=new $r;return i.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const m=yield function LR(n){return cT(n).then(e=>e.datastore)}(i);new $L(i.asyncQueue,m,l,a,f).run()})),f.promise}(qr(n),i=>e(new FF(n,i)),r)}(this._delegate,t=>e(new dM(this,t)))}batch(){return qr(this._delegate),new hM(new oM(this._delegate,e=>E_(this._delegate,e)))}loadBundle(e){return function aF(n,e){const t=qr(n=cn(n,er)),r=new JL;return function YL(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return MR(m,v);if(m instanceof ArrayBuffer)return MR(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new VL(m,l);var m}(t,ie(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function LL(n,e,t){const r=Ke(n);var i;(i=(0,ye.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(P,j){const z=Ke(P),ge=Er(j.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ee=>z.Ns.getBundleMetadata(Ee,j.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(ge)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(hR(m));const v=new gL(m,a.localStore,l.yt);let C=yield l.mc();for(;C;){const P=yield v.Fu(C);P&&f._updateProgress(P),C=yield l.mc()}const A=yield v.complete();return yield $c(a,A.Lu,void 0),yield function(P,j){const z=Ke(P);return z.persistence.runTransaction("Save bundle","readwrite",ge=>z.Ns.saveBundleMetadata(ge,j))}(a.localStore,m),f._completeWith(A.progress),Promise.resolve(A.Bu)}catch(m){return al("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield JA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function uF(n,e){return function QL(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield dT(n),e)}))}(qr(n=cn(n,er)),e).then(t=>t?new Yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ks(this,t):null)}}class IT extends l1{constructor(e){super(),this.firestore=e}convertBytes(e){return new yw(new Il(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return da.forKey(t,this.firestore,null)}}class dM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}get(e){const t=Kp(e);return this._delegate.get(t).then(r=>new vw(this._firestore,new qc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Kp(e);return r?(d1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Kp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Kp(e);return this._delegate.delete(t),this}}class hM{constructor(e){this._delegate=e}set(e,t,r){const i=Kp(e);return r?(d1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Kp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Kp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class zp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _w(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ww(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=zp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new zp(e,new IT(e),t),i.set(t,a)),a}}zp.INSTANCES=new WeakMap;class da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new da(t,new Jn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new da(t,new Jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new I_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new I_(this.firestore,kR(this._delegate,e))}catch(t){throw xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof Jn&&RR(this._delegate,e)}set(e,t){t=d1("DocumentReference.set",t);try{return t?rM(this._delegate,e,t):rM(this._delegate,e)}catch(r){throw xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?iM(this._delegate,e):iM(this._delegate,e,t,...r)}catch(i){throw xs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function PF(n){return E_(cn(n.firestore,er),[new yl(n._key,hn.none())])}(this._delegate)}onSnapshot(...e){const t=fM(e),r=pM(e,i=>new vw(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return sM(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function AF(n){n=cn(n,Jn);const e=cn(n.firestore,er),t=qr(e),r=new Uh(e);return function WL(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const f=yield function(m,v){const C=Ke(m);return C.persistence.runTransaction("read document","readonly",A=>C.localDocuments.getDocument(A,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ne(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=g_(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield dT(n),e,t);var r})),t.promise}(t,n._key).then(i=>new qc(e,r,n._key,i,new Wp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function xF(n){n=cn(n,Jn);const e=cn(n.firestore,er);return FR(qr(e),n._key,{source:"server"}).then(t=>c1(e,n,t))}(this._delegate):function SF(n){n=cn(n,Jn);const e=cn(n.firestore,er);return FR(qr(e),n._key).then(t=>c1(e,n,t))}(this._delegate),t.then(r=>new vw(this.firestore,new qc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new da(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function xs(n,e,t){return n.message=n.message.replace(e,t),n}function fM(n){for(const e of n)if("object"==typeof e&&!h1(e))return e;return{}}function pM(n,e){var t,r;let i;return i=h1(n[0])?n[0]:h1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class vw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return nM(this._delegate,e._delegate)}}class ww extends vw{data(e){const t=this._delegate.data(e);return function jI(n,e){n||rt()}(void 0!==t),t}}class ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}where(e,t,r){try{return new ks(this.firestore,Lh(this._delegate,function _F(n,e,t){const r=e,i=_T("where",n);return mw._create(i,r,t)}(e,t,r)))}catch(i){throw xs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ks(this.firestore,Lh(this._delegate,function yF(n,e="asc"){const t=e,r=_T("orderBy",n);return u1._create(r,t)}(e,t)))}catch(r){throw xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ks(this.firestore,Lh(this._delegate,function vF(n){return DR("limit",n),yT._create("limit",n,"F")}(e)))}catch(t){throw xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ks(this.firestore,Lh(this._delegate,function wF(n){return DR("limitToLast",n),yT._create("limitToLast",n,"L")}(e)))}catch(t){throw xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ks(this.firestore,Lh(this._delegate,function EF(...n){return vT._create("startAt",n,!0)}(...e)))}catch(t){throw xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ks(this.firestore,Lh(this._delegate,function IF(...n){return vT._create("startAfter",n,!1)}(...e)))}catch(t){throw xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ks(this.firestore,Lh(this._delegate,function bF(...n){return wT._create("endBefore",n,!1)}(...e)))}catch(t){throw xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ks(this.firestore,Lh(this._delegate,function TF(...n){return wT._create("endAt",n,!0)}(...e)))}catch(t){throw xs(t,"endAt()","Query.endAt()")}}isEqual(e){return GA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function RF(n){n=cn(n,Yi);const e=cn(n.firestore,er),t=qr(e),r=new Uh(e);return function zL(n,e){const t=new $r;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(i,a,l){try{const f=yield uw(i,a,!0),m=new gR(a,f.Hi),v=m.Wu(f.documents),C=m.applyChanges(v,!1);l.resolve(C.snapshot)}catch(f){const m=g_(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield dT(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate):"server"===e?.source?function MF(n){n=cn(n,Yi);const e=cn(n.firestore,er),t=qr(e),r=new Uh(e);return UR(t,n._query,{source:"server"}).then(i=>new Fh(e,r,n,i))}(this._delegate):function kF(n){n=cn(n,Yi);const e=cn(n.firestore,er),t=qr(e),r=new Uh(e);return KR(n._query),UR(t,n._query).then(i=>new Fh(e,r,n,i))}(this._delegate),t.then(r=>new f1(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=fM(e),r=pM(e,i=>new f1(this.firestore,new Fh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return sM(this._delegate,t,r)}withConverter(e){return new ks(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}class KF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ww(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class f1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ww(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new KF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ww(this._firestore,r))})}isEqual(e){return nM(this._delegate,e._delegate)}}class I_ extends ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new da(this.firestore,e):null}doc(e){try{return new da(this.firestore,void 0===e?uT(this._delegate):uT(this._delegate,e))}catch(t){throw xs(t,"doc()","CollectionReference.doc()")}}add(e){return function NF(n,e){const t=cn(n.firestore,er),r=uT(n),i=ET(n.converter,e);return E_(t,[pT(qp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,hn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new da(this.firestore,t))}isEqual(e){return RR(this._delegate,e._delegate)}withConverter(e){return new I_(this.firestore,this._delegate.withConverter(e?zp.getInstance(this.firestore,e):null))}}function Kp(n){return cn(n,Jn)}class p1{constructor(...e){this._delegate=new Hc(...e)}static documentId(){return new p1(or.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Hc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Yp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function BF(){return new n1("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Yp(e)}static delete(){const e=function VF(){return new fw("deleteField")}();return e._methodName="FieldValue.delete",new Yp(e)}static arrayUnion(...e){const t=function ZF(...n){return new hF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Yp(t)}static arrayRemove(...e){const t=function jF(...n){return new fF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Yp(t)}static increment(e){const t=function $F(n){return new pF("increment",n)}(e);return t._methodName="FieldValue.increment",new Yp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const YF={Firestore:cM,GeoPoint:hT,Timestamp:Sn,Blob:yw,Transaction:dM,WriteBatch:hM,DocumentReference:da,DocumentSnapshot:vw,Query:ks,QueryDocumentSnapshot:ww,QuerySnapshot:f1,CollectionReference:I_,FieldPath:p1,FieldValue:Yp,setLogLevel:function zF(n){!function ZI(n){za.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function XF(n){(function QF(n,e){n.INTERNAL.registerComponent(new Is.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},YF)))})(n,(e,t)=>new cM(e,t,new WF)),n.registerVersion("@firebase/firestore-compat","0.3.0")}(Qg.Z);var g1=F(6451),bT=F(5363),JF=F(6063);class e2 extends zs.x{constructor(e=1/0,t=1/0,r=JF.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var gM=F(3099);function mM(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,gM.B)({connector:()=>new e2(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function _M(n,e){return(0,bo.m)(e)?ir(()=>n,e):ir(()=>n)}var m1=F(9468);F(259);const y1=new Map,vM={activated:!1,tokenObservers:[]},s2={initialized:!1,enabled:!1};function Qi(n){return y1.get(n)||Object.assign({},vM)}function CT(){return s2}class d2{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function h2(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Rs=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function EM(n){if(!Qi(n).activated)throw Rs.create("use-before-activation",{appName:n.name})}function E1(n,e){return I1.apply(this,arguments)}function I1(){return I1=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const A=yield i.getHeartbeatsHeader();A&&(r["X-Firebase-Client"]=A)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,f;try{l=yield fetch(n,a)}catch(A){throw Rs.create("fetch-network-error",{originalErrorMessage:A?.message})}if(200!==l.status)throw Rs.create("fetch-status-error",{httpStatus:l.status});try{f=yield l.json()}catch(A){throw Rs.create("fetch-parse-error",{originalErrorMessage:A?.message})}const m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Rs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const v=1e3*Number(m[1]),C=Date.now();return{token:f.token,expireTimeMillis:C+v,issuedAtTimeMillis:C}}),I1.apply(this,arguments)}function m2(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Ew="firebase-app-check-store";let AT=null;function bM(){return AT||(AT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Rs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Ew,{keyPath:"compositeKey"})}}catch(t){e(Rs.create("storage-open",{originalErrorMessage:t?.message}))}}),AT)}function b1(){return b1=(0,ye.Z)(function*(n,e){const r=(yield bM()).transaction(Ew,"readwrite"),a=r.objectStore(Ew).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(Rs.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),b1.apply(this,arguments)}const Iw=new Pi.Yd("@firebase/app-check");function D1(n,e){return(0,L.hl)()?function w2(n,e){return function TM(n,e){return b1.apply(this,arguments)}(function DM(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Iw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SM(){return CT().enabled}function AM(){return A1.apply(this,arguments)}function A1(){return A1=(0,ye.Z)(function*(){const n=CT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),A1.apply(this,arguments)}const D2={error:"UNKNOWN_ERROR"};function S2(n){return L.US.encodeString(JSON.stringify(n),!1)}function xT(n){return x1.apply(this,arguments)}function x1(){return x1=(0,ye.Z)(function*(n,e=!1){const t=n.app;EM(t);const r=Qi(t);let a,i=r.token;if(i&&!b_(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(b_(m)?i=m:yield D1(t,void 0))}if(!e&&i&&b_(i))return{token:i.token};let f,l=!1;if(SM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=E1(m2(t,yield AM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield D1(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield Qi(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Iw.warn(m.message):Iw.error(m),a=m}return i?a?f=b_(i)?{token:i.token,internalError:a}:RM(a):(f={token:i.token},r.token=i,yield D1(t,i)):f=RM(a),l&&kM(t,f),f}),x1.apply(this,arguments)}function R1(n,e){const t=Qi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function xM(n){const{app:e}=n,t=Qi(e);let r=t.tokenRefresher;r||(r=function A2(n){const{app:e}=n;return new d2((0,ye.Z)(function*(){let r;if(r=Qi(e).token?yield xT(n,!0):yield xT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Qi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function kM(n,e){const t=Qi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function b_(n){return n.expireTimeMillis-Date.now()>0}function RM(n){return{token:S2(D2),error:n}}class x2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Qi(this.app);for(const t of e)R1(this.app,t.next);return Promise.resolve()}}const VM="app-check-internal";!function $2(){(0,Jr._registerComponent)(new Is.wA("app-check",n=>function k2(n,e){return new x2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(VM).initialize()})),(0,Jr._registerComponent)(new Is.wA(VM,n=>function R2(n){return{getToken:e=>xT(n,e),addTokenListener:e=>function k1(n,e,t,r){const{app:i}=n,a=Qi(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&b_(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),xM(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>xM(n))}(n,"INTERNAL",e),removeTokenListener:e=>R1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Jr.registerVersion)("@firebase/app-check","0.6.0")}();class bw{constructor(){return(0,ln.vb)("app-check")}}typeof window<"u"&&window;var RT=F(9260);const L1=new c.OlP("angularfire2.auth.use-emulator"),F1=new c.OlP("angularfire2.auth.settings"),U1=new c.OlP("angularfire2.auth.tenant-id"),V1=new c.OlP("angularfire2.auth.langugage-code"),B1=new c.OlP("angularfire2.auth.use-device-language"),Z1=new c.OlP("angularfire.auth.persistence"),j1=(n,e,t,r,i,a,l,f)=>(0,vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,C]of Object.entries(l))m.settings[v]=C;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let Tw=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,A,P,j){const z=new zs.x,ge=ze(void 0).pipe((0,bT.Q)(l.outsideAngular),ir(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,9568)))),(0,b.U)(()=>(0,vr.on)(t,a,r)),(0,b.U)(Ee=>j1(Ee,a,f,v,C,A,m,P)),mM({bufferSize:1,refCount:!1}));if(ya(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ze(null);else{ge.pipe(Es()).subscribe();const dt=ge.pipe(ir(ht=>ht.getRedirectResult().then(kt=>kt,()=>null)),ln.iC,mM({bufferSize:1,refCount:!1})),Et=ge.pipe(ir(ht=>new Ri.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ht.onAuthStateChanged($t=>kt.next($t),$t=>kt.error($t),()=>kt.complete()))})))),ot=ge.pipe(ir(ht=>new Ri.y(kt=>({unsubscribe:a.runOutsideAngular(()=>ht.onIdTokenChanged($t=>kt.next($t),$t=>kt.error($t),()=>kt.complete()))}))));this.authState=dt.pipe(_M(Et),(0,m1.R)(l.outsideAngular),(0,bT.Q)(l.insideAngular)),this.user=dt.pipe(_M(ot),(0,m1.R)(l.outsideAngular),(0,bT.Q)(l.insideAngular)),this.idToken=this.user.pipe(ir(ht=>ht?(0,Vt.D)(ht.getIdToken()):ze(null))),this.idTokenResult=this.user.pipe(ir(ht=>ht?(0,Vt.D)(ht.getIdTokenResult()):ze(null))),this.credential=(0,g1.T)(dt,z,this.authState.pipe(ss(ht=>!ht))).pipe((0,b.U)(ht=>ht?.user?ht:null),(0,m1.R)(l.outsideAngular),(0,bT.Q)(l.insideAngular))}return(0,vr.pX)(this,ge,a,{spy:{apply:(Ee,dt,Et)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&Et.then(ot=>z.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ln.HU),c.LFG(L1,8),c.LFG(F1,8),c.LFG(U1,8),c.LFG(V1,8),c.LFG(B1,8),c.LFG(Z1,8),c.LFG(bw,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),K2=(()=>{class n{constructor(){RT.Z.registerVersion("angularfire",ln.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Tw]}),n})();function ZM(n,e){return function Y2(n,e=mc.z){return new Ri.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function $1(n,e){return ZM(n,e).pipe((0,b.U)(t=>({payload:t,type:"query"})))}function MT(n,e){return $1(n,e).pipe(yd(void 0),Zd(),(0,b.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(C=>C.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function jM(n,e,t){return MT(n,t).pipe(ta((r,i)=>function X2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function J2(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return H1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return H1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return H1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Gy(),(0,b.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function H1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $M(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=MT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,b.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(yd(void 0),Zd(),ss(([r,i])=>i.length>0||!r),(0,b.U)(([r,i])=>i),ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$M(e);return jM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return $1(this.query,this.afs.schedulers.outsideAngular).pipe((0,b.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ln.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(ln.iC)}add(e){return this.ref.add(e)}doc(e){return new qM(this.ref.doc(e),this.afs)}}class qM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=zM(r,t);return new HM(i,a,this.afs)}snapshotChanges(){return function Q2(n,e){return ZM(n,e).pipe(yd(void 0),Zd(),(0,b.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,b.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Vt.D)(this.ref.get(e)).pipe(ln.iC)}}class eU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?MT(this.query,this.afs.schedulers.outsideAngular).pipe((0,b.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ss(t=>t.length>0),ln.iC):MT(this.query,this.afs.schedulers.outsideAngular).pipe(ln.iC)}auditTrail(e){return this.stateChanges(e).pipe(ta((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$M(e);return jM(this.query,t,this.afs.schedulers.outsideAngular).pipe(ln.iC)}valueChanges(e={}){return $1(this.query,this.afs.schedulers.outsideAngular).pipe((0,b.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ln.iC)}get(e){return(0,Vt.D)(this.query.get(e)).pipe(ln.iC)}}const GM=new c.OlP("angularfire2.enableFirestorePersistence"),WM=new c.OlP("angularfire2.firestore.persistenceSettings"),tU=new c.OlP("angularfire2.firestore.settings"),nU=new c.OlP("angularfire2.firestore.use-emulator");function zM(n,e=(t=>t)){return{query:e(n),ref:n}}let KM=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,A,P,j,z,ge,Ee,dt,Et){this.schedulers=m;const ot=(0,vr.on)(t,f,r),ht=C;A&&j1(ot,f,P,z,ge,Ee,j,dt),[this.firestore,this.persistenceEnabled$]=(0,vr.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const kt=f.runOutsideAngular(()=>ot.firestore());if(a&&kt.settings(a),ht&&kt.useEmulator(...ht),i&&!ya(l)){const $t=()=>{try{return(0,Vt.D)(kt.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(Cr){return typeof console<"u"&&console.warn(Cr),ze(!1)}};return[kt,f.runOutsideAngular($t)]}return[kt,ze(!1)]},[a,ht,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=zM(i,r),f=this.schedulers.ngZone.run(()=>a);return new HM(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new eU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qM(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(GM,8),c.LFG(tU,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ln.HU),c.LFG(WM,8),c.LFG(nU,8),c.LFG(Tw,8),c.LFG(L1,8),c.LFG(F1,8),c.LFG(U1,8),c.LFG(V1,8),c.LFG(B1,8),c.LFG(Z1,8),c.LFG(bw,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),rU=(()=>{class n{constructor(){RT.Z.registerVersion("angularfire",ln.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:GM,useValue:!0},{provide:WM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[KM]}),n})();class su{constructor(e,t,r,i){this.afs=e,this.afAuth=t,this.router=r,this.ngZone=i,this.afAuth.authState.subscribe(a=>{a?(this.userData=a,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,t){return this.afAuth.signInWithEmailAndPassword(e,t).then(r=>{this.SetUserData(r.user),this.afAuth.authState.subscribe(i=>{i&&this.router.navigate(["Home"])})}).catch(r=>{window.alert(r.message)})}SignUp(e,t){return this.afAuth.createUserWithEmailAndPassword(e,t).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verifyemailaddress"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(t=>{window.alert(t)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new ED.Q).then(e=>{this.router.navigate(["Home"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(t=>{this.router.navigate(["Home"]),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["SignIn"])})}}su.\u0275fac=function(e){return new(e||su)(c.LFG(KM),c.LFG(Tw),c.LFG(pi),c.LFG(c.R0b))},su.\u0275prov=c.Yz7({token:su,factory:su.\u0275fac,providedIn:"root"});class Cw{constructor(e){this.authservice=e}}Cw.\u0275fac=function(e){return new(e||Cw)(c.Y36(su))},Cw.\u0275cmp=c.Xpm({type:Cw,selectors:[["app-sign-in"]],decls:184,vars:0,consts:[[1,"nk-content"],[1,"nk-split","nk-split-page","nk-split-lg"],[1,"nk-split-content","nk-block-area","nk-block-area-column","nk-auth-container","bg-white"],[1,"absolute-top-right","d-lg-none","p-3","p-sm-5"],["href","#","data-target","athPromo",1,"toggle","btn-white","btn","btn-icon","btn-light"],[1,"icon","ni","ni-info"],[1,"nk-block","nk-block-middle","nk-auth-body"],[1,"brand-logo","pb-5"],["href","/demo3/index.html",1,"logo-link"],["src","images/logo.png","srcset","images/logo2x.png 2x","alt","logo",1,"logo-light","logo-img","logo-img-lg"],["src","images/logo-dark.png","srcset","images/logo-dark2x.png 2x","alt","logo-dark",1,"logo-dark","logo-img","logo-img-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],["novalidate","novalidate",1,"form-validate","is-alter"],[1,"form-group"],[1,"form-label-group"],["for","email-address",1,"form-label"],["tabindex","-1","href","#",1,"link","link-primary","link-sm"],[1,"form-control-wrap"],["autocomplete","off","type","text","required","","id","email-address","placeholder","Enter your email address or username","name","userEmail",1,"form-control","form-control-lg"],["userName",""],["for","password",1,"form-label"],["tabindex","-1","href","/demo3/pages/auths/auth-reset.html",1,"link","link-primary","link-sm"],["tabindex","-1","href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["autocomplete","new-password","type","password","required","","id","password","placeholder","Enter your passcode","name","userPass",1,"form-control","form-control-lg"],["userPassword",""],["type","button",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","pt-4"],["href","#","routerLink","/SignUp"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-4"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"nav-link",3,"click"],[1,"text-center","mt-5"],[1,"fw-500"],["href","#"],[1,"nk-block","nk-auth-footer"],[1,"nk-block-between"],[1,"nav","nav-sm"],[1,"nav-item","dropup","active","current-page"],["data-bs-toggle","dropdown","data-offset","0,10",1,"dropdown-toggle","dropdown-indicator","has-indicator","nav-link"],[1,"dropdown-menu","dropdown-menu-sm","dropdown-menu-end"],[1,"language-list"],["href","#",1,"language-item"],["src","images/flags/english.png","alt","",1,"language-flag"],[1,"language-name"],["src","images/flags/spanish.png","alt","",1,"language-flag"],["src","images/flags/french.png","alt","",1,"language-flag"],["src","images/flags/turkey.png","alt","",1,"language-flag"],[1,"mt-3"],["data-toggle-body","true","data-content","athPromo","data-toggle-screen","lg","data-toggle-overlay","true",1,"nk-split-content","nk-split-stretch","bg-lighter","d-flex","toggle-break-lg","toggle-slide","toggle-slide-right","toggle-screen-lg"],[1,"slider-wrap","w-100","w-max-550px","p-3","p-sm-5","m-auto"],["data-slick",'{"dots":true, "arrows":false}',1,"slider-init","slick-initialized","slick-slider","slick-dotted"],[1,"slick-list","draggable"],[1,"slick-track",2,"opacity","1","width","3234px","transform","translate3d(-462px, 0px, 0px)"],["data-slick-index","-1","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],[1,"nk-feature","nk-feature-center"],[1,"nk-feature-img"],["src","images/slides/promo-c.png","srcset","images/slides/promo-c2x.png 2x","alt","",1,"round"],[1,"nk-feature-content","py-4","p-sm-5"],["data-slick-index","0","aria-hidden","false","tabindex","0","role","tabpanel","id","slick-slide00","aria-describedby","slick-slide-control00",1,"slider-item","slick-slide","slick-current","slick-active",2,"width","462px"],["src","images/slides/promo-a.png","srcset","images/slides/promo-a2x.png 2x","alt","",1,"round"],["data-slick-index","1","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide01","aria-describedby","slick-slide-control01",1,"slider-item","slick-slide",2,"width","462px"],["src","images/slides/promo-b.png","srcset","images/slides/promo-b2x.png 2x","alt","",1,"round"],["data-slick-index","2","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide02","aria-describedby","slick-slide-control02",1,"slider-item","slick-slide",2,"width","462px"],["data-slick-index","3","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","4","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","5","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["role","tablist",1,"slick-dots"],["role","presentation",1,"slick-active"],["type","button","role","tab","id","slick-slide-control00","aria-controls","slick-slide00","aria-label","1 of 3","tabindex","0","aria-selected","true"],["role","presentation"],["type","button","role","tab","id","slick-slide-control01","aria-controls","slick-slide01","aria-label","2 of 3","tabindex","-1"],["type","button","role","tab","id","slick-slide-control02","aria-controls","slick-slide02","aria-label","3 of 3","tabindex","-1"],[1,"slider-dots"],[1,"slider-arrows"]],template:function(e,t){if(1&e){const r=c.EpF();c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),c._UZ(5,"em",5),c.qZA()(),c.TgZ(6,"div",6)(7,"div",7)(8,"a",8),c._UZ(9,"img",9)(10,"img",10),c.qZA()(),c.TgZ(11,"div",11)(12,"div",12)(13,"h5",13),c._uU(14,"Sign-In"),c.qZA(),c.TgZ(15,"div",14)(16,"p"),c._uU(17,"Access the DashLite panel using your email and passcode."),c.qZA()()()(),c.TgZ(18,"div",15)(19,"div",16)(20,"div",17)(21,"label",18),c._uU(22,"Email or Username"),c.qZA(),c.TgZ(23,"a",19),c._uU(24,"Need Help?"),c.qZA()(),c.TgZ(25,"div",20),c._UZ(26,"input",21,22),c.qZA()(),c.TgZ(28,"div",16)(29,"div",17)(30,"label",23),c._uU(31,"Passcode"),c.qZA(),c.TgZ(32,"a",24),c._uU(33,"Forgot Code?"),c.qZA()(),c.TgZ(34,"div",20)(35,"a",25),c._UZ(36,"em",26)(37,"em",27),c.qZA(),c._UZ(38,"input",28,29),c.qZA()(),c.TgZ(40,"div",16)(41,"button",30),c.NdJ("click",function(){c.CHM(r);const a=c.MAs(27),l=c.MAs(39);return c.KtG(t.authservice.SignIn(a.value,l.value))}),c._uU(42,"Sign in"),c.qZA()()(),c.TgZ(43,"div",31),c._uU(44," New on our platform? "),c.TgZ(45,"a",32),c._uU(46,"Create an account"),c.qZA()(),c.TgZ(47,"div",33)(48,"h6",34)(49,"span"),c._uU(50,"OR"),c.qZA()()(),c.TgZ(51,"ul",35)(52,"li",36)(53,"a",37),c._uU(54,"Facebook"),c.qZA()(),c.TgZ(55,"li",36)(56,"a",38),c.NdJ("click",function(){return t.authservice.GoogleAuth()}),c._uU(57,"Google"),c.qZA()()(),c.TgZ(58,"div",39)(59,"span",40),c._uU(60,"I don't have an account? "),c.TgZ(61,"a",41),c._uU(62,"Try 15 days free"),c.qZA()()()(),c.TgZ(63,"div",42)(64,"div",43)(65,"ul",44)(66,"li",36)(67,"a",37),c._uU(68,"Terms & Condition"),c.qZA()(),c.TgZ(69,"li",36)(70,"a",37),c._uU(71,"Privacy Policy"),c.qZA()(),c.TgZ(72,"li",36)(73,"a",37),c._uU(74,"Help"),c.qZA()(),c.TgZ(75,"li",45)(76,"a",46)(77,"small"),c._uU(78,"English"),c.qZA()(),c.TgZ(79,"div",47)(80,"ul",48)(81,"li")(82,"a",49),c._UZ(83,"img",50),c.TgZ(84,"span",51),c._uU(85,"English"),c.qZA()()(),c.TgZ(86,"li")(87,"a",49),c._UZ(88,"img",52),c.TgZ(89,"span",51),c._uU(90,"Espa\xf1ol"),c.qZA()()(),c.TgZ(91,"li")(92,"a",49),c._UZ(93,"img",53),c.TgZ(94,"span",51),c._uU(95,"Fran\xe7ais"),c.qZA()()(),c.TgZ(96,"li")(97,"a",49),c._UZ(98,"img",54),c.TgZ(99,"span",51),c._uU(100,"T\xfcrk\xe7e"),c.qZA()()()()()()()(),c.TgZ(101,"div",55)(102,"p"),c._uU(103,"\xa9 2022 DashLite. All Rights Reserved."),c.qZA()()()(),c.TgZ(104,"div",56)(105,"div",57)(106,"div",58)(107,"div",59)(108,"div",60)(109,"div",61)(110,"div",62)(111,"div",63),c._UZ(112,"img",64),c.qZA(),c.TgZ(113,"div",65)(114,"h4"),c._uU(115,"Dashlite"),c.qZA(),c.TgZ(116,"p"),c._uU(117,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(118,"div",66)(119,"div",62)(120,"div",63),c._UZ(121,"img",67),c.qZA(),c.TgZ(122,"div",65)(123,"h4"),c._uU(124,"Dashlite"),c.qZA(),c.TgZ(125,"p"),c._uU(126,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(127,"div",68)(128,"div",62)(129,"div",63),c._UZ(130,"img",69),c.qZA(),c.TgZ(131,"div",65)(132,"h4"),c._uU(133,"Dashlite"),c.qZA(),c.TgZ(134,"p"),c._uU(135,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(136,"div",70)(137,"div",62)(138,"div",63),c._UZ(139,"img",64),c.qZA(),c.TgZ(140,"div",65)(141,"h4"),c._uU(142,"Dashlite"),c.qZA(),c.TgZ(143,"p"),c._uU(144,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(145,"div",71)(146,"div",62)(147,"div",63),c._UZ(148,"img",67),c.qZA(),c.TgZ(149,"div",65)(150,"h4"),c._uU(151,"Dashlite"),c.qZA(),c.TgZ(152,"p"),c._uU(153,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(154,"div",72)(155,"div",62)(156,"div",63),c._UZ(157,"img",69),c.qZA(),c.TgZ(158,"div",65)(159,"h4"),c._uU(160,"Dashlite"),c.qZA(),c.TgZ(161,"p"),c._uU(162,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(163,"div",73)(164,"div",62)(165,"div",63),c._UZ(166,"img",64),c.qZA(),c.TgZ(167,"div",65)(168,"h4"),c._uU(169,"Dashlite"),c.qZA(),c.TgZ(170,"p"),c._uU(171,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()()()(),c.TgZ(172,"ul",74)(173,"li",75)(174,"button",76),c._uU(175,"1"),c.qZA()(),c.TgZ(176,"li",77)(177,"button",78),c._uU(178,"2"),c.qZA()(),c.TgZ(179,"li",77)(180,"button",79),c._uU(181,"3"),c.qZA()()()(),c._UZ(182,"div",80)(183,"div",81),c.qZA()()()()}},dependencies:[Xu]});class Dw{constructor(e){this.authservice=e}}function iU(n,e){if(1&n&&(c.TgZ(0,"div",36)(1,"p",37),c._uU(2,"We have sent a confirmation email to "),c.TgZ(3,"strong"),c._uU(4),c.qZA(),c._uU(5,"."),c.qZA(),c.TgZ(6,"p",37),c._uU(7,"Please check your email and click on the link to verfiy your email address."),c.qZA()()),2&n){const t=e.ngIf;c.xp6(4),c.Oqu(t.email)}}Dw.\u0275fac=function(e){return new(e||Dw)(c.Y36(su))},Dw.\u0275cmp=c.Xpm({type:Dw,selectors:[["app-sign-up"]],decls:184,vars:0,consts:[[1,"nk-content"],[1,"nk-split","nk-split-page","nk-split-lg"],[1,"nk-split-content","nk-block-area","nk-block-area-column","nk-auth-container","bg-white","w-lg-45"],[1,"absolute-top-right","d-lg-none","p-3","p-sm-5"],["href","#","data-target","athPromo",1,"toggle","btn","btn-white","btn-icon","btn-light"],[1,"icon","ni","ni-info"],[1,"nk-block","nk-block-middle","nk-auth-body"],[1,"brand-logo","pb-5"],["href","/demo3/index.html",1,"logo-link"],["src","images/logo.png","srcset","images/logo2x.png 2x","alt","logo",1,"logo-light","logo-img","logo-img-lg"],["src","images/logo-dark.png","srcset","images/logo-dark2x.png 2x","alt","logo-dark",1,"logo-dark","logo-img","logo-img-lg"],[1,"nk-block-head"],[1,"nk-block-head-content"],[1,"nk-block-title"],[1,"nk-block-des"],[1,"form-group"],["for","email",1,"form-label"],[1,"form-control-wrap"],["type","text","name","userEmail","id","email","placeholder","Enter your email address or username",1,"form-control","form-control-lg"],["userEmail",""],["for","password",1,"form-label"],["tabindex","-1","href","#","data-target","password",1,"form-icon","form-icon-right","passcode-switch","lg"],[1,"passcode-icon","icon-show","icon","ni","ni-eye"],[1,"passcode-icon","icon-hide","icon","ni","ni-eye-off"],["type","password","id","password","placeholder","Enter your passcode","name","userPass",1,"form-control","form-control-lg"],["userPassword",""],[1,"custom-control","custom-control-xs","custom-checkbox"],["type","checkbox","id","checkbox",1,"custom-control-input"],["for","checkbox",1,"custom-control-label"],["tabindex","-1","href","#"],["type","button",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],[1,"form-note-s2","pt-4"],["href","#","routerLink","/SignIn"],[1,"text-center","pt-4","pb-3"],[1,"overline-title","overline-title-sap"],[1,"nav","justify-center","gx-8"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"nav-link",3,"click"],[1,"nk-block","nk-auth-footer"],[1,"nk-block-between"],[1,"nav","nav-sm"],[1,"nav-item","dropup","active","current-page"],["data-bs-toggle","dropdown","data-offset","0,10",1,"dropdown-toggle","dropdown-indicator","has-indicator","nav-link"],[1,"dropdown-menu","dropdown-menu-sm","dropdown-menu-end"],[1,"language-list"],["href","#",1,"language-item"],["src","images/flags/english.png","alt","",1,"language-flag"],[1,"language-name"],["src","images/flags/spanish.png","alt","",1,"language-flag"],["src","images/flags/french.png","alt","",1,"language-flag"],["src","images/flags/turkey.png","alt","",1,"language-flag"],[1,"mt-3"],["data-toggle-body","true","data-content","athPromo","data-toggle-screen","lg","data-toggle-overlay","true",1,"nk-split-content","nk-split-stretch","bg-lighter","d-flex","toggle-break-lg","toggle-slide","toggle-slide-right","toggle-screen-lg"],[1,"slider-wrap","w-100","w-max-550px","p-3","p-sm-5","m-auto"],["data-slick",'{"dots":true, "arrows":false}',1,"slider-init","slick-initialized","slick-slider","slick-dotted"],[1,"slick-list","draggable"],[1,"slick-track",2,"opacity","1","width","3234px","transform","translate3d(-462px, 0px, 0px)"],["data-slick-index","-1","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],[1,"nk-feature","nk-feature-center"],[1,"nk-feature-img"],["src","images/slides/promo-c.png","srcset","images/slides/promo-c2x.png 2x","alt","",1,"round"],[1,"nk-feature-content","py-4","p-sm-5"],["data-slick-index","0","aria-hidden","false","tabindex","0","role","tabpanel","id","slick-slide00","aria-describedby","slick-slide-control00",1,"slider-item","slick-slide","slick-current","slick-active",2,"width","462px"],["src","images/slides/promo-a.png","srcset","images/slides/promo-a2x.png 2x","alt","",1,"round"],["data-slick-index","1","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide01","aria-describedby","slick-slide-control01",1,"slider-item","slick-slide",2,"width","462px"],["src","images/slides/promo-b.png","srcset","images/slides/promo-b2x.png 2x","alt","",1,"round"],["data-slick-index","2","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide02","aria-describedby","slick-slide-control02",1,"slider-item","slick-slide",2,"width","462px"],["data-slick-index","3","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","4","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","5","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["role","tablist",1,"slick-dots"],["role","presentation",1,"slick-active"],["type","button","role","tab","id","slick-slide-control00","aria-controls","slick-slide00","aria-label","1 of 3","tabindex","0","aria-selected","true"],["role","presentation"],["type","button","role","tab","id","slick-slide-control01","aria-controls","slick-slide01","aria-label","2 of 3","tabindex","-1"],["type","button","role","tab","id","slick-slide-control02","aria-controls","slick-slide02","aria-label","3 of 3","tabindex","-1"],[1,"slider-dots"],[1,"slider-arrows"]],template:function(e,t){if(1&e){const r=c.EpF();c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),c._UZ(5,"em",5),c.qZA()(),c.TgZ(6,"div",6)(7,"div",7)(8,"a",8),c._UZ(9,"img",9)(10,"img",10),c.qZA()(),c.TgZ(11,"div",11)(12,"div",12)(13,"h5",13),c._uU(14,"Register"),c.qZA(),c.TgZ(15,"div",14)(16,"p"),c._uU(17,"Create New Dashlite Account"),c.qZA()()()(),c.TgZ(18,"div")(19,"div",15)(20,"label",16),c._uU(21,"Email or Username"),c.qZA(),c.TgZ(22,"div",17),c._UZ(23,"input",18,19),c.qZA()(),c.TgZ(25,"div",15)(26,"label",20),c._uU(27,"Passcode"),c.qZA(),c.TgZ(28,"div",17)(29,"a",21),c._UZ(30,"em",22)(31,"em",23),c.qZA(),c._UZ(32,"input",24,25),c.qZA()(),c.TgZ(34,"div",15)(35,"div",26),c._UZ(36,"input",27),c.TgZ(37,"label",28),c._uU(38,"I agree to Dashlite "),c.TgZ(39,"a",29),c._uU(40,"Privacy Policy"),c.qZA(),c._uU(41," & "),c.TgZ(42,"a",29),c._uU(43," Terms."),c.qZA()()()(),c.TgZ(44,"div",15)(45,"button",30),c.NdJ("click",function(){c.CHM(r);const a=c.MAs(24),l=c.MAs(33);return c.KtG(t.authservice.SignUp(a.value,l.value))}),c._uU(46,"Register"),c.qZA()()(),c.TgZ(47,"div",31),c._uU(48," Already have an account ? "),c.TgZ(49,"a",32)(50,"strong"),c._uU(51,"Sign in instead"),c.qZA()()(),c.TgZ(52,"div",33)(53,"h6",34)(54,"span"),c._uU(55,"OR"),c.qZA()()(),c.TgZ(56,"ul",35)(57,"li",36)(58,"a",37),c._uU(59,"Facebook"),c.qZA()(),c.TgZ(60,"li",36)(61,"a",38),c.NdJ("click",function(){return t.authservice.GoogleAuth()}),c._uU(62,"Google"),c.qZA()()()(),c.TgZ(63,"div",39)(64,"div",40)(65,"ul",41)(66,"li",36)(67,"a",37),c._uU(68,"Terms & Condition"),c.qZA()(),c.TgZ(69,"li",36)(70,"a",37),c._uU(71,"Privacy Policy"),c.qZA()(),c.TgZ(72,"li",36)(73,"a",37),c._uU(74,"Help"),c.qZA()(),c.TgZ(75,"li",42)(76,"a",43)(77,"small"),c._uU(78,"English"),c.qZA()(),c.TgZ(79,"div",44)(80,"ul",45)(81,"li")(82,"a",46),c._UZ(83,"img",47),c.TgZ(84,"span",48),c._uU(85,"English"),c.qZA()()(),c.TgZ(86,"li")(87,"a",46),c._UZ(88,"img",49),c.TgZ(89,"span",48),c._uU(90,"Espa\xf1ol"),c.qZA()()(),c.TgZ(91,"li")(92,"a",46),c._UZ(93,"img",50),c.TgZ(94,"span",48),c._uU(95,"Fran\xe7ais"),c.qZA()()(),c.TgZ(96,"li")(97,"a",46),c._UZ(98,"img",51),c.TgZ(99,"span",48),c._uU(100,"T\xfcrk\xe7e"),c.qZA()()()()()()()(),c.TgZ(101,"div",52)(102,"p"),c._uU(103,"\xa9 2022 DashLite. All Rights Reserved."),c.qZA()()()(),c.TgZ(104,"div",53)(105,"div",54)(106,"div",55)(107,"div",56)(108,"div",57)(109,"div",58)(110,"div",59)(111,"div",60),c._UZ(112,"img",61),c.qZA(),c.TgZ(113,"div",62)(114,"h4"),c._uU(115,"Dashlite"),c.qZA(),c.TgZ(116,"p"),c._uU(117,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(118,"div",63)(119,"div",59)(120,"div",60),c._UZ(121,"img",64),c.qZA(),c.TgZ(122,"div",62)(123,"h4"),c._uU(124,"Dashlite"),c.qZA(),c.TgZ(125,"p"),c._uU(126,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(127,"div",65)(128,"div",59)(129,"div",60),c._UZ(130,"img",66),c.qZA(),c.TgZ(131,"div",62)(132,"h4"),c._uU(133,"Dashlite"),c.qZA(),c.TgZ(134,"p"),c._uU(135,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(136,"div",67)(137,"div",59)(138,"div",60),c._UZ(139,"img",61),c.qZA(),c.TgZ(140,"div",62)(141,"h4"),c._uU(142,"Dashlite"),c.qZA(),c.TgZ(143,"p"),c._uU(144,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(145,"div",68)(146,"div",59)(147,"div",60),c._UZ(148,"img",64),c.qZA(),c.TgZ(149,"div",62)(150,"h4"),c._uU(151,"Dashlite"),c.qZA(),c.TgZ(152,"p"),c._uU(153,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(154,"div",69)(155,"div",59)(156,"div",60),c._UZ(157,"img",66),c.qZA(),c.TgZ(158,"div",62)(159,"h4"),c._uU(160,"Dashlite"),c.qZA(),c.TgZ(161,"p"),c._uU(162,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(163,"div",70)(164,"div",59)(165,"div",60),c._UZ(166,"img",61),c.qZA(),c.TgZ(167,"div",62)(168,"h4"),c._uU(169,"Dashlite"),c.qZA(),c.TgZ(170,"p"),c._uU(171,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()()()(),c.TgZ(172,"ul",71)(173,"li",72)(174,"button",73),c._uU(175,"1"),c.qZA()(),c.TgZ(176,"li",74)(177,"button",75),c._uU(178,"2"),c.qZA()(),c.TgZ(179,"li",74)(180,"button",76),c._uU(181,"3"),c.qZA()()()(),c._UZ(182,"div",77)(183,"div",78),c.qZA()()()()}},dependencies:[Xu]});class Sw{constructor(e){this.authService=e}}Sw.\u0275fac=function(e){return new(e||Sw)(c.Y36(su))},Sw.\u0275cmp=c.Xpm({type:Sw,selectors:[["app-verifyemail"]],decls:96,vars:1,consts:[[1,"nk-content"],[1,"nk-split","nk-split-page","nk-split-lg"],[1,"nk-split-content","nk-block-area","nk-block-area-column","nk-auth-container","bg-white"],[1,"nk-block","nk-block-middle","nk-auth-body"],["class","formGroup",4,"ngIf"],[1,"d-flex"],["type","button",1,"btn","btn-primary","me-1",3,"click"],[1,"fas","fa-redo-alt"],[1,"btn","btn-primary"],["routerLink","/SignIn",1,"redirect"],["data-toggle-body","true","data-content","athPromo","data-toggle-screen","lg","data-toggle-overlay","true",1,"nk-split-content","nk-split-stretch","bg-lighter","d-flex","toggle-break-lg","toggle-slide","toggle-slide-right","toggle-screen-lg"],[1,"slider-wrap","w-100","w-max-550px","p-3","p-sm-5","m-auto"],["data-slick",'{"dots":true, "arrows":false}',1,"slider-init","slick-initialized","slick-slider","slick-dotted"],[1,"slick-list","draggable"],[1,"slick-track",2,"opacity","1","width","3234px","transform","translate3d(-462px, 0px, 0px)"],["data-slick-index","-1","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],[1,"nk-feature","nk-feature-center"],[1,"nk-feature-img"],["src","images/slides/promo-c.png","srcset","images/slides/promo-c2x.png 2x","alt","",1,"round"],[1,"nk-feature-content","py-4","p-sm-5"],["data-slick-index","0","aria-hidden","false","tabindex","0","role","tabpanel","id","slick-slide00","aria-describedby","slick-slide-control00",1,"slider-item","slick-slide","slick-current","slick-active",2,"width","462px"],["src","images/slides/promo-a.png","srcset","images/slides/promo-a2x.png 2x","alt","",1,"round"],["data-slick-index","1","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide01","aria-describedby","slick-slide-control01",1,"slider-item","slick-slide",2,"width","462px"],["src","images/slides/promo-b.png","srcset","images/slides/promo-b2x.png 2x","alt","",1,"round"],["data-slick-index","2","aria-hidden","true","tabindex","-1","role","tabpanel","id","slick-slide02","aria-describedby","slick-slide-control02",1,"slider-item","slick-slide",2,"width","462px"],["data-slick-index","3","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","4","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["data-slick-index","5","id","","aria-hidden","true","tabindex","-1",1,"slider-item","slick-slide","slick-cloned",2,"width","462px"],["role","tablist",1,"slick-dots"],["role","presentation",1,"slick-active"],["type","button","role","tab","id","slick-slide-control00","aria-controls","slick-slide00","aria-label","1 of 3","tabindex","0","aria-selected","true"],["role","presentation"],["type","button","role","tab","id","slick-slide-control01","aria-controls","slick-slide01","aria-label","2 of 3","tabindex","-1"],["type","button","role","tab","id","slick-slide-control02","aria-controls","slick-slide02","aria-label","3 of 3","tabindex","-1"],[1,"slider-dots"],[1,"slider-arrows"],[1,"formGroup"],[1,"text-center"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),c._uU(5,"Thank You for Registering"),c.qZA(),c.YNc(6,iU,8,1,"div",4),c.TgZ(7,"div",5)(8,"button",6),c.NdJ("click",function(){return t.authService.SendVerificationMail()}),c._UZ(9,"i",7),c._uU(10," Resend Verification Email "),c.qZA(),c.TgZ(11,"button",8)(12,"span"),c._uU(13,"Go back to?"),c.TgZ(14,"span",9),c._uU(15," Sign in"),c.qZA()()()()()(),c.TgZ(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"div",16)(23,"div",17),c._UZ(24,"img",18),c.qZA(),c.TgZ(25,"div",19)(26,"h4"),c._uU(27,"Dashlite"),c.qZA(),c.TgZ(28,"p"),c._uU(29,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(30,"div",20)(31,"div",16)(32,"div",17),c._UZ(33,"img",21),c.qZA(),c.TgZ(34,"div",19)(35,"h4"),c._uU(36,"Dashlite"),c.qZA(),c.TgZ(37,"p"),c._uU(38,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(39,"div",22)(40,"div",16)(41,"div",17),c._UZ(42,"img",23),c.qZA(),c.TgZ(43,"div",19)(44,"h4"),c._uU(45,"Dashlite"),c.qZA(),c.TgZ(46,"p"),c._uU(47,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(48,"div",24)(49,"div",16)(50,"div",17),c._UZ(51,"img",18),c.qZA(),c.TgZ(52,"div",19)(53,"h4"),c._uU(54,"Dashlite"),c.qZA(),c.TgZ(55,"p"),c._uU(56,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(57,"div",25)(58,"div",16)(59,"div",17),c._UZ(60,"img",21),c.qZA(),c.TgZ(61,"div",19)(62,"h4"),c._uU(63,"Dashlite"),c.qZA(),c.TgZ(64,"p"),c._uU(65,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(66,"div",26)(67,"div",16)(68,"div",17),c._UZ(69,"img",23),c.qZA(),c.TgZ(70,"div",19)(71,"h4"),c._uU(72,"Dashlite"),c.qZA(),c.TgZ(73,"p"),c._uU(74,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()(),c.TgZ(75,"div",27)(76,"div",16)(77,"div",17),c._UZ(78,"img",18),c.qZA(),c.TgZ(79,"div",19)(80,"h4"),c._uU(81,"Dashlite"),c.qZA(),c.TgZ(82,"p"),c._uU(83,"You can start to create your products easily with its user-friendly design & most completed responsive layout. "),c.qZA()()()()()(),c.TgZ(84,"ul",28)(85,"li",29)(86,"button",30),c._uU(87,"1"),c.qZA()(),c.TgZ(88,"li",31)(89,"button",32),c._uU(90,"2"),c.qZA()(),c.TgZ(91,"li",31)(92,"button",33),c._uU(93,"3"),c.qZA()()()(),c._UZ(94,"div",34)(95,"div",35),c.qZA()()()()),2&e&&(c.xp6(6),c.Q6J("ngIf",t.authService.userData))},dependencies:[vn,Xu]});class Qp{constructor(e,t){this.authService=e,this.router=t}canActivate(e,t){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}Qp.\u0275fac=function(e){return new(e||Qp)(c.LFG(su),c.LFG(pi))},Qp.\u0275prov=c.Yz7({token:Qp,factory:Qp.\u0275fac,providedIn:"root"});const sU=[{path:"",redirectTo:"/SignIn",pathMatch:"full"},{path:"SignIn",component:Cw,data:{title:"Login Page || KritsnamTechnologies"}},{path:"SignUp",component:Dw,data:{title:"Register Page || KritsnamTechnologies"}},{path:"verifyemailaddress",component:Sw,data:{title:"Pcb Page || KritsnamTechnologies"}},{path:"Home",component:Wf,data:{title:"CMS Panel || KritsnamTechnologies"},canActivate:[Qp]},{path:"pcb",component:gc,data:{title:"Pcb Page || KritsnamTechnologies"},canActivate:[Qp]},{path:"  verifyemailaddress",component:gc,data:{title:"Pcb Page || KritsnamTechnologies"}}];class T_{}function oU(n,e){if(1&n&&(c.TgZ(0,"div",119)(1,"div",120),c._UZ(2,"img",121),c.qZA()()),2&n){const t=e.ngIf;c.xp6(2),c.s9C("src",t.photoURL?t.photoURL:"/assets/images/user.png",c.LSH)}}function aU(n,e){if(1&n&&(c.TgZ(0,"div",122)(1,"div",123)(2,"div",61),c._UZ(3,"img",121),c.qZA(),c.TgZ(4,"div",124)(5,"span",125),c._uU(6),c.qZA(),c.TgZ(7,"span",10),c._uU(8),c.qZA()()()()),2&n){const t=e.ngIf;c.xp6(3),c.s9C("src",t.photoURL?t.photoURL:"/assets/images/user.png",c.LSH),c.xp6(3),c.hij(" ",t.displayName?t.displayName:"User",""),c.xp6(2),c.Oqu(t.email)}}T_.\u0275fac=function(e){return new(e||T_)},T_.\u0275mod=c.oAB({type:T_}),T_.\u0275inj=c.cJS({imports:[$y.forRoot(sU),$y]});class Aw{constructor(e){this.authService=e}}Aw.\u0275fac=function(e){return new(e||Aw)(c.Y36(su))},Aw.\u0275cmp=c.Xpm({type:Aw,selectors:[["app-header"]],decls:325,vars:2,consts:[[1,"nk-header","nk-header-fixed"],[1,"container-fluid"],[1,"nk-header-wrap"],[1,"nk-menu-trigger","d-xl-none","ms-n1"],["href","#","data-target","sidebarMenu",1,"nk-nav-toggle","nk-quick-nav-icon"],[1,"icon","ni","ni-menu"],[1,"nk-header-app-name"],[1,"nk-header-app-logo"],[1,"icon","ni","ni-dashlite","bg-purple-dim"],[1,"nk-header-app-info"],[1,"sub-text"],[1,"lead-text"],[1,"nk-header-menu","is-light"],[1,"nk-header-menu-inner"],[1,"nk-menu","nk-menu-main"],[1,"nk-menu-item"],["href","https://dashlite.net/demo3/index.html",1,"nk-menu-link"],[1,"nk-menu-text"],["href","https://dashlite.net/demo3/components.html",1,"nk-menu-link"],[1,"nk-menu-item","has-sub"],["href","#",1,"nk-menu-link","nk-menu-toggle"],[1,"nk-menu-sub"],["href","https://dashlite.net/demo2/ecommerce/index.html",1,"nk-menu-link"],["href","https://dashlite.net/demo3/apps/file-manager.html",1,"nk-menu-link"],["href","https://dashlite.net/demo4/subscription/index.html",1,"nk-menu-link"],["href","https://dashlite.net/demo5/crypto/index.html",1,"nk-menu-link"],["href","https://dashlite.net/demo6/invest/index.html",1,"nk-menu-link"],[1,"nk-header-tools"],[1,"nk-quick-nav"],[1,"dropdown","hide-mb-sm"],["data-bs-toggle","modal","href","#region",1,"nk-quick-nav-icon"],[1,"icon","ni","ni-globe"],[1,"dropdown","chats-dropdown","hide-mb-xs"],["href","#","data-bs-toggle","dropdown",1,"dropdown-toggle","nk-quick-nav-icon"],[1,"icon-status","icon-status-na"],[1,"icon","ni","ni-comments"],[1,"dropdown-menu","dropdown-menu-xl","dropdown-menu-end"],[1,"dropdown-head"],[1,"sub-title","nk-dropdown-title"],["href","#"],[1,"dropdown-body"],[1,"chat-list"],[1,"chat-item"],["href","#",1,"chat-link"],[1,"chat-media","user-avatar"],[1,"status","dot","dot-lg","dot-gray"],[1,"chat-info"],[1,"chat-from"],[1,"name"],[1,"time"],[1,"chat-context"],[1,"text"],[1,"status","delivered"],[1,"icon","ni","ni-check-circle-fill"],[1,"chat-item","is-unread"],[1,"chat-media","user-avatar","bg-pink"],[1,"status","dot","dot-lg","dot-success"],[1,"status","unread"],[1,"icon","ni","ni-bullet-fill"],["src","../images/avatar/b-sm.jpg","alt",""],[1,"chat-media","user-avatar","user-avatar-multiple"],[1,"user-avatar"],["src","../images/avatar/c-sm.jpg","alt",""],[1,"status","sent"],[1,"icon","ni","ni-check-circle"],["src","../images/avatar/a-sm.jpg","alt",""],[1,"chat-media","user-avatar","bg-purple"],[1,"dropdown-foot","center"],[1,"dropdown","notification-dropdown"],[1,"icon-status","icon-status-info"],[1,"icon","ni","ni-bell"],[1,"nk-notification"],[1,"nk-notification-item","dropdown-inner"],[1,"nk-notification-icon"],[1,"icon","icon-circle","bg-primary-dim","ni","ni-share"],[1,"nk-notification-content"],[1,"nk-notification-text"],[1,"nk-notification-time"],[1,"icon","icon-circle","bg-info-dim","ni","ni-edit"],[1,"icon","icon-circle","bg-success-dim","ni","ni-spark"],[1,"dropdown","list-apps-dropdown","d-lg-none"],[1,"icon","ni","ni-menu-circled"],[1,"dropdown-menu","dropdown-menu-lg","dropdown-menu-end"],[1,"list-apps"],["href","https://dashlite.net/demo3/index.html"],[1,"list-apps-media"],[1,"icon","ni","ni-dashlite","bg-primary","text-white"],[1,"list-apps-title"],["href","https://dashlite.net/demo3/apps/chats.html"],[1,"icon","ni","ni-chat-circle","bg-info-dim"],["href","https://dashlite.net/demo3/apps/mailbox.html"],[1,"icon","ni","ni-inbox","bg-purple-dim"],["href","https://dashlite.net/demo3/apps/messages.html"],[1,"icon","ni","ni-chat","bg-success-dim"],["href","https://dashlite.net/demo3/apps/file-manager.html"],[1,"icon","ni","ni-folder","bg-purple-dim"],["href","https://dashlite.net/demo3/components.html"],[1,"icon","ni","ni-layers","bg-secondary-dim"],["href","https://dashlite.net/demo2/ecommerce/index.html"],[1,"icon","ni","ni-cart","bg-danger-dim"],["href","https://dashlite.net/demo4/subscription/index.html"],[1,"icon","ni","ni-calendar-booking","bg-primary-dim"],["href","https://dashlite.net/demo5/crypto/index.html"],[1,"icon","ni","ni-bitcoin-cash","bg-warning-dim"],["href","https://dashlite.net/demo6/invest/index.html"],[1,"icon","ni","ni-invest","bg-blue-dim"],[1,"dropdown","user-dropdown"],["href","#","data-bs-toggle","dropdown",1,"dropdown-toggle","me-n1"],["class","user-toggle",4,"ngIf"],[1,"dropdown-menu","dropdown-menu-md","dropdown-menu-end"],["class","dropdown-inner user-card-wrap bg-lighter d-none d-md-block",4,"ngIf"],[1,"dropdown-inner"],[1,"link-list"],["href","user-profile.html"],[1,"icon","ni","ni-user-alt"],[1,"icon","ni","ni-setting-alt"],[1,"icon","ni","ni-activity-alt"],[3,"click"],[1,"icon","ni","ni-signout"],[1,"user-toggle"],[1,"user-avatar","sm"],[3,"src"],[1,"dropdown-inner","user-card-wrap","bg-lighter","d-none","d-md-block"],[1,"user-card"],[1,"user-info"],["id","userProfileName",1,"lead-text"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),c._UZ(5,"em",5),c.qZA()(),c.TgZ(6,"div",6)(7,"div",7),c._UZ(8,"em",8),c.qZA(),c.TgZ(9,"div",9)(10,"span",10),c._uU(11,"DashLite"),c.qZA(),c.TgZ(12,"span",11),c._uU(13,"Dashboard"),c.qZA()()(),c.TgZ(14,"div",12)(15,"div",13)(16,"ul",14)(17,"li",15)(18,"a",16)(19,"span",17),c._uU(20,"Overview"),c.qZA()()(),c.TgZ(21,"li",15)(22,"a",18)(23,"span",17),c._uU(24,"Components"),c.qZA()()(),c.TgZ(25,"li",19)(26,"a",20)(27,"span",17),c._uU(28,"Use-Case Panel"),c.qZA()(),c.TgZ(29,"ul",21)(30,"li",15)(31,"a",22)(32,"span",17),c._uU(33,"eCommerce Panel"),c.qZA()()(),c.TgZ(34,"li",15)(35,"a",23)(36,"span",17),c._uU(37,"File Manangement Panel"),c.qZA()()(),c.TgZ(38,"li",15)(39,"a",24)(40,"span",17),c._uU(41,"Subscription Panel"),c.qZA()()(),c.TgZ(42,"li",15)(43,"a",25)(44,"span",17),c._uU(45,"Crypto Buy Sell Panel"),c.qZA()()(),c.TgZ(46,"li",15)(47,"a",26)(48,"span",17),c._uU(49,"HYIP Investment Panel"),c.qZA()()()()()()()(),c.TgZ(50,"div",27)(51,"ul",28)(52,"li",29)(53,"a",30),c._UZ(54,"em",31),c.qZA()(),c.TgZ(55,"li",32)(56,"a",33)(57,"div",34),c._UZ(58,"em",35),c.qZA()(),c.TgZ(59,"div",36)(60,"div",37)(61,"span",38),c._uU(62,"Recent Chats"),c.qZA(),c.TgZ(63,"a",39),c._uU(64,"Setting"),c.qZA()(),c.TgZ(65,"div",40)(66,"ul",41)(67,"li",42)(68,"a",43)(69,"div",44)(70,"span"),c._uU(71,"IH"),c.qZA(),c._UZ(72,"span",45),c.qZA(),c.TgZ(73,"div",46)(74,"div",47)(75,"div",48),c._uU(76,"Iliash Hossain"),c.qZA(),c.TgZ(77,"span",49),c._uU(78,"Now"),c.qZA()(),c.TgZ(79,"div",50)(80,"div",51),c._uU(81,"You: Please confrim if you got my last messages."),c.qZA(),c.TgZ(82,"div",52),c._UZ(83,"em",53),c.qZA()()()()(),c.TgZ(84,"li",54)(85,"a",43)(86,"div",55)(87,"span"),c._uU(88,"AB"),c.qZA(),c._UZ(89,"span",56),c.qZA(),c.TgZ(90,"div",46)(91,"div",47)(92,"div",48),c._uU(93,"Abu Bin Ishtiyak"),c.qZA(),c.TgZ(94,"span",49),c._uU(95,"4:49 AM"),c.qZA()(),c.TgZ(96,"div",50)(97,"div",51),c._uU(98,"Hi, I am Ishtiyak, can you help me with this problem ?"),c.qZA(),c.TgZ(99,"div",57),c._UZ(100,"em",58),c.qZA()()()()(),c.TgZ(101,"li",42)(102,"a",43)(103,"div",44),c._UZ(104,"img",59),c.qZA(),c.TgZ(105,"div",46)(106,"div",47)(107,"div",48),c._uU(108,"George Philips"),c.qZA(),c.TgZ(109,"span",49),c._uU(110,"6 Apr"),c.qZA()(),c.TgZ(111,"div",50)(112,"div",51),c._uU(113,"Have you seens the claim from Rose?"),c.qZA()()()()(),c.TgZ(114,"li",42)(115,"a",43)(116,"div",60)(117,"div",61),c._UZ(118,"img",62),c.qZA(),c.TgZ(119,"div",61)(120,"span"),c._uU(121,"AB"),c.qZA()()(),c.TgZ(122,"div",46)(123,"div",47)(124,"div",48),c._uU(125,"Softnio Group"),c.qZA(),c.TgZ(126,"span",49),c._uU(127,"27 Mar"),c.qZA()(),c.TgZ(128,"div",50)(129,"div",51),c._uU(130,"You: I just bought a new computer but i am having some problem"),c.qZA(),c.TgZ(131,"div",63),c._UZ(132,"em",64),c.qZA()()()()(),c.TgZ(133,"li",42)(134,"a",43)(135,"div",44),c._UZ(136,"img",65)(137,"span",56),c.qZA(),c.TgZ(138,"div",46)(139,"div",47)(140,"div",48),c._uU(141,"Larry Hughes"),c.qZA(),c.TgZ(142,"span",49),c._uU(143,"3 Apr"),c.qZA()(),c.TgZ(144,"div",50)(145,"div",51),c._uU(146,"Hi Frank! How is you doing?"),c.qZA()()()()(),c.TgZ(147,"li",42)(148,"a",43)(149,"div",66)(150,"span"),c._uU(151,"TW"),c.qZA()(),c.TgZ(152,"div",46)(153,"div",47)(154,"div",48),c._uU(155,"Tammy Wilson"),c.qZA(),c.TgZ(156,"span",49),c._uU(157,"27 Mar"),c.qZA()(),c.TgZ(158,"div",50)(159,"div",51),c._uU(160,"You: I just bought a new computer but i am having some problem"),c.qZA(),c.TgZ(161,"div",63),c._UZ(162,"em",64),c.qZA()()()()()()(),c.TgZ(163,"div",67)(164,"a",39),c._uU(165,"View All"),c.qZA()()()(),c.TgZ(166,"li",68)(167,"a",33)(168,"div",69),c._UZ(169,"em",70),c.qZA()(),c.TgZ(170,"div",36)(171,"div",37)(172,"span",38),c._uU(173,"Notifications"),c.qZA(),c.TgZ(174,"a",39),c._uU(175,"Mark All as Read"),c.qZA()(),c.TgZ(176,"div",40)(177,"div",71)(178,"div",72)(179,"div",73),c._UZ(180,"em",74),c.qZA(),c.TgZ(181,"div",75)(182,"div",76),c._uU(183,"Iliash shared "),c.TgZ(184,"span"),c._uU(185,"Dashlite-v2"),c.qZA(),c._uU(186," with you. "),c.qZA(),c.TgZ(187,"div",77),c._uU(188,"Just now"),c.qZA()()(),c.TgZ(189,"div",72)(190,"div",73),c._UZ(191,"em",78),c.qZA(),c.TgZ(192,"div",75)(193,"div",76),c._uU(194,"Iliash "),c.TgZ(195,"span"),c._uU(196,"invited"),c.qZA(),c._uU(197," you to edit "),c.TgZ(198,"span"),c._uU(199,"DashLite"),c.qZA(),c._uU(200," folder "),c.qZA(),c.TgZ(201,"div",77),c._uU(202,"2 hrs ago"),c.qZA()()(),c.TgZ(203,"div",72)(204,"div",73),c._UZ(205,"em",74),c.qZA(),c.TgZ(206,"div",75)(207,"div",76),c._uU(208,"You have shared "),c.TgZ(209,"span"),c._uU(210,"project v2"),c.qZA(),c._uU(211," with Parvez. "),c.qZA(),c.TgZ(212,"div",77),c._uU(213,"7 days ago"),c.qZA()()(),c.TgZ(214,"div",72)(215,"div",73),c._UZ(216,"em",79),c.qZA(),c.TgZ(217,"div",75)(218,"div",76),c._uU(219,"Your "),c.TgZ(220,"span"),c._uU(221,"Subscription"),c.qZA(),c._uU(222," renew successfully. "),c.qZA(),c.TgZ(223,"div",77),c._uU(224,"2 month ago"),c.qZA()()()()(),c.TgZ(225,"div",67)(226,"a",39),c._uU(227,"View All"),c.qZA()()()(),c.TgZ(228,"li",80)(229,"a",33)(230,"div",34),c._UZ(231,"em",81),c.qZA()(),c.TgZ(232,"div",82)(233,"div",40)(234,"ul",83)(235,"li")(236,"a",84)(237,"span",85),c._UZ(238,"em",86),c.qZA(),c.TgZ(239,"span",87),c._uU(240,"Dashboard"),c.qZA()()(),c.TgZ(241,"li")(242,"a",88)(243,"span",85),c._UZ(244,"em",89),c.qZA(),c.TgZ(245,"span",87),c._uU(246,"Chats"),c.qZA()()(),c.TgZ(247,"li")(248,"a",90)(249,"span",85),c._UZ(250,"em",91),c.qZA(),c.TgZ(251,"span",87),c._uU(252,"Mailbox"),c.qZA()()(),c.TgZ(253,"li")(254,"a",92)(255,"span",85),c._UZ(256,"em",93),c.qZA(),c.TgZ(257,"span",87),c._uU(258,"Messages"),c.qZA()()(),c.TgZ(259,"li")(260,"a",94)(261,"span",85),c._UZ(262,"em",95),c.qZA(),c.TgZ(263,"span",87),c._uU(264,"File Manager"),c.qZA()()(),c.TgZ(265,"li")(266,"a",96)(267,"span",85),c._UZ(268,"em",97),c.qZA(),c.TgZ(269,"span",87),c._uU(270,"Components"),c.qZA()()()(),c.TgZ(271,"ul",83)(272,"li")(273,"a",98)(274,"span",85),c._UZ(275,"em",99),c.qZA(),c.TgZ(276,"span",87),c._uU(277,"Ecommerce Panel"),c.qZA()()(),c.TgZ(278,"li")(279,"a",100)(280,"span",85),c._UZ(281,"em",101),c.qZA(),c.TgZ(282,"span",87),c._uU(283,"Subscription Panel"),c.qZA()()(),c.TgZ(284,"li")(285,"a",102)(286,"span",85),c._UZ(287,"em",103),c.qZA(),c.TgZ(288,"span",87),c._uU(289,"Crypto Wallet Panel"),c.qZA()()(),c.TgZ(290,"li")(291,"a",104)(292,"span",85),c._UZ(293,"em",105),c.qZA(),c.TgZ(294,"span",87),c._uU(295,"HYIP Invest Panel"),c.qZA()()()()()()(),c.TgZ(296,"li",106)(297,"a",107),c.YNc(298,oU,3,1,"div",108),c.qZA(),c.TgZ(299,"div",109),c.YNc(300,aU,9,3,"div",110),c.TgZ(301,"div",111)(302,"ul",112)(303,"li")(304,"a",113),c._UZ(305,"em",114),c.TgZ(306,"span"),c._uU(307,"View Profile"),c.qZA()()(),c.TgZ(308,"li")(309,"a",113),c._UZ(310,"em",115),c.TgZ(311,"span"),c._uU(312,"Account Setting"),c.qZA()()(),c.TgZ(313,"li")(314,"a",113),c._UZ(315,"em",116),c.TgZ(316,"span"),c._uU(317,"Login Activity"),c.qZA()()()()(),c.TgZ(318,"div",111)(319,"ul",112)(320,"li",117),c.NdJ("click",function(){return t.authService.SignOut()}),c.TgZ(321,"a",39),c._UZ(322,"em",118),c.TgZ(323,"span"),c._uU(324,"Sign out"),c.qZA()()()()()()()()()()()()),2&e&&(c.xp6(298),c.Q6J("ngIf",t.authService.userData),c.xp6(2),c.Q6J("ngIf",t.authService.userData))},dependencies:[vn]});class xw{}xw.\u0275fac=function(e){return new(e||xw)},xw.\u0275cmp=c.Xpm({type:xw,selectors:[["app-sidebar"]],decls:119,vars:0,consts:[[1,"nk-apps-sidebar"],[1,"nk-apps-brand"],["href","https://dashlite.net/demo3/index.html",1,"logo-link"],["src","../images/logo-small.png","srcset","/demo3/images/logo-small2x.png 2x","alt","logo",1,"logo-light","logo-img"],["src","../images/logo-dark-small.png","srcset","/demo3/images/logo-dark-small2x.png 2x","alt","logo-dark",1,"logo-dark","logo-img"],[1,"nk-sidebar-element"],[1,"nk-sidebar-body"],["data-simplebar","init",1,"nk-sidebar-content"],[1,"simplebar-wrapper",2,"margin","0px"],[1,"simplebar-height-auto-observer-wrapper"],[1,"simplebar-height-auto-observer"],[1,"simplebar-mask"],[1,"simplebar-offset",2,"right","0px","bottom","0px"],["tabindex","0","role","region","aria-label","scrollable content",1,"simplebar-content-wrapper",2,"height","100%","overflow","hidden scroll"],[1,"simplebar-content",2,"padding","0px"],[1,"nk-sidebar-menu"],[1,"nk-menu","apps-menu"],["routerLinkActive","active",1,"nk-menu-item"],["routerLink","/Home","aria-label","CMS Panel","data-bs-original-title","CMS Panel",1,"nk-menu-link"],[1,"nk-menu-icon"],[1,"icon","ni","ni-template"],[1,"nk-menu-hr"],[1,"nk-menu-item"],["href","https://dashlite.net/demo3/index.html","aria-label","Analytics Dashboard","data-bs-original-title","Analytics Dashboard",1,"nk-menu-link"],[1,"icon","ni","ni-dashboard"],["routerLink","/pcb","aria-label","PCB","data-bs-original-title","PCB",1,"nk-menu-link"],[1,"icon","ni","ni-speed"],["href","https://dashlite.net/demo3/index-crypto.html","aria-label","Crypto Dashboard","data-bs-original-title","Crypto Dashboard",1,"nk-menu-link"],[1,"icon","ni","ni-bitcoin-cash"],["href","https://dashlite.net/demo3/index-invest.html","aria-label","Invest Dashboard","data-bs-original-title","Invest Dashboard",1,"nk-menu-link"],[1,"icon","ni","ni-invest"],["href","https://dashlite.net/demo3/apps/mailbox.html","aria-label","Mailbox","data-bs-original-title","Mailbox",1,"nk-menu-link"],[1,"icon","ni","ni-inbox"],["href","https://dashlite.net/demo3/apps/messages.html","aria-label","Messages","data-bs-original-title","Messages",1,"nk-menu-link"],[1,"icon","ni","ni-chat"],["href","https://dashlite.net/demo3/apps/file-manager.html","aria-label","File Manager","data-bs-original-title","File Manager",1,"nk-menu-link"],[1,"icon","ni","ni-folder"],["href","https://dashlite.net/demo3/apps/chats.html","aria-label","Chats","data-bs-original-title","Chats",1,"nk-menu-link"],[1,"icon","ni","ni-chat-circle"],["href","https://dashlite.net/demo3/apps/calendar.html","aria-label","Calendar","data-bs-original-title","Calendar",1,"nk-menu-link"],[1,"icon","ni","ni-calendar"],["href","https://dashlite.net/demo3/apps/kanban.html",1,"nk-menu-link"],["href","https://dashlite.net/demo3/components.html","aria-label","Go to Components","data-bs-original-title","Go to Components",1,"nk-menu-link"],[1,"icon","ni","ni-layers"],[1,"nk-sidebar-footer"],[1,"nk-menu","nk-menu-md"],["href","#","aria-label","Settings","data-bs-original-title","Settings",1,"nk-menu-link"],[1,"icon","ni","ni-setting"],[1,"simplebar-placeholder",2,"width","auto","height","853px"],[1,"simplebar-track","simplebar-horizontal",2,"visibility","hidden"],[1,"simplebar-scrollbar",2,"width","0px","display","none"],[1,"simplebar-track","simplebar-vertical",2,"visibility","visible"],[1,"simplebar-scrollbar",2,"height","46px","transform","translate3d(0px, 0px, 0px)","display","block"],[1,"nk-sidebar-profile","nk-sidebar-profile-fixed","dropdown"],["href","#","data-target","profileDD",1,"toggle"],[1,"user-avatar"],["data-content","profileDD",1,"dropdown-menu","dropdown-menu-md","m-1","nk-sidebar-profile-dropdown"],[1,"dropdown-inner","user-card-wrap","d-none","d-md-block"],[1,"user-card"],[1,"user-info"],[1,"lead-text"],[1,"sub-text","text-soft"],[1,"dropdown-inner"],[1,"link-list"],["href","https://dashlite.net/demo3/user-profile-regular.html"],[1,"icon","ni","ni-user-alt"],["href","https://dashlite.net/demo3/user-profile-setting.html"],[1,"icon","ni","ni-setting-alt"],["href","https://dashlite.net/demo3/user-profile-activity.html"],[1,"icon","ni","ni-activity-alt"],["href","#"],[1,"icon","ni","ni-signout"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"a",2),c._UZ(3,"img",3)(4,"img",4),c.qZA()(),c.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),c._UZ(10,"div",10),c.qZA(),c.TgZ(11,"div",11)(12,"div",12)(13,"div",13)(14,"div",14)(15,"div",15)(16,"ul",16)(17,"li",17)(18,"a",18)(19,"span",19),c._UZ(20,"em",20),c.qZA()()(),c._UZ(21,"li",21),c.TgZ(22,"li",22)(23,"a",23)(24,"span",19),c._UZ(25,"em",24),c.qZA()()(),c.TgZ(26,"li",17)(27,"a",25)(28,"span",19),c._UZ(29,"em",26),c.qZA()()(),c.TgZ(30,"li",22)(31,"a",27)(32,"span",19),c._UZ(33,"em",28),c.qZA()()(),c.TgZ(34,"li",22)(35,"a",29)(36,"span",19),c._UZ(37,"em",30),c.qZA()()(),c._UZ(38,"li",21),c.TgZ(39,"li",22)(40,"a",31)(41,"span",19),c._UZ(42,"em",32),c.qZA()()(),c.TgZ(43,"li",22)(44,"a",33)(45,"span",19),c._UZ(46,"em",34),c.qZA()()(),c.TgZ(47,"li",22)(48,"a",35)(49,"span",19),c._UZ(50,"em",36),c.qZA()()(),c.TgZ(51,"li",22)(52,"a",37)(53,"span",19),c._UZ(54,"em",38),c.qZA()()(),c.TgZ(55,"li",22)(56,"a",39)(57,"span",19),c._UZ(58,"em",40),c.qZA()()(),c.TgZ(59,"li",22)(60,"a",41)(61,"span",19),c._UZ(62,"em",20),c.qZA()()(),c._UZ(63,"li",21),c.TgZ(64,"li",22)(65,"a",42)(66,"span",19),c._UZ(67,"em",43),c.qZA()()()()(),c.TgZ(68,"div",44)(69,"ul",45)(70,"li",22)(71,"a",46)(72,"span",19),c._UZ(73,"em",47),c.qZA()()()()()()()()(),c._UZ(74,"div",48),c.qZA(),c.TgZ(75,"div",49),c._UZ(76,"div",50),c.qZA(),c.TgZ(77,"div",51),c._UZ(78,"div",52),c.qZA()(),c.TgZ(79,"div",53)(80,"a",54)(81,"div",55)(82,"span"),c._uU(83,"AB"),c.qZA()()(),c.TgZ(84,"div",56)(85,"div",57)(86,"div",58)(87,"div",55)(88,"span"),c._uU(89,"AB"),c.qZA()(),c.TgZ(90,"div",59)(91,"span",60),c._uU(92,"Abu Bin Ishtiyak"),c.qZA(),c.TgZ(93,"span",61),c._uU(94,"info@softnio.com"),c.qZA()()()(),c.TgZ(95,"div",62)(96,"ul",63)(97,"li")(98,"a",64),c._UZ(99,"em",65),c.TgZ(100,"span"),c._uU(101,"View Profile"),c.qZA()()(),c.TgZ(102,"li")(103,"a",66),c._UZ(104,"em",67),c.TgZ(105,"span"),c._uU(106,"Account Setting"),c.qZA()()(),c.TgZ(107,"li")(108,"a",68),c._UZ(109,"em",69),c.TgZ(110,"span"),c._uU(111,"Login Activity"),c.qZA()()()()(),c.TgZ(112,"div",62)(113,"ul",63)(114,"li")(115,"a",70),c._UZ(116,"em",71),c.TgZ(117,"span"),c._uU(118,"Sign out"),c.qZA()()()()()()()()()())},dependencies:[Xu,QE]});class kw{}kw.\u0275fac=function(e){return new(e||kw)},kw.\u0275cmp=c.Xpm({type:kw,selectors:[["app-sidemenu"]],decls:122,vars:0,consts:[["data-content","sidebarMenu",1,"nk-sidebar"],["data-simplebar","init",1,"nk-sidebar-inner"],[1,"simplebar-wrapper",2,"margin","-24px -28px -32px"],[1,"simplebar-height-auto-observer-wrapper"],[1,"simplebar-height-auto-observer"],[1,"simplebar-mask"],[1,"simplebar-offset",2,"right","0px","bottom","0px"],["tabindex","0","role","region","aria-label","scrollable content",1,"simplebar-content-wrapper",2,"height","auto","overflow","hidden scroll"],[1,"simplebar-content",2,"padding","24px 28px 32px"],[1,"nk-menu","nk-menu-md"],[1,"nk-menu-heading"],[1,"overline-title","text-primary-alt"],[1,"nk-menu-item"],["href","index.html",1,"nk-menu-link"],[1,"nk-menu-icon"],[1,"icon","ni","ni-dashboard"],[1,"nk-menu-text"],["href","analytics.html",1,"nk-menu-link"],[1,"icon","ni","ni-speed"],[1,"nk-menu-item","has-sub"],["href","#",1,"nk-menu-link","nk-menu-toggle"],[1,"icon","ni","ni-files"],[1,"nk-menu-sub"],["href","page-add.html",1,"nk-menu-link"],["href","page-list.html",1,"nk-menu-link"],["href","page-sample.html",1,"nk-menu-link"],[1,"icon","ni","ni-template"],["href","post-list.html",1,"nk-menu-link"],["href","post-add.html",1,"nk-menu-link"],["href","categories.html",1,"nk-menu-link"],["href","media.html",1,"nk-menu-link"],[1,"icon","ni","ni-img"],["href","comments.html",1,"nk-menu-link"],[1,"icon","ni","ni-comments"],["href","themes.html",1,"nk-menu-link"],[1,"icon","ni","ni-color-palette"],[1,"icon","ni","ni-opt-alt"],["href","plugin-add.html",1,"nk-menu-link"],["href","plugin-installed.html",1,"nk-menu-link"],[1,"icon","ni","ni-user-alt"],["href","user-list.html",1,"nk-menu-link"],["href","user-profile.html",1,"nk-menu-link"],["href","settings-general.html",1,"nk-menu-link"],[1,"icon","ni","ni-setting-alt"],[1,"simplebar-placeholder",2,"width","auto","height","425px"],[1,"simplebar-track","simplebar-horizontal",2,"visibility","hidden"],[1,"simplebar-scrollbar","simplebar-visible",2,"width","0px","display","none"],[1,"simplebar-track","simplebar-vertical",2,"visibility","visible"],[1,"simplebar-scrollbar","simplebar-visible",2,"height","196px","display","block","transform","translate3d(0px, 0px, 0px)"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),c._UZ(4,"div",4),c.qZA(),c.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"ul",9)(10,"li",10)(11,"h6",11),c._uU(12,"Dashboard"),c.qZA()(),c.TgZ(13,"li",12)(14,"a",13)(15,"span",14),c._UZ(16,"em",15),c.qZA(),c.TgZ(17,"span",16),c._uU(18,"Dashboard"),c.qZA()()(),c.TgZ(19,"li",12)(20,"a",17)(21,"span",14),c._UZ(22,"em",18),c.qZA(),c.TgZ(23,"span",16),c._uU(24,"Analytics"),c.qZA()()(),c.TgZ(25,"li",19)(26,"a",20)(27,"span",14),c._UZ(28,"em",21),c.qZA(),c.TgZ(29,"span",16),c._uU(30,"Pages"),c.qZA()(),c.TgZ(31,"ul",22)(32,"li",12)(33,"a",23)(34,"span",16),c._uU(35,"Add Page"),c.qZA()()(),c.TgZ(36,"li",12)(37,"a",24)(38,"span",16),c._uU(39,"Page List"),c.qZA()()(),c.TgZ(40,"li",12)(41,"a",25)(42,"span",16),c._uU(43,"Sample Page"),c.qZA()()()()(),c.TgZ(44,"li",19)(45,"a",20)(46,"span",14),c._UZ(47,"em",26),c.qZA(),c.TgZ(48,"span",16),c._uU(49,"Post"),c.qZA()(),c.TgZ(50,"ul",22)(51,"li",12)(52,"a",27)(53,"span",16),c._uU(54,"All Post"),c.qZA()()(),c.TgZ(55,"li",12)(56,"a",28)(57,"span",16),c._uU(58,"Add Post"),c.qZA()()(),c.TgZ(59,"li",12)(60,"a",29)(61,"span",16),c._uU(62,"Categories"),c.qZA()()()()(),c.TgZ(63,"li",12)(64,"a",30)(65,"span",14),c._UZ(66,"em",31),c.qZA(),c.TgZ(67,"span",16),c._uU(68,"Media"),c.qZA()()(),c.TgZ(69,"li",12)(70,"a",32)(71,"span",14),c._UZ(72,"em",33),c.qZA(),c.TgZ(73,"span",16),c._uU(74,"Comments"),c.qZA()()(),c.TgZ(75,"li",12)(76,"a",34)(77,"span",14),c._UZ(78,"em",35),c.qZA(),c.TgZ(79,"span",16),c._uU(80,"Themes"),c.qZA()()(),c.TgZ(81,"li",19)(82,"a",20)(83,"span",14),c._UZ(84,"em",36),c.qZA(),c.TgZ(85,"span",16),c._uU(86,"Plugins"),c.qZA()(),c.TgZ(87,"ul",22)(88,"li",12)(89,"a",37)(90,"span",16),c._uU(91,"Add Plugins"),c.qZA()()(),c.TgZ(92,"li",12)(93,"a",38)(94,"span",16),c._uU(95,"Installed Plugins"),c.qZA()()()()(),c.TgZ(96,"li",19)(97,"a",20)(98,"span",14),c._UZ(99,"em",39),c.qZA(),c.TgZ(100,"span",16),c._uU(101,"Users"),c.qZA()(),c.TgZ(102,"ul",22)(103,"li",12)(104,"a",40)(105,"span",16),c._uU(106,"User List"),c.qZA()()(),c.TgZ(107,"li",12)(108,"a",41)(109,"span",16),c._uU(110,"User Profile"),c.qZA()()()()(),c.TgZ(111,"li",12)(112,"a",42)(113,"span",14),c._UZ(114,"em",43),c.qZA(),c.TgZ(115,"span",16),c._uU(116,"Setting"),c.qZA()()()()()()()(),c._UZ(117,"div",44),c.qZA(),c.TgZ(118,"div",45),c._UZ(119,"div",46),c.qZA(),c.TgZ(120,"div",47),c._UZ(121,"div",48),c.qZA()()())}});class Rw{constructor(e,t){this.router=e,this.titleService=t}ngOnInit(){this.router.events.pipe(ss(e=>e instanceof Yu),(0,b.U)(()=>{let e=this.router.routerState.root,t="";for(;e.firstChild;)e=e.firstChild;return e.snapshot.data.title&&(t=e.snapshot.data.title),t})).subscribe(e=>{e&&this.titleService.setTitle(`${e}`)})}}Rw.\u0275fac=function(e){return new(e||Rw)(c.Y36(pi),c.Y36(wo))},Rw.\u0275cmp=c.Xpm({type:Rw,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"nk-app-root"],[1,"nk-main"],[1,"nk-wrap"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"app-sidebar"),c.TgZ(2,"div",1)(3,"div",2),c._UZ(4,"app-header")(5,"app-sidemenu")(6,"router-outlet"),c.qZA()()())},dependencies:[TE,Aw,xw,kw]});const YM="firebasestorage.googleapis.com",QM="storageBucket";class br extends L.ZR{constructor(e,t,r=0){super(q1(e),`Firebase Storage: ${t} (${q1(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,br.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return q1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function q1(n){return"storage/"+n}function G1(){return new br("unknown","An unknown error occurred, please check the error payload for server response.")}function XM(){return new br("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function JM(){return new br("canceled","User canceled the upload/download.")}function eP(){return new br("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function C_(n){return new br("invalid-argument",n)}function tP(){return new br("app-deleted","The Firebase app was deleted.")}function nP(n){return new br("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mw(n,e){return new br("invalid-format","String does not match format '"+n+"': "+e)}function Pw(n){throw new br("internal-error","Internal error: "+n)}class us{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=us.makeFromUrl(e,t)}catch{return new us(e,"")}if(""===r.path)return r;throw function yU(n){return new br("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",f=new RegExp("^gs://"+i+"(/(.*))?$","i");function v(ht){ht.path_=decodeURIComponent(ht.path)}const A=t.replace(/[.]/g,"\\."),ot=[{regex:f,indices:{bucket:1,path:3},postModify:function a(ht){"/"===ht.path.charAt(ht.path.length-1)&&(ht.path_=ht.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${A}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${t===YM?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let ht=0;ht<ot.length;ht++){const kt=ot[ht],$t=kt.regex.exec(e);if($t){let du=$t[kt.indices.path];du||(du=""),r=new us($t[kt.indices.bucket],du),kt.postModify(r);break}}if(null==r)throw function _U(n){return new br("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class bU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function PT(n){return"string"==typeof n||n instanceof String}function rP(n){return W1()&&n instanceof Blob}function W1(){return typeof Blob<"u"&&!(0,L.UG)()}function z1(n,e,t,r){if(r<e)throw C_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw C_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Gc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function iP(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Bh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Bh||(Bh={})),Bh))();function sP(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class xU{constructor(e,t,r,i,a,l,f,m,v,C,A,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=f,this.errorCallback_=m,this.timeout_=v,this.progressCallback_=C,this.connectionFactory_=A,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,z)=>{this.resolve_=j,this.reject_=z,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,f=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());!function DU(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==f){const m=G1();m.serverResponse=f.getErrorText(),l(this.errorCallback_?this.errorCallback_(f,m):m)}else l(i.canceled?this.appDelete_?tP():JM():XM())};this.canceled_?t(0,new NT(!1,null,!0)):this.backoffId_=function TU(n,e,t){let r=1,i=null,a=null,l=!1,f=0;function m(){return 2===f}let v=!1;function C(...Ee){v||(v=!0,e.apply(null,Ee))}function A(Ee){i=setTimeout(()=>{i=null,n(j,m())},Ee)}function P(){a&&clearTimeout(a)}function j(Ee,...dt){if(v)return void P();if(Ee)return P(),void C.call(null,Ee,...dt);if(m()||l)return P(),void C.call(null,Ee,...dt);let ot;r<64&&(r*=2),1===f?(f=2,ot=0):ot=1e3*(r+Math.random()),A(ot)}let z=!1;function ge(Ee){z||(z=!0,P(),!v&&(null!==i?(Ee||(f=2),clearTimeout(i),A(0)):Ee||(f=1)))}return A(0),a=setTimeout(()=>{l=!0,ge(!0)},t),ge}((r,i)=>{if(i)return void r(!1,new NT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=f=>{null!==this.progressCallback_&&this.progressCallback_(f.loaded,f.lengthComputable?f.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const f=a.getErrorCode()===Bh.NO_ERROR,m=a.getStatus();if((!f||sP(m,this.additionalRetryCodes_))&&this.retry){const C=a.getErrorCode()===Bh.ABORT;return void r(!1,new NT(!1,null,C))}const v=-1!==this.successCodes_.indexOf(m);r(!0,new NT(v,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function CU(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class NT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function LU(...n){const e=function OU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(W1())return new Blob(n);throw new br("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Po={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class K1{constructor(e,t){this.data=e,this.contentType=t||null}}function Y1(n,e){switch(n){case Po.RAW:return new K1(oP(e));case Po.BASE64:case Po.BASE64URL:return new K1(aP(n,e));case Po.DATA_URL:return new K1(function BU(n){const e=new uP(n);return e.base64?aP(Po.BASE64,e.rest):function VU(n){let e;try{e=decodeURIComponent(n)}catch{throw Mw(Po.DATA_URL,"Malformed data URL.")}return oP(e)}(e.rest)}(e),function ZU(n){return new uP(n).contentType}(e))}throw G1()}function oP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function aP(n,e){switch(n){case Po.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Mw(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Po.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Mw(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function UU(n){if(typeof atob>"u")throw function IU(n){return new br("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Mw(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class uP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mw(Po.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function jU(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class bl{constructor(e,t){let r=0,i="";rP(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(rP(this.data_)){const i=function FU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new bl(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new bl(r,!0)}}static getBlob(...e){if(W1()){const t=e.map(r=>r instanceof bl?r.data_:r);return new bl(LU.apply(null,t))}{const t=e.map(l=>PT(l)?Y1(Po.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let f=0;f<l.length;f++)i[a++]=l[f]}),new bl(i,!0)}}uploadData(){return this.data_}}function Q1(n){let e;try{e=JSON.parse(n)}catch{return null}return function AU(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function lP(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function qU(n,e){return e}class Ms{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||qU}}let OT=null;function Nw(){if(OT)return OT;const n=[];n.push(new Ms("bucket")),n.push(new Ms("generation")),n.push(new Ms("metageneration")),n.push(new Ms("name","fullPath",!0));const t=new Ms("name");t.xform=function e(a,l){return function GU(n){return!PT(n)||n.length<2?n:lP(n)}(l)},n.push(t);const i=new Ms("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Ms("timeCreated")),n.push(new Ms("updated")),n.push(new Ms("md5Hash",null,!0)),n.push(new Ms("cacheControl",null,!0)),n.push(new Ms("contentDisposition",null,!0)),n.push(new Ms("contentEncoding",null,!0)),n.push(new Ms("contentLanguage",null,!0)),n.push(new Ms("contentType",null,!0)),n.push(new Ms("metadata","customMetadata",!0)),OT=n,OT}function cP(n,e,t){const r=Q1(e);return null===r?null:function zU(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function WU(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new us(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function X1(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const dP="prefixes";class Tl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Cl(n){if(!n)throw G1()}function LT(n,e){return function t(r,i){const a=cP(n,i,e);return Cl(null!==a),a}}function D_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function gU(){return new br("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function pU(){return new br("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function fU(n){return new br("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function mU(n){return new br("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function Ow(n){const e=D_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function hU(n){return new br("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function fP(n,e,t){const i=Gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Tl(i,"GET",LT(n,t),l);return f.errorHandler=Ow(e),f}function eV(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const f=Gc(e.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,C=new Tl(f,"GET",function XU(n,e){return function t(r,i){const a=function QU(n,e,t){const r=Q1(t);return null===r?null:function YU(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[dP])for(const i of t[dP]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new us(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new us(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Cl(null!==a),a}}(n,e.bucket),v);return C.urlParams=a,C.errorHandler=D_(e),C}function gP(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function iV(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class FT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function J1(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Cl(!1)}return Cl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const uV={STATE_CHANGED:"state_changed"},Ps={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ex(n){switch(n){case"running":case"pausing":case"canceling":return Ps.RUNNING;case"paused":return Ps.PAUSED;case"success":return Ps.SUCCESS;case"canceled":return Ps.CANCELED;default:return Ps.ERROR}}class lV{constructor(e,t,r){if(function SU(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function S_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class cV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Bh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Bh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Bh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Pw("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pw("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pw("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pw("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pw("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class dV extends cV{initXhr(){this.xhr_.responseType="text"}}function ou(){return new dV}class vP{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Nw(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(sP(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=XM()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function sV(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=gP(e,r,i),f={name:l.fullPath},m=Gc(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},A=X1(l,t),z=new Tl(m,"POST",function j(ge){let Ee;J1(ge);try{Ee=ge.getResponseHeader("X-Goog-Upload-URL")}catch{Cl(!1)}return Cl(PT(Ee)),Ee},n.maxUploadRetryTime);return z.urlParams=f,z.headers=C,z.body=A,z.errorHandler=D_(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function oV(n,e,t,r){const m=new Tl(t,"POST",function a(v){const C=J1(v,["active","final"]);let A=null;try{A=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Cl(!1)}A||Cl(!1);const P=Number(A);return Cl(!isNaN(P)),new FT(P,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=D_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,ou,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new FT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function aV(n,e,t,r,i,a,l,f){const m=new FT(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function wU(){return new br("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=m.total-m.current;let C=v;i>0&&(C=Math.min(C,i));const A=m.current;let j="";j=0===C?"finalize":v===C?"upload, finalize":"upload";const z={"X-Goog-Upload-Command":j,"X-Goog-Upload-Offset":`${m.current}`},ge=r.slice(A,A+C);if(null===ge)throw eP();const ot=new Tl(t,"POST",function Ee(ht,kt){const $t=J1(ht,["active","final"]),Cr=m.current+C,du=r.size();let dk;return dk="final"===$t?LT(e,a)(ht,kt):null,new FT(Cr,du,"final"===$t,dk)},e.maxUploadRetryTime);return ot.headers=z,ot.body=ge.uploadData(),ot.progressCallback=f||null,ot.errorHandler=D_(n),ot}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const f=this._ref.storage._makeRequest(l,ou,i,a,!1);this._request=f,f.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=fP(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function mP(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function f(){let ot="";for(let ht=0;ht<2;ht++)ot+=Math.random().toString().slice(2);return ot}();l["Content-Type"]="multipart/related; boundary="+m;const v=gP(e,r,i),C=X1(v,t),j=bl.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===j)throw eP();const z={name:v.fullPath},ge=Gc(a,n.host,n._protocol),dt=n.maxUploadRetryTime,Et=new Tl(ge,"POST",LT(n,t),dt);return Et.urlParams=z,Et.headers=l,Et.body=j.uploadData(),Et.errorHandler=D_(e),Et}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ou,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=JM(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ex(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new lV(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ex(this._state)){case Ps.SUCCESS:S_(this._resolve.bind(null,this.snapshot))();break;case Ps.CANCELED:case Ps.ERROR:S_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ex(this._state)){case Ps.RUNNING:case Ps.PAUSED:e.next&&S_(e.next.bind(e,this.snapshot))();break;case Ps.SUCCESS:e.complete&&S_(e.complete.bind(e))();break;default:e.error&&S_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xp{constructor(e,t){this._service=e,this._location=t instanceof us?t:us.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xp(e,t)}get root(){const e=new us(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lP(this._location.path)}get storage(){return this._service}get parent(){const e=function $U(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new us(this._location.bucket,e);return new Xp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw nP(e)}}function EP(n,e,t){return tx.apply(this,arguments)}function tx(){return tx=(0,ye.Z)(function*(n,e,t){const i=yield IP(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield EP(n,e,i.nextPageToken))}),tx.apply(this,arguments)}function IP(n,e){null!=e&&"number"==typeof e.maxResults&&z1("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=eV(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,ou)}function bV(n){n._throwIfRoot("getDownloadURL");const e=function tV(n,e,t){const i=Gc(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,f=new Tl(i,"GET",function JU(n,e){return function t(r,i){const a=cP(n,i,e);return Cl(null!==a),function KU(n,e,t,r){const i=Q1(e);if(null===i||!PT(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(v=>{const A=n.fullPath;return Gc("/b/"+l(n.bucket)+"/o/"+l(A),t,r)+iP({alt:"media",token:v})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return f.errorHandler=Ow(e),f}(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,ou).then(t=>{if(null===t)throw function EU(){return new br("no-download-url","The given file does not have any download URLs.")}();return t})}function bP(n,e){const t=function HU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new us(n._location.bucket,t);return new Xp(n.storage,r)}function TP(n,e){if(n instanceof nx){const t=n;if(null==t._bucket)throw function vU(){return new br("no-default-bucket","No default bucket found. Did you set the '"+QM+"' property when initializing the app?")}();const r=new Xp(t,t._bucket);return null!=e?TP(r,e):r}return void 0!==e?bP(n,e):n}function SV(n,e){if(e&&function CV(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof nx)return function DV(n,e){return new Xp(n,e)}(n,e);throw C_("To use ref(service, url), the first argument must be a Storage instance.")}return TP(n,e)}function CP(n,e){const t=e?.[QM];return null==t?null:us.makeFromBucketSpec(t,n)}class nx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=YM,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?us.makeFromBucketSpec(i,this._host):CP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?us.makeFromBucketSpec(this._url,e):CP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){z1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){z1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ye.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ye.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xp(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new bU(tP());{const l=function NU(n,e,t,r,i,a,l=!0){const f=iP(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return function MU(n,e){e&&(n["X-Firebase-GMPID"]=e)}(v,e),function kU(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(v,t),function RU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(v,a),function PU(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(v,r),new xU(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,ye.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const DP="@firebase/storage";function xP(n,e){return SV(n=(0,L.m9)(n),e)}function FV(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new nx(t,r,i,e,Jr.SDK_VERSION)}!function UV(){(0,Jr._registerComponent)(new Is.wA("storage",FV,"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(DP,"0.10.0",""),(0,Jr.registerVersion)(DP,"0.10.0","esm2017")}();class UT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RP{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new UT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new UT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new UT(l,this,this._ref)):{next:t.next?l=>t.next(new UT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class MP{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Wc(e,this._service))}get items(){return this._delegate.items.map(e=>new Wc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Wc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function LV(n,e){return bP(n,e)}(this._delegate,e);return new Wc(t,this.storage)}get root(){return new Wc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Wc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new RP(function xV(n,e,t){return function yV(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new vP(n,new bl(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Po.RAW,r){this._throwIfRoot("putString");const i=Y1(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new RP(new vP(this._delegate,new bl(i.data,!0),a),this)}listAll(){return function PV(n){return function wV(n){const e={prefixes:[],items:[]};return EP(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new MP(e,this.storage))}list(e){return function MV(n,e){return IP(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new MP(t,this.storage))}getMetadata(){return function kV(n){return function EV(n){n._throwIfRoot("getMetadata");const e=fP(n.storage,n._location,Nw());return n.storage.makeRequestWithTokens(e,ou)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function RV(n,e){return function IV(n,e){n._throwIfRoot("updateMetadata");const t=function nV(n,e,t,r){const a=Gc(e.fullServerUrl(),n.host,n._protocol),f=X1(t,r),v=n.maxOperationRetryTime,C=new Tl(a,"PATCH",LT(n,r),v);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=f,C.errorHandler=Ow(e),C}(n.storage,n._location,e,Nw());return n.storage.makeRequestWithTokens(t,ou)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function NV(n){return bV(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function OV(n){return function TV(n){n._throwIfRoot("deleteObject");const e=function rV(n,e){const r=Gc(e.fullServerUrl(),n.host,n._protocol),f=new Tl(r,"DELETE",function l(m,v){},n.maxOperationRetryTime);return f.successCodes=[200,204],f.errorHandler=Ow(e),f}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ou)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw nP(e)}}class PP{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(NP(e))throw C_("ref() expected a child path but got a URL, use refFromURL instead.");return new Wc(xP(this._delegate,e),this)}refFromURL(e){if(!NP(e))throw C_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{us.makeFromUrl(e,this._delegate.host)}catch{throw C_("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wc(xP(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function kP(n,e,t,r={}){!function AV(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,L.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function NP(n){return/^[A-Za-z]+:\/\//.test(n)}function jV(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new PP(t,r)}function OP(n){const e=function HV(n){return new Ri.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function uU(n,e=mc.z){return(0,_r.e)((t,r)=>{let i=null,a=null,l=null;const f=()=>{if(i){i.unsubscribe(),i=null;const v=a;a=null,r.next(v)}};function m(){const v=l+n,C=e.now();if(C<v)return i=this.schedule(void 0,v-C),void r.add(i);f()}t.subscribe((0,ne.x)(r,v=>{a=v,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{f(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,b.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function VT(n){return{getDownloadURL:()=>ze(void 0).pipe(ln.fc,ir(()=>n.getDownloadURL()),ln.iC),getMetadata:()=>ze(void 0).pipe(ln.fc,ir(()=>n.getMetadata()),ln.iC),delete:()=>(0,Vt.D)(n.delete()),child:e=>VT(n.child(e)),updateMetadata:e=>(0,Vt.D)(n.updateMetadata(e)),put:(e,t)=>OP(n.put(e,t)),putString:(e,t,r)=>OP(n.putString(e,t,r)),list:e=>(0,Vt.D)(n.list(e)),listAll:()=>(0,Vt.D)(n.listAll())}}!function $V(n){const e={TaskState:Ps,TaskEvent:uV,StringFormat:Po,Storage:PP,Reference:Wc};n.INTERNAL.registerComponent(new Is.wA("storage-compat",jV,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.2.0")}(Qg.Z);const qV=new c.OlP("angularfire2.storageBucket"),GV=new c.OlP("angularfire2.storage.maxUploadRetryTime"),WV=new c.OlP("angularfire2.storage.maxOperationRetryTime"),zV=new c.OlP("angularfire2.storage.use-emulator");let KV=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,A){const P=(0,vr.on)(t,l,r);this.storage=(0,vr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const j=l.runOutsideAngular(()=>P.storage(i||void 0)),z=C;return z&&j.useEmulator(...z),m&&j.setMaxUploadRetryTime(m),v&&j.setMaxOperationRetryTime(v),j},[m,v])}ref(t){return VT(this.storage.ref(t))}refFromURL(t){return VT(this.storage.refFromURL(t))}upload(t,r,i){return VT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(qV,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ln.HU),c.LFG(GV,8),c.LFG(WV,8),c.LFG(zV,8),c.LFG(bw,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),QV=(()=>{class n{constructor(){RT.Z.registerVersion("angularfire",ln.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[KV],imports:[YV]}),n})();var XV=F(5032);const LP="@firebase/database";let rx="";function UP(n){rx=n}class tB{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class nB{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const VP=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new tB(e)}}catch{}return new nB},Jp=VP("localStorage"),ix=VP("sessionStorage"),A_=new Pi.Yd("@firebase/database"),BP=function(){let n=1;return function(){return n++}}(),ZP=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const r=t.digest();return L.US.encodeByteArray(r)},Lw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Lw.apply(null,r):e+="object"==typeof r?(0,L.Wl)(r):r,e+=" "}return e};let eg=null,jP=!0;const $P=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(A_.logLevel=Pi.in.VERBOSE,eg=A_.log.bind(A_),e&&ix.set("logging_enabled",!0)):"function"==typeof n?eg=n:(eg=null,ix.remove("logging_enabled"))},Ui=function(...n){if(!0===jP&&(jP=!1,null===eg&&!0===ix.get("logging_enabled")&&$P(!0)),eg){const e=Lw.apply(null,n);eg(e)}},Fw=function(n){return function(...e){Ui(n,...e)}},sx=function(...n){const e="FIREBASE INTERNAL ERROR: "+Lw(...n);A_.error(e)},Dl=function(...n){const e=`FIREBASE FATAL ERROR: ${Lw(...n)}`;throw A_.error(e),new Error(e)},ls=function(...n){const e="FIREBASE WARNING: "+Lw(...n);A_.warn(e)},BT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Zh="[MIN_NAME]",zc="[MAX_NAME]",tg=function(n,e){if(n===e)return 0;if(n===Zh||e===zc)return-1;if(e===Zh||n===zc)return 1;{const t=GP(n),r=GP(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},sB=function(n,e){return n===e?0:n<e?-1:1},Uw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},ox=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,L.Wl)(e[r]),t+=":",t+=ox(n[e[r]]);return t+="}",t},HP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Vi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qP=function(n){(0,L.hu)(!BT(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const C=v.join("");let A="";for(m=0;m<64;m+=8){let P=parseInt(C.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),A+=P}return A.toLowerCase()},lB=new RegExp("^-?(0*)\\d{1,10}$"),GP=function(n){if(lB.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},x_=function(n){try{n()}catch(e){setTimeout(()=>{throw ls("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Vw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class fB{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ls(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class pB{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ui("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ls(e)}}let Bw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const QP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eN="websocket",tN="long_polling";class ux{constructor(e,t,r,i,a=!1,l="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Jp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function nN(n,e,t){let r;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===eN)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==tN)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function gB(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Vi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class mB{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const lx={},cx={};function dx(n){const e=n.toString();return lx[e]||(lx[e]=new mB),lx[e]}class yB{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&x_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jh{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fw(e),this.stats_=dx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),nN(t,tN,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yB(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hx((...a)=>{const[l,f,m,v,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jh.forceAllow_=!0}static forceDisallow(){jh.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!jh.forceAllow_&&(jh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,L.h$)(t),i=HP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class hx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=BP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=hx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Ui("frame writing exception"),f.stack&&Ui(f.stack),Ui(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ui("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ui("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let jT=null;typeof MozWebSocket<"u"?jT=MozWebSocket:typeof WebSocket<"u"&&(jT=WebSocket);let k_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fw(this.connId),this.stats_=dx(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,L.Yr)()&&typeof location<"u"&&location.hostname&&QP.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),nN(t,eN,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jp.set("previous_websocket_failure",!0);try{let i;if((0,L.Yr)()){i={headers:{"User-Agent":`Firebase/5/${rx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new jT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==jT&&!n.forceDisallow_}static previouslyFailed(){return Jp.isInMemoryStorage||!0===Jp.get("previous_websocket_failure")}markConnectionHealthy(){Jp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,L.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,L.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=HP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),lN=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[jh,k_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=k_&&k_.isAvailable();let i=r&&!k_.previouslyFailed();if(t.webSocketOnly&&(r||ls("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[k_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class mN{constructor(e,t,r,i,a,l,f,m,v,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fw("c:"+this.id+":"),this.transportManager_=new lN(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Vw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Uw("t",e),r=Uw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Uw("t",e),r=Uw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Uw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?sx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ls("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Vw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _N{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class yN{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class $T extends yN{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new $T}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function _n(){return new In("")}function en(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function $h(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function px(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Zw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function EN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function lr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new In(t,0)}function tn(n){return n.pieceNum_>=n.pieces_.length}function Ns(n,e){const t=en(n),r=en(e);if(null===t)return e;if(t===r)return Ns(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function BB(n,e){const t=Zw(n,0),r=Zw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=tg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function gx(n,e){if($h(n)!==$h(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ha(n,e){let t=n.pieceNum_,r=e.pieceNum_;if($h(n)>$h(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class ZB{constructor(e,t){this.errorPrefix_=t,this.parts_=Zw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,L.ug)(this.parts_[r]);IN(this)}}function IN(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ng(n))}function ng(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class mx extends yN{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new mx}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const jw=1e3;let qT,rg=(()=>{class n extends _N{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=Fw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=jw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");mx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&$T.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,L.Wl)(l)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new L.BH,a={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(a),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,C=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const i=(0,L.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ls(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,L.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):sx("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=jw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ye.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const C=function(){v?v.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(j){(0,L.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(j)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[j,z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Ui("getToken() completed but was canceled"):(Ui("getToken() completed. Creating connection."),t.authToken_=j&&j.accessToken,t.appCheckToken_=z&&z.token,v=new mN(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ge=>{ls(ge+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(j){t.log_("Failed to get token: "+j),m||(t.repoInfo_.nodeAdmin&&ls(j),C())}}})()}interrupt(t){Ui("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ui("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=jw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ox(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new In(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ui("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ui("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,L.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+rx.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=$T.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class on{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new on(e,t)}}class HT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new on(Zh,e),i=new on(Zh,t);return 0!==this.compare(r,i)}minPost(){return on.MIN}}class CN extends HT{static get __EMPTY_NODE(){return qT}static set __EMPTY_NODE(e){qT=e}compare(e,t){return tg(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return on.MIN}maxPost(){return new on(zc,qT)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new on(e,qT)}toString(){return".key"}}const Sl=new CN;class GT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let yx,au=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??so.EMPTY_NODE,this.right=l??so.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return so.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return so.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class so{constructor(e,t=so.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new so(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,au.BLACK,null,null))}remove(e){return new so(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,au.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new GT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new GT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new GT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new GT(this.root_,null,this.comparator_,!0,e)}}function KB(n,e){return tg(n.name,e.name)}function _x(n,e){return tg(n,e)}so.EMPTY_NODE=new class zB{copy(e,t,r,i,a){return this}insert(e,t,r){return new au(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DN=function(n){return"number"==typeof n?"number:"+qP(n):"string:"+n},SN=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===yx||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===yx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let AN,xN,kN,R_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SN(this.priorityNode_)}static set __childrenNodeConstructor(t){AN=t}static get __childrenNodeConstructor(){return AN}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return tn(t)?this:".priority"===en(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=en(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,L.hu)(".priority"!==i||1===$h(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+DN(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qP(this.value_):this.value_,this.lazyHash_=ZP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,L.hu)(a>=0,"Unknown leaf type: "+r),(0,L.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Gn=new class JB extends HT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?tg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return on.MIN}maxPost(){return new on(zc,new R_("[PRIORITY-POST]",kN))}makePost(e,t){const r=xN(e);return new on(t,new R_("[PRIORITY-POST]",r))}toString(){return".priority"}},eZ=Math.log(2);class tZ{constructor(e){this.count=parseInt(Math.log(e+1)/eZ,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const WT=function(n,e,t,r){n.sort(e);const i=function(m,v){const C=v-m;let A,P;if(0===C)return null;if(1===C)return A=n[m],P=t?t(A):A,new au(P,A.node,au.BLACK,null,null);{const j=parseInt(C/2,10)+m,z=i(m,j),ge=i(j+1,v);return A=n[j],P=t?t(A):A,new au(P,A.node,au.BLACK,z,ge)}},f=function(m){let v=null,C=null,A=n.length;const P=function(z,ge){const Ee=A-z,dt=A;A-=z;const Et=i(Ee+1,dt),ot=n[Ee],ht=t?t(ot):ot;j(new au(ht,ot.node,ge,null,Et))},j=function(z){v?(v.left=z,v=z):(C=z,v=z)};for(let z=0;z<m.count;++z){const ge=m.nextBitIsOne(),Ee=Math.pow(2,m.count-(z+1));ge?P(Ee,au.BLACK):(P(Ee,au.BLACK),P(Ee,au.RED))}return C}(new tZ(n.length));return new so(r||e,f)};let vx;const M_={};class Kc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(M_&&Gn,"ChildrenNode.ts has not been loaded"),vx=vx||new Kc({".priority":M_},{".priority":Gn}),vx}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof so?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(on.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?WT(r,e.getCompare()):M_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const C=Object.assign({},this.indexes_);return C[m]=f,new Kc(C,v)}addToIndexes(e,t){const r=(0,L.UI)(this.indexes_,(i,a)=>{const l=(0,L.DV)(this.indexSet_,a);if((0,L.hu)(l,"Missing index implementation for "+a),i===M_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(on.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),WT(f,l.getCompare())}return M_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new on(e.name,f))),m.insert(e,e.node)}});return new Kc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,L.UI)(this.indexes_,i=>{if(i===M_)return i;{const a=t.get(e.name);return a?i.remove(new on(e.name,a)):i}});return new Kc(r,this.indexSet_)}}let $w,Yt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&SN(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $w||($w=new n(new so(_x),null,Kc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$w}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$w:r}}getChild(t){const r=en(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,L.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new on(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?$w:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=en(t);if(null===i)return r;{(0,L.hu)(".priority"!==en(t)||1===$h(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Gn,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+DN(this.getPriority().val())+":"),this.forEachChild(Gn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":ZP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new on(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new on(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new on(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,on.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Hw?-1:0}withIndex(t){if(t===Sl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Sl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Gn),a=r.getIterator(Gn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Sl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Hw=new class nZ extends Yt{constructor(){super(new so(_x),Yt.EMPTY_NODE,Kc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Yt.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Yt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new R_(n,Tr(e));if(n instanceof Array){let t=Yt.EMPTY_NODE;return Vi(n,(r,i)=>{if((0,L.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(Vi(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Tr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new on(l,m)))}}),0===t.length)return Yt.EMPTY_NODE;const a=WT(t,KB,l=>l.name,_x);if(r){const l=WT(t,Gn.getCompare());return new Yt(a,Tr(e),new Kc({".priority":l},{".priority":Gn}))}return new Yt(a,Tr(e),Kc.Default)}}Object.defineProperties(on,{MIN:{value:new on(Zh,Yt.EMPTY_NODE)},MAX:{value:new on(zc,Hw)}}),CN.__EMPTY_NODE=Yt.EMPTY_NODE,R_.__childrenNodeConstructor=Yt,function YB(n){yx=n}(Hw),function XB(n){kN=n}(Hw),function QB(n){xN=n}(Tr);class wx extends HT{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!tn(e)&&".priority"!==en(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?tg(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=Yt.EMPTY_NODE.updateChild(this.indexPath_,r);return new on(t,i)}maxPost(){const e=Yt.EMPTY_NODE.updateChild(this.indexPath_,Hw);return new on(zc,e)}toString(){return Zw(this.indexPath_,0).join("/")}}const Ex=new class iZ extends HT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?tg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return on.MIN}maxPost(){return on.MAX}makePost(e,t){const r=Tr(e);return new on(t,r)}toString(){return".value"}};function RN(n){return{type:"value",snapshotNode:n}}function P_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function qw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Gw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Ix{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(qw(t,f)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(P_(t,r)):l.trackChildChange(Gw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Gn,(i,a)=>{t.hasChild(i)||r.trackChildChange(qw(i,a))}),t.isLeafNode()||t.forEachChild(Gn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Gw(i,a,l))}else r.trackChildChange(P_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Yt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ww{constructor(e){this.indexedFilter_=new Ix(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ww.getStartPost_(e),this.endPost_=Ww.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new on(t,r))||(r=Yt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Yt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Yt.EMPTY_NODE);const a=this;return t.forEachChild(Gn,(l,f)=>{a.matches(new on(l,f))||(i=i.updateImmediateChild(l,Yt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class oZ{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ww(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new on(t,r))||(r=Yt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Yt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Yt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();if(this.withinDirectionalStart(f)){if(!this.withinDirectionalEnd(f))break;i=i.updateImmediateChild(f.name,f.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(Yt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const f=a.getNext();l<this.limit_&&this.withinDirectionalStart(f)&&this.withinDirectionalEnd(f)?l++:i=i.updateImmediateChild(f.name,Yt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const A=this.index_.getCompare();l=(P,j)=>A(j,P)}else l=this.index_.getCompare();const f=e;(0,L.hu)(f.numChildren()===this.limit_,"");const m=new on(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(f.hasChild(t)){const A=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const j=null==P?1:l(P,m);if(C&&!r.isEmpty()&&j>=0)return a?.trackChildChange(Gw(t,r,A)),f.updateImmediateChild(t,r);{a?.trackChildChange(qw(t,A));const ge=f.updateImmediateChild(t,Yt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(P_(P.name,P.node)),ge.updateImmediateChild(P.name,P.node)):ge}}return r.isEmpty()?e:C&&l(v,m)>=0?(null!=a&&(a.trackChildChange(qw(v.name,v.node)),a.trackChildChange(P_(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,Yt.EMPTY_NODE)):e}}class zT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zh}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gn}copy(){const e=new zT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Tx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function KT(n,e){const t=n.copy();return t.index_=e,t}function MN(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Gn?t="$priority":n.index_===Ex?t="$value":n.index_===Sl?t="$key":((0,L.hu)(n.index_ instanceof wx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,L.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function PN(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Gn&&(e.i=n.index_.toString()),e}class YT extends _N{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=YT.getListenId_(e,r),f={};this.listens_[l]=f;const m=MN(e._queryParams);this.restRequest_(a+".json",m,(v,C)=>{let A=C;if(404===v&&(A=null,v=null),null===v&&this.onDataUpdate_(a,A,!1,r),(0,L.DV)(this.listens_,l)===f){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=YT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=MN(e._queryParams),r=e._path.toString(),i=new L.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,L.cI)(f.responseText)}catch{ls("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&ls("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class hZ{constructor(){this.rootNode_=Yt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function QT(){return{value:null,children:new Map}}function N_(n,e,t){if(tn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=en(e);n.children.has(r)||n.children.set(r,QT()),N_(n.children.get(r),e=Un(e),t)}}function Cx(n,e){if(tn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Gn,(r,i)=>{N_(n,new In(r),i)}),Cx(n,e)}}if(n.children.size>0){const t=en(e);return e=Un(e),n.children.has(t)&&Cx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Dx(n,e,t){null!==n.value?t(e,n.value):function fZ(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Dx(i,new In(e.toString()+"/"+r),t)})}class pZ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Vi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class _Z{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new pZ(e);const r=1e4+2e4*Math.random();Vw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Vi(e,(i,a)=>{a>0&&(0,L.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Vw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(fa||(fa={})),fa))();function xx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class XT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(tn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new XT(_n(),t,this.revert)}}return(0,L.hu)(en(this.path)===e,"operationForChild called for unrelated child."),new XT(Un(this.path),this.affectedTree,this.revert)}}class zw{constructor(e,t){this.source=e,this.path=t,this.type=fa.LISTEN_COMPLETE}operationForChild(e){return tn(this.path)?new zw(this.source,_n()):new zw(this.source,Un(this.path))}}class ig{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=fa.OVERWRITE}operationForChild(e){return tn(this.path)?new ig(this.source,_n(),this.snap.getImmediateChild(e)):new ig(this.source,Un(this.path),this.snap)}}class O_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=fa.MERGE}operationForChild(e){if(tn(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new ig(this.source,_n(),t.value):new O_(this.source,_n(),t)}return(0,L.hu)(en(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new O_(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Hh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tn(e))return this.isFullyInitialized()&&!this.filtered_;const t=en(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class yZ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Kw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function EZ(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const r=new on(e.childName,e.snapshotNode),i=new on(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function wZ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function JT(n,e){return{eventCache:n,serverCache:e}}function Yw(n,e,t,r){return JT(new Hh(e,t,r),n.serverCache)}function ON(n,e,t,r){return JT(n.eventCache,new Hh(e,t,r))}function eC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function sg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let kx;class Wn{constructor(e,t=(()=>(kx||(kx=new so(sB)),kx))()){this.value=e,this.children=t}static fromObject(e){let t=new Wn(null);return Vi(e,(r,i)=>{t=t.set(new In(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:_n(),value:this.value};if(tn(e))return null;{const r=en(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:lr(new In(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tn(e))return this;{const t=en(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new Wn(null)}}set(e,t){if(tn(e))return new Wn(t,this.children);{const r=en(e),a=(this.children.get(r)||new Wn(null)).set(Un(e),t),l=this.children.insert(r,a);return new Wn(this.value,l)}}remove(e){if(tn(e))return this.children.isEmpty()?new Wn(null):new Wn(null,this.children);{const t=en(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Wn(null):new Wn(this.value,a)}return this}}get(e){if(tn(e))return this.value;{const t=en(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(tn(e))return t;{const r=en(e),a=(this.children.get(r)||new Wn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Wn(this.value,l)}}fold(e){return this.fold_(_n(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(lr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,_n(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(tn(e))return null;{const a=en(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),lr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,_n(),t)}foreachOnPath_(e,t,r){if(tn(e))return this;{this.value&&r(t,this.value);const i=en(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),lr(t,i),r):new Wn(null)}}foreach(e){this.foreach_(_n(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(lr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class uu{constructor(e){this.writeTree_=e}static empty(){return new uu(new Wn(null))}}function Qw(n,e,t){if(tn(e))return new uu(new Wn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ns(i,e);return a=a.updateChild(l,t),new uu(n.writeTree_.set(i,a))}{const i=new Wn(t),a=n.writeTree_.setTree(e,i);return new uu(a)}}}function Rx(n,e,t){let r=n;return Vi(t,(i,a)=>{r=Qw(r,lr(e,i),a)}),r}function LN(n,e){if(tn(e))return uu.empty();{const t=n.writeTree_.setTree(e,new Wn(null));return new uu(t)}}function Mx(n,e){return null!=og(n,e)}function og(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ns(t.path,e)):null}function FN(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Gn,(r,i)=>{e.push(new on(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new on(r,i.value))}),e}function qh(n,e){if(tn(e))return n;{const t=og(n,e);return new uu(null!=t?new Wn(t):n.writeTree_.subtree(e))}}function Px(n){return n.writeTree_.isEmpty()}function L_(n,e){return UN(_n(),n.writeTree_,e)}function UN(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,L.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=UN(lr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(lr(n,".priority"),r)),t}}function tC(n,e){return $N(e,n)}function SZ(n,e){if(n.snap)return ha(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ha(lr(n.path,t),e))return!0;return!1}function xZ(n){return n.visible}function VN(n,e,t){let r=uu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)ha(t,l)?(f=Ns(t,l),r=Qw(r,f,a.snap)):ha(l,t)&&(f=Ns(l,t),r=Qw(r,_n(),a.snap.getChild(f)));else{if(!a.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(ha(t,l))f=Ns(t,l),r=Rx(r,f,a.children);else if(ha(l,t))if(f=Ns(l,t),tn(f))r=Rx(r,_n(),a.children);else{const m=(0,L.DV)(a.children,en(f));if(m){const v=m.getChild(Un(f));r=Qw(r,_n(),v)}}}}}return r}function BN(n,e,t,r,i){if(r||i){const a=qh(n.visibleWrites,e);return!i&&Px(a)?t:i||null!=t||Mx(a,_n())?L_(VN(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(ha(v.path,e)||ha(e,v.path))},e),t||Yt.EMPTY_NODE):null}{const a=og(n.visibleWrites,e);if(null!=a)return a;{const l=qh(n.visibleWrites,e);return Px(l)?t:null!=t||Mx(l,_n())?L_(l,t||Yt.EMPTY_NODE):null}}}function nC(n,e,t,r){return BN(n.writeTree,n.treePath,e,t,r)}function Nx(n,e){return function kZ(n,e,t){let r=Yt.EMPTY_NODE;const i=og(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Gn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=qh(n.visibleWrites,e);return t.forEachChild(Gn,(l,f)=>{const m=L_(qh(a,new In(l)),f);r=r.updateImmediateChild(l,m)}),FN(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return FN(qh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function ZN(n,e,t,r){return function RZ(n,e,t,r,i){(0,L.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=lr(e,t);if(Mx(n.visibleWrites,a))return null;{const l=qh(n.visibleWrites,a);return Px(l)?i.getChild(t):L_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function rC(n,e){return function PZ(n,e){return og(n.visibleWrites,e)}(n.writeTree,lr(n.treePath,e))}function Ox(n,e,t){return function MZ(n,e,t,r){const i=lr(e,t),a=og(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?L_(qh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function jN(n,e){return $N(lr(n.treePath,e),n.writeTree)}function $N(n,e){return{treePath:n,writeTree:e}}class FZ{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Gw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,qw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,P_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Gw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const HN=new class UZ{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Lx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Hh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ox(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sg(this.viewCache_),a=function LZ(n,e,t,r,i,a){return function NZ(n,e,t,r,i,a,l){let f;const m=qh(n.visibleWrites,e),v=og(m,_n());if(null!=v)f=v;else{if(null==t)return[];f=L_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const C=[],A=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let j=P.getNext();for(;j&&C.length<i;)0!==A(j,r)&&C.push(j),j=P.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function qN(n,e,t,r,i,a){const l=e.eventCache;if(null!=rC(r,t))return e;{let f,m;if(tn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=sg(e),A=Nx(r,v instanceof Yt?v:Yt.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),A,a)}else{const v=nC(r,sg(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=en(t);if(".priority"===v){(0,L.hu)(1===$h(t),"Can't have a priority with additional path components");const C=l.getNode();m=e.serverCache.getNode();const A=ZN(r,t,C,m);f=null!=A?n.filter.updatePriority(C,A):l.getNode()}else{const C=Un(t);let A;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=ZN(r,t,l.getNode(),m);A=null!=P?l.getNode().getImmediateChild(v).updateChild(C,P):l.getNode().getImmediateChild(v)}else A=Ox(r,v,e.serverCache);f=null!=A?n.filter.updateChild(l.getNode(),v,A,C,i,a):l.getNode()}}return Yw(e,f,l.isFullyInitialized()||tn(t),n.filter.filtersNodes())}}function iC(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const C=l?n.filter:n.filter.getIndexedFilter();if(tn(t))v=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const j=m.getNode().updateChild(t,r);v=C.updateFullNode(m.getNode(),j,null)}else{const j=en(t);if(!m.isCompleteForPath(t)&&$h(t)>1)return e;const z=Un(t),Ee=m.getNode().getImmediateChild(j).updateChild(z,r);v=".priority"===j?C.updatePriority(m.getNode(),Ee):C.updateChild(m.getNode(),j,Ee,z,HN,null)}const A=ON(e,v,m.isFullyInitialized()||tn(t),C.filtersNodes());return qN(n,A,t,i,new Lx(i,A,a),f)}function Fx(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const C=new Lx(i,e,a);if(tn(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Yw(e,v,!0,n.filter.filtersNodes());else{const A=en(t);if(".priority"===A)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Yw(e,v,f.isFullyInitialized(),f.isFiltered());else{const P=Un(t),j=f.getNode().getImmediateChild(A);let z;if(tn(P))z=r;else{const ge=C.getCompleteChild(A);z=null!=ge?".priority"===px(P)&&ge.getChild(EN(P)).isEmpty()?ge:ge.updateChild(P,r):Yt.EMPTY_NODE}m=j.equals(z)?e:Yw(e,n.filter.updateChild(f.getNode(),A,z,P,C,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function GN(n,e){return n.eventCache.isCompleteForChild(e)}function WN(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Ux(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=tn(t)?r:new Wn(null).setTree(t,r);const C=e.serverCache.getNode();return v.children.inorderTraversal((A,P)=>{if(C.hasChild(A)){const z=WN(0,e.serverCache.getNode().getImmediateChild(A),P);m=iC(n,m,new In(A),z,i,a,l,f)}}),v.children.inorderTraversal((A,P)=>{const j=!e.serverCache.isCompleteForChild(A)&&null===P.value;if(!C.hasChild(A)&&!j){const ge=WN(0,e.serverCache.getNode().getImmediateChild(A),P);m=iC(n,m,new In(A),ge,i,a,l,f)}}),m}class WZ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Ix(r.getIndex()),a=function aZ(n){return n.loadsAllData()?new Ix(n.getIndex()):n.hasLimit()?new oZ(n):new Ww(n)}(r);this.processor_=function VZ(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode(Yt.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode(Yt.EMPTY_NODE,f.getNode(),null),C=new Hh(m,l.isFullyInitialized(),i.filtersNodes()),A=new Hh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=JT(A,C),this.eventGenerator_=new yZ(this.query_)}get query(){return this.query_}}function YZ(n,e){const t=sg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!tn(e)&&!t.getImmediateChild(en(e)).isEmpty())?t.getChild(e):null}function zN(n){return 0===n.eventRegistrations_.length}function KN(n,e,t){const r=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function YN(n,e,t,r){e.type===fa.MERGE&&null!==e.source.queryId&&((0,L.hu)(sg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(eC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function ZZ(n,e,t,r,i){const a=new FZ;let l,f;if(t.type===fa.OVERWRITE){const v=t;v.source.fromUser?l=Fx(n,e,v.path,v.snap,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!tn(v.path),l=iC(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===fa.MERGE){const v=t;v.source.fromUser?l=function $Z(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const C=lr(t,m);GN(e,en(C))&&(f=Fx(n,f,C,v,i,a,l))}),r.foreach((m,v)=>{const C=lr(t,m);GN(e,en(C))||(f=Fx(n,f,C,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,L.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=Ux(n,e,v.path,v.children,r,i,f,a))}else if(t.type===fa.ACK_USER_WRITE){const v=t;l=v.revert?function GZ(n,e,t,r,i,a){let l;if(null!=rC(r,t))return e;{const f=new Lx(r,e,i),m=e.eventCache.getNode();let v;if(tn(t)||".priority"===en(t)){let C;if(e.serverCache.isFullyInitialized())C=nC(r,sg(e));else{const A=e.serverCache.getNode();(0,L.hu)(A instanceof Yt,"serverChildren would be complete if leaf node"),C=Nx(r,A)}v=n.filter.updateFullNode(m,C,a)}else{const C=en(t);let A=Ox(r,C,e.serverCache);null==A&&e.serverCache.isCompleteForChild(C)&&(A=m.getImmediateChild(C)),v=null!=A?n.filter.updateChild(m,C,A,Un(t),f,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,Yt.EMPTY_NODE,Un(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=nC(r,sg(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=rC(r,_n()),Yw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function HZ(n,e,t,r,i,a,l){if(null!=rC(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(tn(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return iC(n,e,t,m.getNode().getChild(t),i,a,f,l);if(tn(t)){let v=new Wn(null);return m.getNode().forEachChild(Sl,(C,A)=>{v=v.set(new In(C),A)}),Ux(n,e,t,v,i,a,f,l)}return e}{let v=new Wn(null);return r.foreach((C,A)=>{const P=lr(t,C);m.isCompleteForPath(P)&&(v=v.set(C,m.getNode().getChild(P)))}),Ux(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==fa.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);l=function qZ(n,e,t,r,i){const a=e.serverCache;return qN(n,ON(e,a.getNode(),a.isFullyInitialized()||tn(t),a.isFiltered()),t,r,HN,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function jZ(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=eC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(RN(eC(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function BZ(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,L.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,QN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function QN(n,e,t,r){return function vZ(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function sZ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),Kw(n,i,"child_removed",e,r,t),Kw(n,i,"child_added",e,r,t),Kw(n,i,"child_moved",a,r,t),Kw(n,i,"child_changed",e,r,t),Kw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let sC,aC;class XN{constructor(){this.views=new Map}}function Vx(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,L.hu)(null!=a,"SyncTree gave us an op for an invalid query."),YN(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(YN(l,e,t,r));return a}}function JN(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=nC(t,i?r:null),m=!1;f?m=!0:r instanceof Yt?(f=Nx(t,r),m=!1):(f=Yt.EMPTY_NODE,m=!1);const v=JT(new Hh(f,m,!1),new Hh(r,i,!1));return new WZ(e,v)}return l}function eO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Gh(n,e){let t=null;for(const r of n.views.values())t=t||YZ(r,e);return t}function tO(n,e){return e._queryParams.loadsAllData()?oC(n):n.views.get(e._queryIdentifier)}function nO(n,e){return null!=tO(n,e)}function Wh(n){return null!=oC(n)}function oC(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let o3=1;class rO{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=function OZ(){return{visibleWrites:uu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bx(n,e,t,r,i){return function bZ(n,e,t,r,i){(0,L.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Qw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?F_(n,new ig({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function zh(n,e,t=!1){const r=function CZ(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function DZ(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&SZ(f,r.path)?i=!1:ha(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function AZ(n){n.visibleWrites=VN(n.allWrites,xZ,_n()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=LN(n.visibleWrites,r.path):Vi(r.children,m=>{n.visibleWrites=LN(n.visibleWrites,lr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Wn(null);return null!=r.snap?a=a.set(_n(),!0):Vi(r.children,l=>{a=a.set(new In(l),!0)}),F_(n,new XT(r.path,a,t))}return[]}function Xw(n,e,t){return F_(n,new ig({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function uC(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let f=[];if(l&&("default"===e._queryIdentifier||nO(l,e))){const m=function r3(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=Wh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(KN(v,t,r)),zN(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(KN(m,t,r)),zN(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!Wh(n)&&a.push(new(function e3(){return(0,L.hu)(sC,"Reference.ts has not been loaded"),sC}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function t3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const v=m.removed;if(f=m.events,!i){const C=-1!==v.findIndex(P=>P._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(a,(P,j)=>Wh(j));if(C&&!A){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const j=function f3(n){return n.fold((e,t,r)=>{if(t&&Wh(t))return[oC(t)];{let i=[];return t&&(i=eO(t)),Vi(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let z=0;z<j.length;++z){const ge=j[z],Ee=ge.query,dt=aO(n,ge);n.listenProvider_.startListening(eE(Ee),Jw(n,Ee),dt.hashFn,dt.onComplete)}}}!A&&v.length>0&&!r&&(C?n.listenProvider_.stopListening(eE(e),null):v.forEach(P=>{const j=n.queryToTagMap.get(cC(P));n.listenProvider_.stopListening(eE(P),j)}))}!function p3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=cC(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,v)}return f}function iO(n,e,t,r){const i=jx(n,r);if(null!=i){const a=$x(i),l=a.path,f=a.queryId,m=Ns(l,e);return Hx(n,l,new ig(xx(f),m,t))}return[]}function Zx(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,j)=>{const z=Ns(P,i);a=a||Gh(j,z),l=l||Wh(j)});let m,f=n.syncPointTree_.get(i);f?(l=l||Wh(f),a=a||Gh(f,_n())):(f=new XN,n.syncPointTree_=n.syncPointTree_.set(i,f)),null!=a?m=!0:(m=!1,a=Yt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((j,z)=>{const ge=Gh(z,_n());ge&&(a=a.updateImmediateChild(j,ge))}));const v=nO(f,e);if(!v&&!e._queryParams.loadsAllData()){const P=cC(e);(0,L.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const j=function g3(){return o3++}();n.queryToTagMap.set(P,j),n.tagToQueryMap.set(j,P)}let A=function n3(n,e,t,r,i,a){const l=JN(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function QZ(n,e){n.eventRegistrations_.push(e)}(l,t),function XZ(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Gn,(a,l)=>{r.push(P_(a,l))}),t.isFullyInitialized()&&r.push(RN(t.getNode())),QN(n,r,t.getNode(),e)}(l,t)}(f,e,t,tC(n.pendingWriteTree_,i),a,m);if(!v&&!l&&!r){const P=tO(f,e);A=A.concat(function m3(n,e,t){const r=e._path,i=Jw(n,e),a=aO(n,t),l=n.listenProvider_.startListening(eE(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,L.hu)(!Wh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,C,A)=>{if(!tn(v)&&C&&Wh(C))return[oC(C).query];{let P=[];return C&&(P=P.concat(eO(C).map(j=>j.query))),Vi(A,(j,z)=>{P=P.concat(z)}),P}});for(let v=0;v<m.length;++v){const C=m[v];n.listenProvider_.stopListening(eE(C),Jw(n,C))}}return l}(n,e,P))}return A}function lC(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=Gh(f,Ns(l,e));if(v)return v});return BN(i,e,a,t,!0)}function F_(n,e){return sO(e,n.syncPointTree_,null,tC(n.pendingWriteTree_,_n()))}function sO(n,e,t,r){if(tn(n.path))return oO(n,e,t,r);{const i=e.get(_n());null==t&&null!=i&&(t=Gh(i,_n()));let a=[];const l=en(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,C=jN(r,l);a=a.concat(sO(f,m,v,C))}return i&&(a=a.concat(Vx(i,n,r,t))),a}}function oO(n,e,t,r){const i=e.get(_n());null==t&&null!=i&&(t=Gh(i,_n()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=jN(r,l),C=n.operationForChild(l);C&&(a=a.concat(oO(C,f,m,v)))}),i&&(a=a.concat(Vx(i,n,r,t))),a}function aO(n,e){const t=e.query,r=Jw(n,t);return{hashFn:()=>(function zZ(n){return n.viewCache_.serverCache.getNode()}(e)||Yt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function c3(n,e,t){const r=jx(n,t);if(r){const i=$x(r),a=i.path,l=i.queryId,f=Ns(a,e);return Hx(n,a,new zw(xx(l),f))}return[]}(n,t._path,r):function l3(n,e){return F_(n,new zw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function uB(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return uC(n,t,null,a)}}}}function Jw(n,e){const t=cC(e);return n.queryToTagMap.get(t)}function cC(n){return n._path.toString()+"$"+n._queryIdentifier}function jx(n,e){return n.tagToQueryMap.get(e)}function $x(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function Hx(n,e,t){const r=n.syncPointTree_.get(e);return(0,L.hu)(r,"Missing sync point for query tag that we're tracking"),Vx(r,t,tC(n.pendingWriteTree_,e),null)}function eE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function s3(){return(0,L.hu)(aC,"Reference.ts has not been loaded"),aC}())(n._repo,n._path):n}class qx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qx(t)}node(){return this.node_}}class Gx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=lr(this.path_,e);return new Gx(this.syncTree_,t)}node(){return lC(this.syncTree_,this.path_)}}const uO=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?y3(n[".sv"],e,t):"object"==typeof n[".sv"]?v3(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},y3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},v3=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,L.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,L.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},lO=function(n,e,t,r){return zx(e,new Gx(t,n),r)},Wx=function(n,e,t){return zx(n,new qx(e),t)};function zx(n,e,t){const r=n.getPriority().val(),i=uO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=uO(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new R_(f,Tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new R_(i))),l.forEachChild(Gn,(f,m)=>{const v=zx(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class Kx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function dC(n,e){let t=e instanceof In?e:new In(e),r=n,i=en(t);for(;null!==i;){const a=(0,L.DV)(r.node.children,i)||{children:{},childCount:0};r=new Kx(i,r,a),t=Un(t),i=en(t)}return r}function ag(n){return n.node.value}function Yx(n,e){n.node.value=e,Qx(n)}function cO(n){return n.node.childCount>0}function hC(n,e){Vi(n.node.children,(t,r)=>{e(new Kx(t,n,r))})}function dO(n,e,t,r){t&&!r&&e(n),hC(n,i=>{dO(i,e,!0,r)}),t&&r&&e(n)}function tE(n){return new In(null===n.parent?n.name:tE(n.parent)+"/"+n.name)}function Qx(n){null!==n.parent&&function I3(n,e,t){const r=function w3(n){return void 0===ag(n)&&!cO(n)}(t),i=(0,L.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Qx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Qx(n))}(n.parent,n.name,n)}const b3=/[\[\].#$\/\u0000-\u001F\u007F]/,T3=/[\[\].#$\u0000-\u001F\u007F]/,Xx=10485760,fC=function(n){return"string"==typeof n&&0!==n.length&&!b3.test(n)},hO=function(n){return"string"==typeof n&&0!==n.length&&!T3.test(n)},nE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!BT(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Al=function(n,e,t,r){r&&void 0===e||rE((0,L.gK)(n,"value"),e,t)},rE=function(n,e,t){const r=t instanceof In?new ZB(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ng(r));if("function"==typeof e)throw new Error(n+"contains a function "+ng(r)+" with contents = "+e.toString());if(BT(e))throw new Error(n+"contains "+e.toString()+" "+ng(r));if("string"==typeof e&&e.length>Xx/3&&(0,L.ug)(e)>Xx)throw new Error(n+"contains a string greater than "+Xx+" utf8 bytes "+ng(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Vi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!fC(l)))throw new Error(n+" contains an invalid key ("+l+") "+ng(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function jB(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),IN(n)})(r,l),rE(n,f,r),function $B(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ng(r)+" in addition to actual children.")}},fO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Vi(e,(l,f)=>{const m=new In(l);if(rE(i,f,lr(t,m)),".priority"===px(m)&&!nE(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Zw(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!fC(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(BB);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ha(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Jx=function(n,e,t){if(!t||void 0!==e){if(BT(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!nE(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},iE=function(n,e,t,r){if(!(r&&void 0===t||fC(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},sE=function(n,e,t,r){if(!(r&&void 0===t||hO(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pa=function(n,e){if(".info"===en(e))throw new Error(n+" failed = Can't modify data under /.info/")},pO=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!fC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),hO(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class A3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!gx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function gO(n,e,t){pC(n,t),mO(n,r=>gx(r,e))}function No(n,e,t){pC(n,t),mO(n,r=>ha(r,e)||ha(e,r))}function mO(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(x3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function x3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();eg&&Ui("event: "+t.toString()),x_(r)}}}const _O="repo_interrupt";class R3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new A3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=QT(),this.transactionQueueTree_=new Kx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yO(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function oE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:yO(n)})}function vO(n,e,t,r,i){n.dataUpdateCount++;const a=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,L.UI)(t,v=>Tr(v));l=function d3(n,e,t,r){const i=jx(n,r);if(i){const a=$x(i),l=a.path,f=a.queryId,m=Ns(l,e),v=Wn.fromObject(t);return Hx(n,l,new O_(xx(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Tr(t);l=iO(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,L.UI)(t,v=>Tr(v));l=function u3(n,e,t){const r=Wn.fromObject(t);return F_(n,new O_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Tr(t);l=Xw(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=V_(n,a)),No(n.eventQueue_,f,l)}function wO(n,e){ek(n,"connected",e),!1===e&&function L3(n){U_(n,"onDisconnectEvents");const e=oE(n),t=QT();Dx(n.onDisconnect_,_n(),(i,a)=>{const l=lO(i,a,n.serverSyncTree_,e);N_(t,i,l)});let r=[];Dx(t,_n(),(i,a)=>{r=r.concat(Xw(n.serverSyncTree_,i,a));const l=ik(n,i);V_(n,l)}),n.onDisconnect_=QT(),No(n.eventQueue_,_n(),r)}(n)}function ek(n,e,t){const r=new In("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=Xw(n.infoSyncTree_,r,i);No(n.eventQueue_,r,a)}function gC(n){return n.nextWriteId_++}function tk(n,e,t,r,i){U_(n,"set",{path:e.toString(),value:t,priority:r});const a=oE(n),l=Tr(t,r),f=lC(n.serverSyncTree_,e),m=Wx(l,f,a),v=gC(n),C=Bx(n.serverSyncTree_,e,m,v,!0);pC(n.eventQueue_,C),n.server_.put(e.toString(),l.val(!0),(P,j)=>{const z="ok"===P;z||ls("set at "+e+" failed: "+P);const ge=zh(n.serverSyncTree_,v,!z);No(n.eventQueue_,e,ge),Kh(0,i,P,j)});const A=ik(n,e);V_(n,A),No(n.eventQueue_,A,[])}function F3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Cx(n.onDisconnect_,e),Kh(0,t,r,i)})}function EO(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&N_(n.onDisconnect_,e,i),Kh(0,r,a,l)})}function nk(n,e,t){let r;r=".info"===en(e._path)?uC(n.infoSyncTree_,e,t):uC(n.serverSyncTree_,e,t),gO(n.eventQueue_,e._path,r)}function IO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(_O)}function U_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ui(t,...e)}function Kh(n,e,t,r){e&&x_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function rk(n,e,t){return lC(n.serverSyncTree_,e,t)||Yt.EMPTY_NODE}function mC(n,e=n.transactionQueueTree_){if(e||_C(n,e),ag(e)){const t=TO(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function $3(n,e,t){const r=t.map(v=>v.currentWriteId),i=rk(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const C=t[v];(0,L.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const A=Ns(e,C.path);a=a.updateChild(A,C.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{U_(n,"transaction put response",{path:m.toString(),status:v});let C=[];if("ok"===v){const A=[];for(let P=0;P<t.length;P++)t[P].status=2,C=C.concat(zh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&A.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();_C(n,dC(n.transactionQueueTree_,e)),mC(n,n.transactionQueueTree_),No(n.eventQueue_,e,C);for(let P=0;P<A.length;P++)x_(A[P])}else{if("datastale"===v)for(let A=0;A<t.length;A++)t[A].status=3===t[A].status?4:0;else{ls("transaction at "+m.toString()+" failed: "+v);for(let A=0;A<t.length;A++)t[A].status=4,t[A].abortReason=v}V_(n,e)}},l)}(n,tE(e),t)}else cO(e)&&hC(e,t=>{mC(n,t)})}function V_(n,e){const t=bO(n,e),r=tE(t);return function H3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Ns(t,m.path);let A,C=!1;if((0,L.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,A=m.abortReason,i=i.concat(zh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,A="maxretry",i=i.concat(zh(n.serverSyncTree_,m.currentWriteId,!0));else{const P=rk(n,m.path,l);m.currentInputSnapshot=P;const j=e[f].update(P.val());if(void 0!==j){rE("transaction failed: Data returned ",j,m.path);let z=Tr(j);"object"==typeof j&&null!=j&&(0,L.r3)(j,".priority")||(z=z.updatePriority(P.getPriority()));const Ee=m.currentWriteId,dt=oE(n),Et=Wx(z,P,dt);m.currentOutputSnapshotRaw=z,m.currentOutputSnapshotResolved=Et,m.currentWriteId=gC(n),l.splice(l.indexOf(Ee),1),i=i.concat(Bx(n.serverSyncTree_,m.path,Et,m.currentWriteId,m.applyLocally)),i=i.concat(zh(n.serverSyncTree_,Ee,!0))}else C=!0,A="nodata",i=i.concat(zh(n.serverSyncTree_,m.currentWriteId,!0))}No(n.eventQueue_,t,i),i=[],C&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===A?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(A),!1,null)))}_C(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)x_(r[f]);mC(n,n.transactionQueueTree_)}(n,TO(n,t),r),r}function bO(n,e){let t,r=n.transactionQueueTree_;for(t=en(e);null!==t&&void 0===ag(r);)r=dC(r,t),t=en(e=Un(e));return r}function TO(n,e){const t=[];return CO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function CO(n,e,t){const r=ag(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);hC(e,i=>{CO(n,i,t)})}function _C(n,e){const t=ag(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,Yx(e,t.length>0?t:void 0)}hC(e,r=>{_C(n,r)})}function ik(n,e){const t=tE(bO(n,e)),r=dC(n.transactionQueueTree_,e);return function E3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{sk(n,i)}),sk(n,r),dO(r,i=>{sk(n,i)}),t}function sk(n,e){const t=ag(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,L.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,L.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(zh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Yx(e,void 0):t.length=a+1,No(n.eventQueue_,tE(e),i);for(let l=0;l<r.length;l++)x_(r[l])}}const ok=function(n,e){const t=W3(n),r=t.namespace;return"firebase.com"===t.domain&&Dl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Dl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ls("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ux(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new In(t.pathString)}},W3=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let C=n.indexOf("/");-1===C&&(C=n.length);let A=n.indexOf("?");-1===A&&(A=n.length),e=n.substring(0,Math.min(C,A)),C<A&&(i=function q3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(C,A)));const P=function G3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ls(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,A)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const j=e.slice(0,v);if("localhost"===j.toLowerCase())t="localhost";else if(j.split(".").length<=2)t=j;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}},DO="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",z3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=DO.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=DO.charAt(e[i]);return(0,L.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class SO{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class AO{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ak{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xO{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return F3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){pa("OnDisconnect.remove",this._path);const e=new L.BH;return EO(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){pa("OnDisconnect.set",this._path),Al("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return EO(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){pa("OnDisconnect.setWithPriority",this._path),Al("OnDisconnect.setWithPriority",e,this._path,!1),Jx("OnDisconnect.setWithPriority",t,!1);const r=new L.BH;return function U3(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&N_(n.onDisconnect_,e,a),Kh(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){pa("OnDisconnect.update",this._path),fO("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function V3(n,e,t,r){if((0,L.xb)(t))return Ui("onDisconnect().update() called with empty data.  Don't do anything."),void Kh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Vi(t,(l,f)=>{const m=Tr(f);N_(n.onDisconnect_,lr(e,l),m)}),Kh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class oo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return tn(this._path)?null:px(this._path)}get ref(){return new ga(this._repo,this._path)}get _queryIdentifier(){const e=PN(this._queryParams),t=ox(e);return"{}"===t?"default":t}get _queryObject(){return PN(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof oo))return!1;const t=this._repo===e._repo,r=gx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function VB(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function yC(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Yh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Sl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Zh)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==zc)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Gn){if(null!=e&&!nE(e)||null!=t&&!nE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof wx||n.getIndex()===Ex,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vC(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ga extends oo{constructor(e,t){super(e,t,new zT,!1)}get parent(){const e=EN(this._path);return null===e?null:new ga(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class ug{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=lg(this.ref,e);return new ug(this._node.getChild(t),r,Gn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new ug(i,lg(this.ref,r),Gn)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kO(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?lg(n._root,e):n._root}function RO(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=ok(e,n._repo.repoInfo_.nodeAdmin);pO("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Dl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),kO(n,t.path.toString())}function lg(n,e){return null===en((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),sE("child","path",t,!1)):sE("child","path",e,!1),new ga(n._repo,lr(n._path,e));var t}function uk(n,e){n=(0,L.m9)(n),pa("set",n._path),Al("set",e,n._path,!1);const t=new L.BH;return tk(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function J3(n,e){fO("update",e,n._path,!1);const t=new L.BH;return function O3(n,e,t,r){U_(n,"update",{path:e.toString(),value:t});let i=!0;const a=oE(n),l={};if(Vi(t,(f,m)=>{i=!1,l[f]=lO(lr(e,f),Tr(m),n.serverSyncTree_,a)}),i)Ui("update() called with empty data.  Don't do anything."),Kh(0,r,"ok",void 0);else{const f=gC(n),m=function a3(n,e,t,r){!function TZ(n,e,t,r){(0,L.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Rx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Wn.fromObject(t);return F_(n,new O_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);pC(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,C)=>{const A="ok"===v;A||ls("update at "+e+" failed: "+v);const P=zh(n.serverSyncTree_,f,!A),j=P.length>0?V_(n,e):e;No(n.eventQueue_,j,P),Kh(0,r,v,C)}),Vi(t,v=>{const C=ik(n,lr(e,v));V_(n,C)}),No(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ej(n){n=(0,L.m9)(n);const e=new ak(()=>{}),t=new aE(e);return function N3(n,e,t){const r=function h3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,C)=>{const A=Ns(v,t);r=r||Gh(C,A)});let i=n.syncPointTree_.get(t);i?r=r||Gh(i,_n()):(i=new XN,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Hh(r,!0,!1):null;return function KZ(n){return eC(n.viewCache_)}(JN(i,e,tC(n.pendingWriteTree_,e._path),a?l.getNode():Yt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Tr(i).withIndex(e._queryParams.getIndex());let l;if(Zx(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=Xw(n.serverSyncTree_,e._path,a);else{const f=Jw(n.serverSyncTree_,e);l=iO(n.serverSyncTree_,e._path,a,f)}return No(n.eventQueue_,e._path,l),uC(n.serverSyncTree_,e,t,null,!0),a},i=>(U_(n,"get for query "+(0,L.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new ug(r,new ga(n._repo,n._path),n._queryParams.getIndex()))}class aE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new SO("value",this,new ug(e.snapshotNode,new ga(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AO(this,e,t):null}matches(e){return e instanceof aE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class wC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new AO(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const r=lg(new ga(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new SO(e.type,this,new ug(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof wC&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(C,A)=>{nk(n._repo,n,f),m(C,A)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new ak(t,a||void 0),f="value"===e?new aE(l):new wC(e,l);return function B3(n,e,t){let r;r=".info"===en(e._path)?Zx(n.infoSyncTree_,e,t):Zx(n.serverSyncTree_,e,t),gO(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>nk(n._repo,n,f)}function lk(n,e,t,r){return uE(n,"value",e,t,r)}function MO(n,e,t,r){return uE(n,"child_added",e,t,r)}function PO(n,e,t,r){return uE(n,"child_changed",e,t,r)}function NO(n,e,t,r){return uE(n,"child_moved",e,t,r)}function OO(n,e,t,r){return uE(n,"child_removed",e,t,r)}function LO(n,e,t){let r=null;const i=t?new ak(t):null;"value"===e?r=new aE(i):e&&(r=new wC(e,i)),nk(n._repo,n,r)}class lu{}class FO extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Al("endAt",this._value,e._path,!0);const t=Tx(e._queryParams,this._value,this._key);if(vC(t),Yh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class nj extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Al("endBefore",this._value,e._path,!1);const t=function dZ(n,e,t){let r;return r=Tx(n,e,n.index_===Sl||t?t:Zh),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(vC(t),Yh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class UO extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Al("startAt",this._value,e._path,!0);const t=bx(e._queryParams,this._value,this._key);if(vC(t),Yh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class sj extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Al("startAfter",this._value,e._path,!1);const t=function cZ(n,e,t){let r;return r=bx(n,e,n.index_===Sl||t?t:zc),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(vC(t),Yh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class aj extends lu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function uZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class lj extends lu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function lZ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class dj extends lu{constructor(e){super(),this._path=e}_apply(e){yC(e,"orderByChild");const t=new In(this._path);if(tn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new wx(t),i=KT(e._queryParams,r);return Yh(i),new oo(e._repo,e._path,i,!0)}}class fj extends lu{_apply(e){yC(e,"orderByKey");const t=KT(e._queryParams,Sl);return Yh(t),new oo(e._repo,e._path,t,!0)}}class gj extends lu{_apply(e){yC(e,"orderByPriority");const t=KT(e._queryParams,Gn);return Yh(t),new oo(e._repo,e._path,t,!0)}}class _j extends lu{_apply(e){yC(e,"orderByValue");const t=KT(e._queryParams,Ex);return Yh(t),new oo(e._repo,e._path,t,!0)}}class vj extends lu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Al("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new FO(this._value,this._key)._apply(new UO(this._value,this._key)._apply(e))}}function cu(n,...e){let t=(0,L.m9)(n);for(const r of e)t=r._apply(t);return t}(function JZ(n){(0,L.hu)(!sC,"__referenceConstructor has already been defined"),sC=n})(ga),function i3(n){(0,L.hu)(!aC,"__referenceConstructor has already been defined"),aC=n}(ga);const ck={};function BO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Dl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ui("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=ok(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=ok(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const C=i&&m?new Bw(Bw.OWNER):new pB(n.name,n.options,e);pO("Invalid Firebase Database URL",l),tn(l.path)||Dl("Database URL must point to the root of a Firebase Database (not including a child path).");const A=function Tj(n,e,t,r){let i=ck[e.name];i||(i={},ck[e.name]=i);let a=i[n.toURLString()];return a&&Dl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new R3(n,false,t,r),i[n.toURLString()]=a,a}(f,n,C,new fB(n.name,t));return new Dj(A,n)}class Dj{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function M3(n,e,t){if(n.stats_=dx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new YT(n.repoInfo_,(r,i,a,l)=>{vO(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wO(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new rg(n.repoInfo_,e,(r,i,a,l)=>{vO(n,r,i,a,l)},r=>{wO(n,r)},r=>{!function P3(n,e){Vi(e,(t,r)=>{ek(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function _B(n,e){const t=n.toString();return cx[t]||(cx[t]=e()),cx[t]}(n.repoInfo_,()=>new _Z(n.stats_,n.server_)),n.infoData_=new hZ,n.infoSyncTree_=new rO({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Xw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),ek(n,"connected",!1),n.serverSyncTree_=new rO({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);No(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ga(this._repo,_n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function bj(n,e){const t=ck[e];(!t||t[n.key]!==n)&&Dl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IO(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Dl("Cannot call "+e+" on a deleted database.")}}function ZO(){lN.IS_TRANSPORT_INITIALIZED&&ls("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Sj(){ZO(),jh.forceDisallow()}function Aj(){ZO(),k_.forceDisallow(),jh.forceAllow()}function Rj(n,e){$P(n,e)}const Pj={".sv":"timestamp"};class Lj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}rg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},rg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Mj(n){UP(Jr.SDK_VERSION),(0,Jr._registerComponent)(new Is.wA("database",(e,{instanceIdentifier:t})=>BO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Jr.registerVersion)(LP,"0.14.0",n),(0,Jr.registerVersion)(LP,"0.14.0","esm2017")}();const Bj=new Pi.Yd("@firebase/database-compat"),$O=function(n){Bj.warn("FIREBASE WARNING: "+n)};class $j{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$O("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Hj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Qh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),sE("DataSnapshot.child","path",e,!1),new Qh(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),sE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Qh(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new Oo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const l=Xi.getCancelAndContextArgs_("Query.on",r,i),f=(v,C)=>{t.call(l.context,new Qh(this.database,v),C)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return lk(this._delegate,f,m),t;case"child_added":return MO(this._delegate,f,m),t;case"child_removed":return OO(this._delegate,f,m),t;case"child_changed":return PO(this._delegate,f,m),t;case"child_moved":return NO(this._delegate,f,m),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,LO(this._delegate,e,i)}else LO(this._delegate,e)}get(){return ej(this._delegate).then(e=>new Qh(this.database,e))}once(e,t,r,i){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const a=Xi.getCancelAndContextArgs_("Query.once",r,i),l=new L.BH,f=(v,C)=>{const A=new Qh(this.database,v);t&&t.call(a.context,A,C),l.resolve(A)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":lk(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":MO(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":OO(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":PO(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":NO(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new Xi(this.database,cu(this._delegate,function uj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new aj(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new Xi(this.database,cu(this._delegate,function cj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new lj(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new Xi(this.database,cu(this._delegate,function hj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return sE("orderByChild","path",n,!1),new dj(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new Xi(this.database,cu(this._delegate,function pj(){return new fj}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new Xi(this.database,cu(this._delegate,function mj(){return new gj}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new Xi(this.database,cu(this._delegate,function yj(){return new _j}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new Xi(this.database,cu(this._delegate,function ij(n=null,e){return iE("startAt","key",e,!0),new UO(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new Xi(this.database,cu(this._delegate,function oj(n,e){return iE("startAfter","key",e,!0),new sj(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new Xi(this.database,cu(this._delegate,function tj(n,e){return iE("endAt","key",e,!0),new FO(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new Xi(this.database,cu(this._delegate,function rj(n,e){return iE("endBefore","key",e,!0),new nj(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new Xi(this.database,cu(this._delegate,function wj(n,e){return iE("equalTo","key",e,!0),new vj(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Xi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,L.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,L.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Oo(this.database,new ga(this._delegate._repo,this._delegate._path))}}class Oo extends Xi{constructor(e,t){super(e,new oo(t._repo,t._path,new zT,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Oo(this.database,lg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Oo(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new Oo(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const r=uk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,$O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}pa("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const r=J3(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function X3(n,e,t){if(pa("setWithPriority",n._path),Al("setWithPriority",e,n._path,!1),Jx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new L.BH;return tk(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function Y3(n){return pa("remove",n._path),uk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function Fj(n,e,t){var r;if(n=(0,L.m9)(n),pa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new L.BH,f=lk(n,()=>{});return function j3(n,e,t,r,i,a){U_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:BP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=rk(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{rE("transaction failed: Data returned ",m,l.path),l.status=0;const v=dC(n.transactionQueueTree_,e),C=ag(v)||[];let A;C.push(l),Yx(v,C),"object"==typeof m&&null!==m&&(0,L.r3)(m,".priority")?(A=(0,L.DV)(m,".priority"),(0,L.hu)(nE(A),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):A=(lC(n.serverSyncTree_,e)||Yt.EMPTY_NODE).getPriority().val();const P=oE(n),j=Tr(m,A),z=Wx(j,f,P);l.currentOutputSnapshotRaw=j,l.currentOutputSnapshotResolved=z,l.currentWriteId=gC(n);const ge=Bx(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);No(n.eventQueue_,e,ge),mC(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,C)=>{let A=null;m?a.reject(m):(A=new ug(C,new ga(n._repo,n._path),Gn),a.resolve(new Lj(v,A)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Hj(a.committed,new Qh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Q3(n,e){n=(0,L.m9)(n),pa("setPriority",n._path),Jx("setPriority",e,!1);const t=new L.BH;return tk(n._repo,lr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const r=function K3(n,e){n=(0,L.m9)(n),pa("push",n._path),Al("push",e,n._path,!0);const t=yO(n._repo),r=z3(t),i=lg(n,r),a=lg(n,r);let l;return l=null!=e?uk(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Oo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Oo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return pa("Reference.onDisconnect",this._delegate._path),new $j(new xO(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class lE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Sj,forceLongPolling:Aj}}useEmulator(e,t,r={}){!function jO(n,e,t,r={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Dl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Dl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Bw(Bw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,L.Sg)(r.mockUserToken,n.app.options.projectId);a=new Bw(l)}!function Ij(n,e,t,r){n.repoInfo_=new ux(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof Oo){const t=RO(this._delegate,e.toString());return new Oo(this,t)}{const t=kO(this._delegate,e);return new Oo(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const r=RO(this._delegate,e);return new Oo(this,r)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function xj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),IO(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function kj(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function Z3(n){n.persistentConnection_&&n.persistentConnection_.resume(_O)}(n._repo)}(this._delegate)}}lE.ServerValue={TIMESTAMP:function Nj(){return Pj}(),increment:n=>function Oj(n){return{".sv":{increment:n}}}(n)};var Gj=Object.freeze({__proto__:null,initStandalone:function qj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UP(t);const l=new Is.zt("auth-internal",new Is.H0("database-standalone"));return l.setComponent(new Is.wA("auth-internal",()=>r,"PRIVATE")),{instance:new lE(BO(n,l,void 0,e,a),n),namespace:i}}});const Wj=lE.ServerValue;function HO(n){return null==n}function qO(n){return"function"==typeof n.set}function GO(n,e){return qO(e)?e:n.ref(e)}function WO(n,e){if(function Kj(n){return"string"==typeof n}(n))return e.stringCase();if(qO(n))return e.firebaseCase();if(function Yj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function cE(n,e,t="on",r=mc.z){return new Ri.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,b.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,gM.B)())}function zO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Jj(n,e){const{payload:t,prevKey:r,key:i}=e,a=zO(n,i),l=function Xj(n,e){if(HO(e))return 0;{const t=zO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function KO(n){return(HO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function YO(n,e,t){return function Qj(n,e,t){return cE(n,"value","once",t).pipe(ir(r=>{const i=[ze(r)];return e.forEach(a=>i.push(cE(n,a,"on",t))),(0,g1.T)(...i).pipe(ta(Jj,[]))}),Gy())}(n,e=KO(e),t)}function QO(n,e,t){const r=(e=KO(e)).map(i=>cE(n,i,"on",t));return(0,g1.T)(...r)}function XO(n,e){return function(r,i){return WO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function r$(n){return function(t){return t?WO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function JO(n,e){return function(){return cE(n,"value","on",e)}}!function zj(n){n.INTERNAL.registerComponent(new Is.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new lE(i,r)},"PUBLIC").setServiceProps({Reference:Oo,Query:Xi,Database:lE,DataSnapshot:Qh,enableLogging:Rj,INTERNAL:Gj,ServerValue:Wj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.0")}(Qg.Z);const o$=new c.OlP("angularfire2.realtimeDatabaseURL"),a$=new c.OlP("angularfire2.database.use-emulator");let u$=(()=>{class n{constructor(t,r,i,a,l,f,m,v,C,A,P,j,z,ge,Ee){this.schedulers=f;const dt=m,Et=(0,vr.on)(t,l,r);v&&j1(Et,l,C,P,j,z,A,ge),this.database=(0,vr.cc)(`${Et.name}.database.${i}`,"AngularFireDatabase",Et.name,()=>{const ot=l.runOutsideAngular(()=>Et.database(i||void 0));return dt&&ot.useEmulator(...dt),ot},[dt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>GO(this.database,t));let a=i;return r&&(a=r(i)),function i$(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XO(r,"update"),set:XO(r,"set"),push:i=>r.push(i),remove:r$(r),snapshotChanges:i=>YO(n,i,t).pipe(ln.iC),stateChanges:i=>QO(n,i,t).pipe(ln.iC),auditTrail:i=>function e$(n,e,t){return function n$(n,e,t){return function t$(n,e){return cE(n,"value","on",e).pipe((0,b.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function JV(...n){const e=(0,Ws.jO)(n);return(0,_r.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,Mn.Xf)(n[m]).subscribe((0,ne.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every(Gi.y))&&(l=null))},XV.Z));t.subscribe((0,ne.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,b.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function eB(n){return(0,_r.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,ne.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,b.U)(i=>i.actions))}(n,QO(n,e).pipe(ta((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(ln.iC),valueChanges:(i,a)=>YO(n,i,t).pipe((0,b.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),ln.iC)}}(a,this)}object(t){return function s$(n,e){return{query:n,snapshotChanges:()=>JO(n,e.schedulers.outsideAngular)().pipe(ln.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>JO(n,e.schedulers.outsideAngular)().pipe(ln.iC,(0,b.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>GO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(vr.Dh),c.LFG(vr.xv,8),c.LFG(o$,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(ln.HU),c.LFG(a$,8),c.LFG(Tw,8),c.LFG(L1,8),c.LFG(F1,8),c.LFG(U1,8),c.LFG(V1,8),c.LFG(B1,8),c.LFG(Z1,8),c.LFG(bw,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l$=(()=>{class n{constructor(){RT.Z.registerVersion("angularfire",ln.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[u$]}),n})();class B_{}B_.\u0275fac=function(e){return new(e||B_)},B_.\u0275mod=c.oAB({type:B_}),B_.\u0275inj=c.cJS({imports:[Ji]});class Z_{}Z_.\u0275fac=function(e){return new(e||Z_)},Z_.\u0275mod=c.oAB({type:Z_}),Z_.\u0275inj=c.cJS({imports:[Ji]});class j_{}j_.\u0275fac=function(e){return new(e||j_)},j_.\u0275mod=c.oAB({type:j_,bootstrap:[Rw]}),j_.\u0275inj=c.cJS({providers:[su],imports:[Aa,T_,vr.hO.initializeApp({apiKey:"AIzaSyBp6WeJHtaPp8u6Fg3QP1V-53fJNsM6cFI",authDomain:"kritsnamtech-16f50.firebaseapp.com",projectId:"kritsnamtech-16f50",storageBucket:"kritsnamtech-16f50.appspot.com",messagingSenderId:"1020522388775",appId:"1:1020522388775:web:f0c35cf077a529f2081d02"}),K2,rU,QV,l$,B_,Z_]}),ci().bootstrapModule(j_).catch(n=>console.error(n))},9751:(ft,Ce,F)=>{F.d(Ce,{y:()=>fe});var c=F(930),$=F(727),N=F(8822),se=F(9635),ae=F(2416),ce=F(576),ve=F(2806);let fe=(()=>{class J{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const qe=new J;return qe.source=this,qe.operator=xe,qe}subscribe(xe,qe,it){const _e=function W(J){return J&&J instanceof c.Lv||function G(J){return J&&(0,ce.m)(J.next)&&(0,ce.m)(J.error)&&(0,ce.m)(J.complete)}(J)&&(0,$.Nn)(J)}(xe)?xe:new c.Hp(xe,qe,it);return(0,ve.x)(()=>{const{operator:De,source:Te}=this;_e.add(De?De.call(_e,Te):Te?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(xe){try{return this._subscribe(xe)}catch(qe){xe.error(qe)}}forEach(xe,qe){return new(qe=me(qe))((it,_e)=>{const De=new c.Hp({next:Te=>{try{xe(Te)}catch(Me){_e(Me),De.unsubscribe()}},error:_e,complete:it});this.subscribe(De)})}_subscribe(xe){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(xe)}[N.L](){return this}pipe(...xe){return(0,se.U)(xe)(this)}toPromise(xe){return new(xe=me(xe))((qe,it)=>{let _e;this.subscribe(De=>_e=De,De=>it(De),()=>qe(_e))})}}return J.create=Be=>new J(Be),J})();function me(J){var Be;return null!==(Be=J??ae.v.Promise)&&void 0!==Be?Be:Promise}},7579:(ft,Ce,F)=>{F.d(Ce,{x:()=>ve});var c=F(9751),$=F(727);const se=(0,F(3888).d)(me=>function(){me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=F(8737),ce=F(2806);let ve=(()=>{class me extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const J=new fe(this,this);return J.operator=W,J}_throwIfClosed(){if(this.closed)throw new se}next(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const J of this.currentObservers)J.next(W)}})}error(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:J}=this;for(;J.length;)J.shift().error(W)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:J,isStopped:Be,observers:xe}=this;return J||Be?$.Lc:(this.currentObservers=null,xe.push(W),new $.w0(()=>{this.currentObservers=null,(0,ae.P)(xe,W)}))}_checkFinalizedStatuses(W){const{hasError:J,thrownError:Be,isStopped:xe}=this;J?W.error(Be):xe&&W.complete()}asObservable(){const W=new c.y;return W.source=this,W}}return me.create=(G,W)=>new fe(G,W),me})();class fe extends ve{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===J||J.call(W,G)}error(G){var W,J;null===(J=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===J||J.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,J;return null!==(J=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==J?J:$.Lc}}},930:(ft,Ce,F)=>{F.d(Ce,{Hp:()=>it,Lv:()=>J});var c=F(576),$=F(727),N=F(2416),se=F(7849),ae=F(5032);const ce=me("C",void 0,void 0);function me(Le,Pe,Se){return{kind:Le,value:Pe,error:Se}}var G=F(3410),W=F(2806);class J extends $.w0{constructor(Pe){super(),this.isStopped=!1,Pe?(this.destination=Pe,(0,$.Nn)(Pe)&&Pe.add(this)):this.destination=Me}static create(Pe,Se,He){return new it(Pe,Se,He)}next(Pe){this.isStopped?Te(function fe(Le){return me("N",Le,void 0)}(Pe),this):this._next(Pe)}error(Pe){this.isStopped?Te(function ve(Le){return me("E",void 0,Le)}(Pe),this):(this.isStopped=!0,this._error(Pe))}complete(){this.isStopped?Te(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Pe){this.destination.next(Pe)}_error(Pe){try{this.destination.error(Pe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function xe(Le,Pe){return Be.call(Le,Pe)}class qe{constructor(Pe){this.partialObserver=Pe}next(Pe){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Pe)}catch(He){_e(He)}}error(Pe){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Pe)}catch(He){_e(He)}else _e(Pe)}complete(){const{partialObserver:Pe}=this;if(Pe.complete)try{Pe.complete()}catch(Se){_e(Se)}}}class it extends J{constructor(Pe,Se,He){let te;if(super(),(0,c.m)(Pe)||!Pe)te={next:Pe??void 0,error:Se??void 0,complete:He??void 0};else{let de;this&&N.v.useDeprecatedNextContext?(de=Object.create(Pe),de.unsubscribe=()=>this.unsubscribe(),te={next:Pe.next&&xe(Pe.next,de),error:Pe.error&&xe(Pe.error,de),complete:Pe.complete&&xe(Pe.complete,de)}):te=Pe}this.destination=new qe(te)}}function _e(Le){N.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Le):(0,se.h)(Le)}function Te(Le,Pe){const{onStoppedNotification:Se}=N.v;Se&&G.z.setTimeout(()=>Se(Le,Pe))}const Me={closed:!0,next:ae.Z,error:function De(Le){throw Le},complete:ae.Z}},727:(ft,Ce,F)=>{F.d(Ce,{Lc:()=>ce,w0:()=>ae,Nn:()=>ve});var c=F(576);const N=(0,F(3888).d)(me=>function(W){me(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((J,Be)=>`${Be+1}) ${J.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var se=F(8737);class ae{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const xe of W)xe.remove(this);else W.remove(this);const{initialTeardown:J}=this;if((0,c.m)(J))try{J()}catch(xe){G=xe instanceof N?xe.errors:[xe]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const xe of Be)try{fe(xe)}catch(qe){G=G??[],qe instanceof N?G=[...G,...qe.errors]:G.push(qe)}}if(G)throw new N(G)}}add(G){var W;if(G&&G!==this)if(this.closed)fe(G);else{if(G instanceof ae){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,se.P)(W,G)}remove(G){const{_finalizers:W}=this;W&&(0,se.P)(W,G),G instanceof ae&&G._removeParent(this)}}ae.EMPTY=(()=>{const me=new ae;return me.closed=!0,me})();const ce=ae.EMPTY;function ve(me){return me instanceof ae||me&&"closed"in me&&(0,c.m)(me.remove)&&(0,c.m)(me.add)&&(0,c.m)(me.unsubscribe)}function fe(me){(0,c.m)(me)?me():me.unsubscribe()}},2416:(ft,Ce,F)=>{F.d(Ce,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,Ce,F)=>{F.d(Ce,{E:()=>$});const $=new(F(9751).y)(ae=>ae.complete())},8996:(ft,Ce,F)=>{F.d(Ce,{D:()=>Pe});var c=F(8421),$=F(5363),N=F(9468),ce=F(9751),fe=F(2202),me=F(576),G=F(9672);function J(Se,He){if(!Se)throw new Error("Iterable cannot be null");return new ce.y(te=>{(0,G.f)(te,He,()=>{const de=Se[Symbol.asyncIterator]();(0,G.f)(te,He,()=>{de.next().then(Ie=>{Ie.done?te.complete():te.next(Ie.value)})},0,!0)})})}var Be=F(3670),xe=F(8239),qe=F(1144),it=F(6495),_e=F(2206),De=F(4532),Te=F(3260);function Pe(Se,He){return He?function Le(Se,He){if(null!=Se){if((0,Be.c)(Se))return function se(Se,He){return(0,c.Xf)(Se).pipe((0,N.R)(He),(0,$.Q)(He))}(Se,He);if((0,qe.z)(Se))return function ve(Se,He){return new ce.y(te=>{let de=0;return He.schedule(function(){de===Se.length?te.complete():(te.next(Se[de++]),te.closed||this.schedule())})})}(Se,He);if((0,xe.t)(Se))return function ae(Se,He){return(0,c.Xf)(Se).pipe((0,N.R)(He),(0,$.Q)(He))}(Se,He);if((0,_e.D)(Se))return J(Se,He);if((0,it.T)(Se))return function W(Se,He){return new ce.y(te=>{let de;return(0,G.f)(te,He,()=>{de=Se[fe.h](),(0,G.f)(te,He,()=>{let Ie,Q;try{({value:Ie,done:Q}=de.next())}catch(X){return void te.error(X)}Q?te.complete():te.next(Ie)},0,!0)}),()=>(0,me.m)(de?.return)&&de.return()})}(Se,He);if((0,Te.L)(Se))return function Me(Se,He){return J((0,Te.Q)(Se),He)}(Se,He)}throw(0,De.z)(Se)}(Se,He):(0,c.Xf)(Se)}},8421:(ft,Ce,F)=>{F.d(Ce,{Xf:()=>Be});var c=F(655),$=F(1144),N=F(8239),se=F(9751),ae=F(3670),ce=F(2206),ve=F(4532),fe=F(6495),me=F(3260),G=F(576),W=F(7849),J=F(8822);function Be(Le){if(Le instanceof se.y)return Le;if(null!=Le){if((0,ae.c)(Le))return function xe(Le){return new se.y(Pe=>{const Se=Le[J.L]();if((0,G.m)(Se.subscribe))return Se.subscribe(Pe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,$.z)(Le))return function qe(Le){return new se.y(Pe=>{for(let Se=0;Se<Le.length&&!Pe.closed;Se++)Pe.next(Le[Se]);Pe.complete()})}(Le);if((0,N.t)(Le))return function it(Le){return new se.y(Pe=>{Le.then(Se=>{Pe.closed||(Pe.next(Se),Pe.complete())},Se=>Pe.error(Se)).then(null,W.h)})}(Le);if((0,ce.D)(Le))return De(Le);if((0,fe.T)(Le))return function _e(Le){return new se.y(Pe=>{for(const Se of Le)if(Pe.next(Se),Pe.closed)return;Pe.complete()})}(Le);if((0,me.L)(Le))return function Te(Le){return De((0,me.Q)(Le))}(Le)}throw(0,ve.z)(Le)}function De(Le){return new se.y(Pe=>{(function Me(Le,Pe){var Se,He,te,de;return(0,c.mG)(this,void 0,void 0,function*(){try{for(Se=(0,c.KL)(Le);!(He=yield Se.next()).done;)if(Pe.next(He.value),Pe.closed)return}catch(Ie){te={error:Ie}}finally{try{He&&!He.done&&(de=Se.return)&&(yield de.call(Se))}finally{if(te)throw te.error}}Pe.complete()})})(Le,Pe).catch(Se=>Pe.error(Se))})}},6451:(ft,Ce,F)=>{F.d(Ce,{T:()=>ce});var c=F(8189),$=F(8421),N=F(515),se=F(7669),ae=F(8996);function ce(...ve){const fe=(0,se.yG)(ve),me=(0,se._6)(ve,1/0),G=ve;return G.length?1===G.length?(0,$.Xf)(G[0]):(0,c.J)(me)((0,ae.D)(G,fe)):N.E}},5403:(ft,Ce,F)=>{F.d(Ce,{x:()=>$});var c=F(930);function $(se,ae,ce,ve,fe){return new N(se,ae,ce,ve,fe)}class N extends c.Lv{constructor(ae,ce,ve,fe,me,G){super(ae),this.onFinalize=me,this.shouldUnsubscribe=G,this._next=ce?function(W){try{ce(W)}catch(J){ae.error(J)}}:super._next,this._error=fe?function(W){try{fe(W)}catch(J){ae.error(J)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(W){ae.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(ft,Ce,F)=>{F.d(Ce,{U:()=>N});var c=F(4482),$=F(5403);function N(se,ae){return(0,c.e)((ce,ve)=>{let fe=0;ce.subscribe((0,$.x)(ve,me=>{ve.next(se.call(ae,me,fe++))}))})}},8189:(ft,Ce,F)=>{F.d(Ce,{J:()=>N});var c=F(5577),$=F(4671);function N(se=1/0){return(0,c.z)($.y,se)}},5577:(ft,Ce,F)=>{F.d(Ce,{z:()=>fe});var c=F(4004),$=F(8421),N=F(4482),se=F(9672),ae=F(5403),ve=F(576);function fe(me,G,W=1/0){return(0,ve.m)(G)?fe((J,Be)=>(0,c.U)((xe,qe)=>G(J,xe,Be,qe))((0,$.Xf)(me(J,Be))),W):("number"==typeof G&&(W=G),(0,N.e)((J,Be)=>function ce(me,G,W,J,Be,xe,qe,it){const _e=[];let De=0,Te=0,Me=!1;const Le=()=>{Me&&!_e.length&&!De&&G.complete()},Pe=He=>De<J?Se(He):_e.push(He),Se=He=>{xe&&G.next(He),De++;let te=!1;(0,$.Xf)(W(He,Te++)).subscribe((0,ae.x)(G,de=>{Be?.(de),xe?Pe(de):G.next(de)},()=>{te=!0},void 0,()=>{if(te)try{for(De--;_e.length&&De<J;){const de=_e.shift();qe?(0,se.f)(G,qe,()=>Se(de)):Se(de)}Le()}catch(de){G.error(de)}}))};return me.subscribe((0,ae.x)(G,Pe,()=>{Me=!0,Le()})),()=>{it?.()}}(J,Be,me,W)))}},5363:(ft,Ce,F)=>{F.d(Ce,{Q:()=>se});var c=F(9672),$=F(4482),N=F(5403);function se(ae,ce=0){return(0,$.e)((ve,fe)=>{ve.subscribe((0,N.x)(fe,me=>(0,c.f)(fe,ae,()=>fe.next(me),ce),()=>(0,c.f)(fe,ae,()=>fe.complete(),ce),me=>(0,c.f)(fe,ae,()=>fe.error(me),ce)))})}},3099:(ft,Ce,F)=>{F.d(Ce,{B:()=>ae});var c=F(8421),$=F(7579),N=F(930),se=F(4482);function ae(ve={}){const{connector:fe=(()=>new $.x),resetOnError:me=!0,resetOnComplete:G=!0,resetOnRefCountZero:W=!0}=ve;return J=>{let Be,xe,qe,it=0,_e=!1,De=!1;const Te=()=>{xe?.unsubscribe(),xe=void 0},Me=()=>{Te(),Be=qe=void 0,_e=De=!1},Le=()=>{const Pe=Be;Me(),Pe?.unsubscribe()};return(0,se.e)((Pe,Se)=>{it++,!De&&!_e&&Te();const He=qe=qe??fe();Se.add(()=>{it--,0===it&&!De&&!_e&&(xe=ce(Le,W))}),He.subscribe(Se),!Be&&it>0&&(Be=new N.Hp({next:te=>He.next(te),error:te=>{De=!0,Te(),xe=ce(Me,me,te),He.error(te)},complete:()=>{_e=!0,Te(),xe=ce(Me,G),He.complete()}}),(0,c.Xf)(Pe).subscribe(Be))})(J)}}function ce(ve,fe,...me){if(!0===fe)return void ve();if(!1===fe)return;const G=new N.Hp({next:()=>{G.unsubscribe(),ve()}});return fe(...me).subscribe(G)}},9468:(ft,Ce,F)=>{F.d(Ce,{R:()=>$});var c=F(4482);function $(N,se=0){return(0,c.e)((ae,ce)=>{ce.add(N.schedule(()=>ae.subscribe(ce),se))})}},8505:(ft,Ce,F)=>{F.d(Ce,{b:()=>ae});var c=F(576),$=F(4482),N=F(5403),se=F(4671);function ae(ce,ve,fe){const me=(0,c.m)(ce)||ve||fe?{next:ce,error:ve,complete:fe}:ce;return me?(0,$.e)((G,W)=>{var J;null===(J=me.subscribe)||void 0===J||J.call(me);let Be=!0;G.subscribe((0,N.x)(W,xe=>{var qe;null===(qe=me.next)||void 0===qe||qe.call(me,xe),W.next(xe)},()=>{var xe;Be=!1,null===(xe=me.complete)||void 0===xe||xe.call(me),W.complete()},xe=>{var qe;Be=!1,null===(qe=me.error)||void 0===qe||qe.call(me,xe),W.error(xe)},()=>{var xe,qe;Be&&(null===(xe=me.unsubscribe)||void 0===xe||xe.call(me)),null===(qe=me.finalize)||void 0===qe||qe.call(me)}))}):se.y}},4408:(ft,Ce,F)=>{F.d(Ce,{o:()=>ae});var c=F(727);class $ extends c.w0{constructor(ve,fe){super()}schedule(ve,fe=0){return this}}const N={setInterval(ce,ve,...fe){const{delegate:me}=N;return me?.setInterval?me.setInterval(ce,ve,...fe):setInterval(ce,ve,...fe)},clearInterval(ce){const{delegate:ve}=N;return(ve?.clearInterval||clearInterval)(ce)},delegate:void 0};var se=F(8737);class ae extends ${constructor(ve,fe){super(ve,fe),this.scheduler=ve,this.work=fe,this.pending=!1}schedule(ve,fe=0){var me;if(this.closed)return this;this.state=ve;const G=this.id,W=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(W,G,fe)),this.pending=!0,this.delay=fe,this.id=null!==(me=this.id)&&void 0!==me?me:this.requestAsyncId(W,this.id,fe),this}requestAsyncId(ve,fe,me=0){return N.setInterval(ve.flush.bind(ve,this),me)}recycleAsyncId(ve,fe,me=0){if(null!=me&&this.delay===me&&!1===this.pending)return fe;null!=fe&&N.clearInterval(fe)}execute(ve,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const me=this._execute(ve,fe);if(me)return me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,fe){let G,me=!1;try{this.work(ve)}catch(W){me=!0,G=W||new Error("Scheduled action threw falsy error")}if(me)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ve,scheduler:fe}=this,{actions:me}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,se.P)(me,this),null!=ve&&(this.id=this.recycleAsyncId(fe,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,Ce,F)=>{F.d(Ce,{v:()=>N});var c=F(6063);class ${constructor(ae,ce=$.now){this.schedulerActionCtor=ae,this.now=ce}schedule(ae,ce=0,ve){return new this.schedulerActionCtor(this,ae).schedule(ve,ce)}}$.now=c.l.now;class N extends ${constructor(ae,ce=$.now){super(ae,ce),this.actions=[],this._active=!1}flush(ae){const{actions:ce}=this;if(this._active)return void ce.push(ae);let ve;this._active=!0;do{if(ve=ae.execute(ae.state,ae.delay))break}while(ae=ce.shift());if(this._active=!1,ve){for(;ae=ce.shift();)ae.unsubscribe();throw ve}}}},4986:(ft,Ce,F)=>{F.d(Ce,{z:()=>N});var c=F(4408);const N=new(F(7565).v)(c.o)},6063:(ft,Ce,F)=>{F.d(Ce,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ft,Ce,F)=>{F.d(Ce,{z:()=>c});const c={setTimeout($,N,...se){const{delegate:ae}=c;return ae?.setTimeout?ae.setTimeout($,N,...se):setTimeout($,N,...se)},clearTimeout($){const{delegate:N}=c;return(N?.clearTimeout||clearTimeout)($)},delegate:void 0}},2202:(ft,Ce,F)=>{F.d(Ce,{h:()=>$});const $=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,Ce,F)=>{F.d(Ce,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,Ce,F)=>{F.d(Ce,{_6:()=>ce,jO:()=>se,yG:()=>ae});var c=F(576);function N(ve){return ve[ve.length-1]}function se(ve){return(0,c.m)(N(ve))?ve.pop():void 0}function ae(ve){return function $(ve){return ve&&(0,c.m)(ve.schedule)}(N(ve))?ve.pop():void 0}function ce(ve,fe){return"number"==typeof N(ve)?ve.pop():fe}},8737:(ft,Ce,F)=>{function c($,N){if($){const se=$.indexOf(N);0<=se&&$.splice(se,1)}}F.d(Ce,{P:()=>c})},3888:(ft,Ce,F)=>{function c($){const se=$(ae=>{Error.call(ae),ae.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}F.d(Ce,{d:()=>c})},2806:(ft,Ce,F)=>{F.d(Ce,{O:()=>se,x:()=>N});var c=F(2416);let $=null;function N(ae){if(c.v.useDeprecatedSynchronousErrorHandling){const ce=!$;if(ce&&($={errorThrown:!1,error:null}),ae(),ce){const{errorThrown:ve,error:fe}=$;if($=null,ve)throw fe}}else ae()}function se(ae){c.v.useDeprecatedSynchronousErrorHandling&&$&&($.errorThrown=!0,$.error=ae)}},9672:(ft,Ce,F)=>{function c($,N,se,ae=0,ce=!1){const ve=N.schedule(function(){se(),ce?$.add(this.schedule(null,ae)):this.unsubscribe()},ae);if($.add(ve),!ce)return ve}F.d(Ce,{f:()=>c})},4671:(ft,Ce,F)=>{function c($){return $}F.d(Ce,{y:()=>c})},1144:(ft,Ce,F)=>{F.d(Ce,{z:()=>c});const c=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2206:(ft,Ce,F)=>{F.d(Ce,{D:()=>$});var c=F(576);function $(N){return Symbol.asyncIterator&&(0,c.m)(N?.[Symbol.asyncIterator])}},576:(ft,Ce,F)=>{function c($){return"function"==typeof $}F.d(Ce,{m:()=>c})},3670:(ft,Ce,F)=>{F.d(Ce,{c:()=>N});var c=F(8822),$=F(576);function N(se){return(0,$.m)(se[c.L])}},6495:(ft,Ce,F)=>{F.d(Ce,{T:()=>N});var c=F(2202),$=F(576);function N(se){return(0,$.m)(se?.[c.h])}},8239:(ft,Ce,F)=>{F.d(Ce,{t:()=>$});var c=F(576);function $(N){return(0,c.m)(N?.then)}},3260:(ft,Ce,F)=>{F.d(Ce,{L:()=>se,Q:()=>N});var c=F(655),$=F(576);function N(ae){return(0,c.FC)(this,arguments,function*(){const ve=ae.getReader();try{for(;;){const{value:fe,done:me}=yield(0,c.qq)(ve.read());if(me)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(fe)}}finally{ve.releaseLock()}})}function se(ae){return(0,$.m)(ae?.getReader)}},4482:(ft,Ce,F)=>{F.d(Ce,{A:()=>$,e:()=>N});var c=F(576);function $(se){return(0,c.m)(se?.lift)}function N(se){return ae=>{if($(ae))return ae.lift(function(ce){try{return se(ce,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,Ce,F)=>{function c(){}F.d(Ce,{Z:()=>c})},9635:(ft,Ce,F)=>{F.d(Ce,{U:()=>N,z:()=>$});var c=F(4671);function $(...se){return N(se)}function N(se){return 0===se.length?c.y:1===se.length?se[0]:function(ce){return se.reduce((ve,fe)=>fe(ve),ce)}}},7849:(ft,Ce,F)=>{F.d(Ce,{h:()=>N});var c=F(2416),$=F(3410);function N(se){$.z.setTimeout(()=>{const{onUnhandledError:ae}=c.v;if(!ae)throw se;ae(se)})}},4532:(ft,Ce,F)=>{function c($){return new TypeError(`You provided ${null!==$&&"object"==typeof $?"an invalid object":`'${$}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Ce,{z:()=>c})},655:(ft,Ce,F)=>{function se(Q,X){var pe={};for(var oe in Q)Object.prototype.hasOwnProperty.call(Q,oe)&&X.indexOf(oe)<0&&(pe[oe]=Q[oe]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(oe=Object.getOwnPropertySymbols(Q);Ue<oe.length;Ue++)X.indexOf(oe[Ue])<0&&Object.prototype.propertyIsEnumerable.call(Q,oe[Ue])&&(pe[oe[Ue]]=Q[oe[Ue]])}return pe}function fe(Q,X,pe,oe){return new(pe||(pe=Promise))(function(Ve,mt){function nn(Ht){try{bt(oe.next(Ht))}catch(vt){mt(vt)}}function fn(Ht){try{bt(oe.throw(Ht))}catch(vt){mt(vt)}}function bt(Ht){Ht.done?Ve(Ht.value):function Ue(Ve){return Ve instanceof pe?Ve:new pe(function(mt){mt(Ve)})}(Ht.value).then(nn,fn)}bt((oe=oe.apply(Q,X||[])).next())})}function _e(Q){return this instanceof _e?(this.v=Q,this):new _e(Q)}function De(Q,X,pe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,oe=pe.apply(Q,X||[]),Ve=[];return Ue={},mt("next"),mt("throw"),mt("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function mt(Jt){oe[Jt]&&(Ue[Jt]=function(cr){return new Promise(function(Kt,wt){Ve.push([Jt,cr,Kt,wt])>1||nn(Jt,cr)})})}function nn(Jt,cr){try{!function fn(Jt){Jt.value instanceof _e?Promise.resolve(Jt.value.v).then(bt,Ht):vt(Ve[0][2],Jt)}(oe[Jt](cr))}catch(Kt){vt(Ve[0][3],Kt)}}function bt(Jt){nn("next",Jt)}function Ht(Jt){nn("throw",Jt)}function vt(Jt,cr){Jt(cr),Ve.shift(),Ve.length&&nn(Ve[0][0],Ve[0][1])}}function Me(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,X=Q[Symbol.asyncIterator];return X?X.call(Q):(Q=function J(Q){var X="function"==typeof Symbol&&Symbol.iterator,pe=X&&Q[X],oe=0;if(pe)return pe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&oe>=Q.length&&(Q=void 0),{value:Q&&Q[oe++],done:!Q}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),pe={},oe("next"),oe("throw"),oe("return"),pe[Symbol.asyncIterator]=function(){return this},pe);function oe(Ve){pe[Ve]=Q[Ve]&&function(mt){return new Promise(function(nn,fn){!function Ue(Ve,mt,nn,fn){Promise.resolve(fn).then(function(bt){Ve({value:bt,done:nn})},mt)}(nn,fn,(mt=Q[Ve](mt)).done,mt.value)})}}}F.d(Ce,{FC:()=>De,KL:()=>Me,_T:()=>se,mG:()=>fe,qq:()=>_e})},4650:(ft,Ce,F)=>{F.d(Ce,{$8M:()=>hd,$Z:()=>wD,AFp:()=>jb,AaK:()=>fe,CHM:()=>nf,CRH:()=>Cb,CZH:()=>Xm,CqO:()=>Qd,D6c:()=>aw,EJc:()=>Hb,EpF:()=>Yd,F4k:()=>sp,FYo:()=>OE,FiY:()=>Gi,GfV:()=>FE,JOm:()=>Mi,KtG:()=>nd,LFG:()=>je,LSH:()=>Bg,Lbi:()=>ES,Lck:()=>vi,MAs:()=>rp,MMx:()=>Hr,NdJ:()=>qa,OlP:()=>dn,Oqu:()=>gp,P3R:()=>AE,PXZ:()=>q0,Q6J:()=>Ec,QGY:()=>_m,QP$:()=>jn,Qsj:()=>WC,R0b:()=>Li,RDi:()=>CC,Rgc:()=>Eh,SBq:()=>$f,Sil:()=>Lc,Suo:()=>bh,TTD:()=>ho,TgZ:()=>Kd,X6Q:()=>Rh,XFs:()=>nt,Xpm:()=>Lo,Xts:()=>by,Y36:()=>Bd,YKP:()=>Tp,YNc:()=>fm,Yjl:()=>Uo,Yz7:()=>wt,Z0I:()=>kn,ZZ4:()=>l_,_UZ:()=>ip,_Vd:()=>Fd,_c5:()=>Ph,_uU:()=>Uv,aQg:()=>ow,c2e:()=>O0,cJS:()=>ri,cg1:()=>Gv,dDg:()=>DS,dqk:()=>St,eFA:()=>Lp,eoX:()=>j0,f3M:()=>Xe,g9A:()=>N0,h0i:()=>An,hGG:()=>Nh,hij:()=>ih,iGM:()=>Ao,ifc:()=>ke,ip1:()=>Zb,jDz:()=>Pn,kL8:()=>$I,lG2:()=>hu,lqb:()=>dc,lri:()=>nu,n5z:()=>zl,oAB:()=>Fo,q4F:()=>UE,qLn:()=>Hf,qZA:()=>Ic,rWj:()=>Z0,s9C:()=>Xd,sBO:()=>NS,sIi:()=>Xf,s_b:()=>eu,soG:()=>Ro,tb:()=>e_,tp0:()=>D,uIk:()=>gv,vHH:()=>_e,vpe:()=>hn,wAp:()=>Dt,xp6:()=>Vy,z2F:()=>iu,zSh:()=>Cy,zs3:()=>fc});var c=F(7579),$=F(727),N=F(9751),se=F(6451),ae=F(3099);function ce(s){for(let o in s)if(s[o]===ce)return o;throw Error("Could not find renamed property on target object.")}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function me(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ce({__forward_ref__:ce});function W(s){return s.__forward_ref__=W,s.toString=function(){return fe(this())},s}function J(s){return Be(s)?s():s}function Be(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===W}function xe(s){return s&&!!s.\u0275providers}const it="https://g.co/ng/security#xss";class _e extends Error{constructor(o,u){super(function De(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Te(s){return"string"==typeof s?s:null==s?"":String(s)}function He(s,o){throw new _e(-201,!1)}function Ht(s,o){null==s&&function vt(s,o,u,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${u} ${d} ${o} <=Actual]`))}(o,s,null,"!=")}function wt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function ri(s){return{providers:s.providers||[],imports:s.imports||[]}}function Dr(s){return Bi(s,ii)||Bi(s,gn)}function kn(s){return null!==Dr(s)}function Bi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Vn(s){return s&&(s.hasOwnProperty(Ii)||s.hasOwnProperty(dr))?s[Ii]:null}const ii=ce({\u0275prov:ce}),Ii=ce({\u0275inj:ce}),gn=ce({ngInjectableDef:ce}),dr=ce({ngInjectorDef:ce});var nt=(()=>((nt=nt||{})[nt.Default=0]="Default",nt[nt.Host=1]="Host",nt[nt.Self=2]="Self",nt[nt.SkipSelf=4]="SkipSelf",nt[nt.Optional=8]="Optional",nt))();let hr;function zn(s){const o=hr;return hr=s,o}function Bn(s,o,u){const d=Dr(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:u&nt.Optional?null:void 0!==o?o:void He(fe(s))}const St=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kn={},bn="__NG_DI_FLAG__",si="ngTempTokenPath",bi=/\n/gm,Ti="__source";let Gt;function Fr(s){const o=Gt;return Gt=s,o}function Zn(s,o=nt.Default){if(void 0===Gt)throw new _e(-203,!1);return null===Gt?Bn(s,void 0,o):Gt.get(s,o&nt.Optional?null:void 0,o)}function je(s,o=nt.Default){return(function Sr(){return hr}()||Zn)(J(s),o)}function Xe(s,o=nt.Default){return je(s,It(o))}function It(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function Tt(s){const o=[];for(let u=0;u<s.length;u++){const d=J(s[u]);if(Array.isArray(d)){if(0===d.length)throw new _e(900,!1);let h,p=nt.Default;for(let y=0;y<d.length;y++){const E=d[y],T=q(E);"number"==typeof T?-1===T?h=E.token:p|=T:h=E}o.push(je(h,p))}else o.push(je(d))}return o}function Qt(s,o){return s[bn]=o,s.prototype[bn]=o,s}function q(s){return s[bn]}function B(s){return{toString:s}.toString()}var M=(()=>((M=M||{})[M.OnPush=0]="OnPush",M[M.Default=1]="Default",M))(),ke=(()=>{return(s=ke||(ke={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ke;var s})();const st={},Ge=[],Ot=ce({\u0275cmp:ce}),ct=ce({\u0275dir:ce}),yn=ce({\u0275pipe:ce}),fr=ce({\u0275mod:ce}),Rt=ce({\u0275fac:ce}),Ur=ce({__NG_ELEMENT_ID__:ce});let xl=0;function Lo(s){return B(()=>{const u=!0===s.standalone,d={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===M.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ge,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ke.Emulated,id:"c"+xl++,styles:s.styles||Ge,_:null,setInput:null,schemas:s.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},p=s.dependencies,y=s.features;return h.inputs=Ml(s.inputs,d),h.outputs=Ml(s.outputs),y&&y.forEach(E=>E(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(Rl).filter(pr):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Ar).filter(pr):null,h})}function Rl(s){return rn(s)||Tn(s)}function pr(s){return null!==s}function Fo(s){return B(()=>({type:s.type,bootstrap:s.bootstrap||Ge,declarations:s.declarations||Ge,imports:s.imports||Ge,exports:s.exports||Ge,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function Ml(s,o){if(null==s)return st;const u={};for(const d in s)if(s.hasOwnProperty(d)){let h=s[d],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=d,o&&(o[h]=p)}return u}const hu=Lo;function Uo(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function rn(s){return s[Ot]||null}function Tn(s){return s[ct]||null}function Ar(s){return s[yn]||null}function jn(s){const o=rn(s)||Tn(s)||Ar(s);return null!==o&&o.standalone}function Wr(s,o){const u=s[fr]||null;if(!u&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return u}function oi(s){return Array.isArray(s)&&"object"==typeof s[1]}function ai(s){return Array.isArray(s)&&!0===s[1]}function gs(s){return 0!=(4&s.flags)}function _a(s){return s.componentOffset>-1}function Ol(s){return 1==(1&s.flags)}function mr(s){return null!==s.template}function dg(s){return 0!=(256&s[2])}function lo(s,o){return s.hasOwnProperty(Rt)?s[Rt]:null}class co{constructor(o,u,d){this.previousValue=o,this.currentValue=u,this.firstChange=d}isFirstChange(){return this.firstChange}}function ho(){return fo}function fo(s){return s.type.prototype.ngOnChanges&&(s.setInput=va),wu}function wu(){const s=Eu(this),o=s?.current;if(o){const u=s.previous;if(u===st)s.previous=o;else for(let d in o)u[d]=o[d];s.current=null,this.ngOnChanges(o)}}function va(s,o,u,d){const h=this.declaredInputs[u],p=Eu(s)||function wa(s,o){return s[jo]=o}(s,{previous:st,current:null}),y=p.current||(p.current={}),E=p.previous,T=E[h];y[h]=new co(T&&T.currentValue,o,E===st),s[d]=o}ho.ngInherit=!0;const jo="__ngSimpleChanges__";function Eu(s){return s[jo]||null}function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function Yr(s,o){return Nn(o[s.index])}function Tu(s,o){return s.data[o]}function nr(s,o){const u=o[s];return oi(u)?u:u[0]}function $o(s){return 64==(64&s[2])}function Si(s,o){return null==o?null:s[o]}function Ll(s){s[18]=0}function po(s,o){s[5]+=o;let u=s,d=s[3];for(;null!==d&&(1===o&&1===u[5]||-1===o&&0===u[5]);)d[5]+=o,u=d,d=d[3]}const Lt={lFrame:vg(null),bindingsEnabled:!0};function td(){return Lt.bindingsEnabled}function Re(){return Lt.lFrame.lView}function Xt(){return Lt.lFrame.tView}function nf(s){return Lt.lFrame.contextLView=s,s[8]}function nd(s){return Lt.lFrame.contextLView=null,s}function rr(){let s=Su();for(;null!==s&&64===s.type;)s=s.parent;return s}function Su(){return Lt.lFrame.currentTNode}function ts(s,o){const u=Lt.lFrame;u.currentTNode=s,u.isParent=o}function Go(){return Lt.lFrame.isParent}function Hi(){return Lt.lFrame.bindingIndex++}function ku(s,o){const u=Lt.lFrame;u.bindingIndex=u.bindingRootIndex=s,go(o)}function go(s){Lt.lFrame.currentDirectiveIndex=s}function sf(){return Lt.lFrame.currentQueryIndex}function Vl(s){Lt.lFrame.currentQueryIndex=s}function rd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function af(s,o,u){if(u&nt.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&nt.Host||(h=rd(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const d=Lt.lFrame=yg();return d.currentTNode=o,d.lView=s,!0}function Ru(s){const o=yg(),u=s[1];Lt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function yg(){const s=Lt.lFrame,o=null===s?null:s.child;return null===o?vg(s):o}function vg(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function wg(){const s=Lt.lFrame;return Lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Bl=wg;function Eg(){const s=wg();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ui(){return Lt.lFrame.selectedIndex}function Bs(s){Lt.lFrame.selectedIndex=s}function pn(){const s=Lt.lFrame;return Tu(s.tView,s.selectedIndex)}function Zs(s,o){for(let u=o.directiveStart,d=o.directiveEnd;u<d;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:S,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),T&&(s.viewHooks||(s.viewHooks=[])).push(-u,T),S&&((s.viewHooks||(s.viewHooks=[])).push(u,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,S)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function rs(s,o,u){sd(s,o,3,u)}function mo(s,o,u,d){(3&s[2])===u&&sd(s,o,u,d)}function _s(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function sd(s,o,u,d){const p=d??-1,y=o.length-1;let E=0;for(let T=void 0!==d?65535&s[18]:0;T<y;T++)if("number"==typeof o[T+1]){if(E=o[T],null!=d&&E>=d)break}else o[T]<0&&(s[18]+=65536),(E<p||-1==p)&&(od(s,u,o,T),s[18]=(4294901760&s[18])+T+2),T++}function od(s,o,u,d){const h=u[d]<0,p=u[d+1],E=s[h?-u[d]:u[d]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Mu{constructor(o,u,d){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=d}}function Da(s,o,u){let d=0;for(;d<u.length;){const h=u[d];if("number"==typeof h){if(0!==h)break;d++;const p=u[d++],y=u[d++],E=u[d++];s.setAttribute(o,y,E,p)}else{const p=h,y=u[++d];Nu(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),d++}}return d}function $s(s){return 3===s||4===s||6===s}function Nu(s){return 64===s.charCodeAt(0)}function is(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let d=0;d<o.length;d++){const h=o[d];"number"==typeof h?u=h:0===u||ad(s,u,h,null,-1===u||2===u?o[++d]:null)}}return s}function ad(s,o,u,d,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===d)return void(null!==h&&(s[p+1]=h));if(d===s[p+1])return void(s[p+2]=h)}p++,null!==d&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==d&&s.splice(p++,0,d),null!==h&&s.splice(p++,0,h)}function ud(s){return-1!==s}function Sa(s){return 32767&s}function ys(s,o){let u=function ql(s){return s>>16}(s),d=o;for(;u>0;)d=d[15],u--;return d}let _o=!0;function yo(s){const o=_o;return _o=s,o}let Gl=0;const Zr={};function Hs(s,o){const u=Lu(s,o);if(-1!==u)return u;const d=o[1];d.firstCreatePass&&(s.injectorIndex=o.length,Yo(d.data,s),Yo(o,null),Yo(d.blueprint,null));const h=Fu(s,o),p=s.injectorIndex;if(ud(h)){const y=Sa(h),E=ys(h,o),T=E[1].data;for(let S=0;S<8;S++)o[p+S]=E[y+S]|T[y+S]}return o[p+8]=h,p}function Yo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Lu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Fu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,d=null,h=o;for(;null!==h;){if(d=dd(h),null===d)return-1;if(u++,h=h[15],-1!==d.injectorIndex)return d.injectorIndex|u<<16}return-1}function ld(s,o,u){!function cf(s,o,u){let d;"string"==typeof u?d=u.charCodeAt(0)||0:u.hasOwnProperty(Ur)&&(d=u[Ur]),null==d&&(d=u[Ur]=Gl++);const h=255&d;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Vu(s,o,u){if(u&nt.Optional||void 0!==s)return s;He()}function Wl(s,o,u,d){if(u&nt.Optional&&void 0===d&&(d=null),0==(u&(nt.Self|nt.Host))){const h=s[9],p=zn(void 0);try{return h?h.get(o,d,u&nt.Optional):Bn(o,d,u&nt.Optional)}finally{zn(p)}}return Vu(d,0,u)}function df(s,o,u,d=nt.Default,h){if(null!==s){if(1024&o[2]){const y=function G_(s,o,u,d,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=li(p,y,u,d|nt.Self,Zr);if(E!==Zr)return E;let T=p.parent;if(!T){const S=y[21];if(S){const R=S.get(u,Zr,d);if(R!==Zr)return R}T=dd(y),y=y[15]}p=T}return h}(s,o,u,d,Zr);if(y!==Zr)return y}const p=li(s,o,u,d,Zr);if(p!==Zr)return p}return Wl(o,u,d,h)}function li(s,o,u,d,h){const p=function cd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ur)?s[Ur]:void 0;return"number"==typeof o?o>=0?255&o:ff:o}(u);if("function"==typeof p){if(!af(o,s,d))return d&nt.Host?Vu(h,0,d):Wl(o,u,d,h);try{const y=p(d);if(null!=y||d&nt.Optional)return y;He()}finally{Bl()}}else if("number"==typeof p){let y=null,E=Lu(s,o),T=-1,S=d&nt.Host?o[16][6]:null;for((-1===E||d&nt.SkipSelf)&&(T=-1===E?Fu(s,o):o[E+8],-1!==T&&ci(d,!1)?(y=o[1],E=Sa(T),o=ys(T,o)):E=-1);-1!==E;){const R=o[1];if(Bu(p,E,R.data)){const U=hf(E,o,u,y,d,S);if(U!==Zr)return U}T=o[E+8],-1!==T&&ci(d,o[1].data[E+8]===S)&&Bu(p,E,o)?(y=R,E=Sa(T),o=ys(T,o)):E=-1}}return h}function hf(s,o,u,d,h,p){const y=o[1],E=y.data[s+8],R=Qo(E,y,u,null==d?_a(E)&&_o:d!=y&&0!=(3&E.type),h&nt.Host&&p===E);return null!==R?qi(o,y,R,E):Zr}function Qo(s,o,u,d,h){const p=s.providerIndexes,y=o.data,E=1048575&p,T=s.directiveStart,R=p>>20,K=h?E+R:s.directiveEnd;for(let ie=d?E:E+R;ie<K;ie++){const we=y[ie];if(ie<T&&u===we||ie>=T&&we.type===u)return ie}if(h){const ie=y[T];if(ie&&mr(ie)&&ie.type===u)return T}return null}function qi(s,o,u,d){let h=s[u];const p=o.data;if(function Qr(s){return s instanceof Mu}(h)){const y=h;y.resolving&&function Le(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new _e(-200,`Circular dependency in DI detected for ${s}${u}`)}(function Me(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Te(s)}(p[u]));const E=yo(y.canSeeViewProviders);y.resolving=!0;const T=y.injectImpl?zn(y.injectImpl):null;af(s,d,nt.Default);try{h=s[u]=y.factory(void 0,p,s,d),o.firstCreatePass&&u>=d.directiveStart&&function jl(s,o,u){const{ngOnChanges:d,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(d){const y=fo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==T&&zn(T),yo(E),y.resolving=!1,Bl()}}return h}function Bu(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function ci(s,o){return!(s&nt.Self||s&nt.Host&&o)}class vs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,d){return df(this._tNode,this._lView,o,It(d),u)}}function ff(){return new vs(rr(),Re())}function zl(s){return B(()=>{const o=s.prototype.constructor,u=o[Rt]||Aa(o),d=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==d;){const p=h[Rt]||Aa(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function Aa(s){return Be(s)?()=>{const o=Aa(J(s));return o&&o()}:lo(s)}function dd(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function hd(s){return function Uu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const d=u.length;let h=0;for(;h<d;){const p=u[h];if($s(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<d&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(rr(),s)}const wo="__parameters__";function Zu(s,o,u){return B(()=>{const d=function gf(s){return function(...u){if(s){const d=s(...u);for(const h in d)this[h]=d[h]}}}(o);function h(...p){if(this instanceof h)return d.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(T,S,R){const U=T.hasOwnProperty(wo)?T[wo]:Object.defineProperty(T,wo,{value:[]})[wo];for(;U.length<=R;)U.push(null);return(U[R]=U[R]||[]).push(y),T}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class dn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=wt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ws(s,o){s.forEach(u=>Array.isArray(u)?ws(u,o):o(u))}function Yl(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Ma(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const Gi=Qt(Zu("Optional"),8),D=Qt(Zu("SkipSelf"),4);var Mi=(()=>((Mi=Mi||{})[Mi.Important=1]="Important",Mi[Mi.DashCase=2]="DashCase",Mi))();const os=new Map;let Ed=0;const bd="__ngContext__";function Xr(s,o){oi(o)?(s[bd]=o[20],function Cf(s){os.set(s[20],s)}(o)):s[bd]=o}function Ae(s,o){return undefined(s,o)}function at(s){const o=s[3];return ai(o)?o[3]:o}function fi(s){return Oa(s[13])}function Ks(s){return Oa(s[4])}function Oa(s){for(;null!==s&&!ai(s);)s=s[4];return s}function Ys(s,o,u,d,h){if(null!=d){let p,y=!1;ai(d)?p=d:oi(d)&&(y=!0,d=d[0]);const E=Nn(d);0===s&&null!==u?null==h?pE(o,u,E):ic(o,u,E,h||null,!0):1===s&&null!==u?ic(o,u,E,h||null,!0):2===s?function Nf(s,o,u){const d=Pf(s,o);d&&function Rf(s,o,u,d){s.removeChild(o,u,d)}(s,d,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function oy(s,o,u,d,h){const p=u[7];p!==Nn(u)&&Ys(o,s,d,p,h);for(let E=10;E<u.length;E++){const T=u[E];kd(T[1],T,s,o,d,p)}}(o,s,p,u,h)}}function tc(s,o,u){return s.createElement(o,u)}function Ng(s,o){const u=s[9],d=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,po(h,-1)),u.splice(d,1)}function xf(s,o){if(s.length<=10)return;const u=10+o,d=s[u];if(d){const h=d[17];null!==h&&h!==s&&Ng(h,d),o>0&&(s[u-1][4]=d[4]);const p=Ma(s,10+o);!function Mg(s,o){kd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(d[1],d);const y=p[19];null!==y&&y.detachView(p[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function kf(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&kd(s,o,u,3,null,null),function Pg(s){let o=s[13];if(!o)return J_(s[1],s);for(;o;){let u=null;if(oi(o))u=o[13];else{const d=o[10];d&&(u=d)}if(!u){for(;o&&!o[4]&&o!==s;)oi(o)&&J_(o[1],o),o=o[3];null===o&&(o=s),oi(o)&&J_(o[1],o),u=o&&o[4]}o=u}}(o)}}function J_(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function ey(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let d=0;d<u.length;d+=2){const h=o[u[d]];if(!(h instanceof Mu)){const p=u[d+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],T=p[y+1];try{T.call(E)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function rc(s,o){const u=s.cleanup,d=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+3];y>=0?d[h=y]():d[h=-y].unsubscribe(),p+=2}else{const y=d[h=u[p+1]];u[p].call(y)}if(null!==d){for(let p=h+1;p<d.length;p++)(0,d[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ai(o[3])){u!==o[3]&&Ng(u,o);const d=o[19];null!==d&&d.detachView(s)}!function yr(s){os.delete(s[20])}(o)}}function EC(s,o,u){return function fE(s,o,u){let d=o;for(;null!==d&&40&d.type;)d=(o=d).parent;if(null===d)return u[0];{const{componentOffset:h}=d;if(h>-1){const{encapsulation:p}=s.data[d.directiveStart+h];if(p===ke.None||p===ke.Emulated)return null}return Yr(d,u)}}(s,o.parent,u)}function ic(s,o,u,d,h){s.insertBefore(o,u,d,h)}function pE(s,o,u){s.appendChild(o,u)}function Sd(s,o,u,d,h){null!==d?ic(s,o,u,d,h):pE(s,o,u)}function Pf(s,o){return s.parentNode(o)}let ly,Of,mE=function sc(s,o,u){return 40&s.type?Yr(s,u):null};function Og(s,o,u,d){const h=EC(s,d,o),p=o[11],E=function ty(s,o,u){return mE(s,o,u)}(d.parent||o[6],d,o);if(null!=h)if(Array.isArray(u))for(let T=0;T<u.length;T++)Sd(p,h,u[T],E,!1);else Sd(p,h,u,E,!1)}function Ad(s,o){if(null!==o){const u=o.type;if(3&u)return Yr(o,s);if(4&u)return iy(-1,s[o.index]);if(8&u){const d=o.child;if(null!==d)return Ad(s,d);{const h=s[o.index];return ai(h)?iy(-1,h):Nn(h)}}if(32&u)return Ae(o,s)()||Nn(s[o.index]);{const d=xd(s,o);return null!==d?Array.isArray(d)?d[0]:Ad(at(s[16]),d):Ad(s,o.next)}}return null}function xd(s,o){return null!==o?s[16][6].projection[o.projection]:null}function iy(s,o){const u=10+s+1;if(u<o.length){const d=o[u],h=d[1].firstChild;if(null!==h)return Ad(d,h)}return o[7]}function sy(s,o,u,d,h,p,y){for(;null!=u;){const E=d[u.index],T=u.type;if(y&&0===o&&(E&&Xr(Nn(E),d),u.flags|=2),32!=(32&u.flags))if(8&T)sy(s,o,u.child,d,h,p,!1),Ys(o,s,h,E,p);else if(32&T){const S=Ae(u,d);let R;for(;R=S();)Ys(o,s,h,R,p);Ys(o,s,h,E,p)}else 16&T?ra(s,o,d,u,h,p):Ys(o,s,h,E,p);u=y?u.projectionNext:u.next}}function kd(s,o,u,d,h,p){sy(u,d,s.firstChild,o,h,p,!1)}function ra(s,o,u,d,h,p){const y=u[16],T=y[6].projection[d.projection];if(Array.isArray(T))for(let S=0;S<T.length;S++)Ys(o,s,h,T[S],p);else sy(s,o,T,y[3],h,p,!0)}function ay(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function yE(s,o,u){const{mergedAttrs:d,classes:h,styles:p}=u;null!==d&&Da(s,o,d),null!==h&&ay(s,o,h),null!==p&&function Lg(s,o,u){s.setAttribute(o,"style",u)}(s,o,p)}function CC(s){ly=s}function SC(s){return function cy(){if(void 0===Of&&(Of=null,St.trustedTypes))try{Of=St.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Of}()?.createScriptURL(s)||s}class EE{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${it})`}}function Fa(s){return s instanceof EE?s.changingThisBreaksApplicationSecurity:s}function Md(s,o){const u=function AC(s){return s instanceof EE&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see ${it})`)}return u===o}const RC=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Nr=(()=>((Nr=Nr||{})[Nr.NONE=0]="NONE",Nr[Nr.HTML=1]="HTML",Nr[Nr.STYLE=2]="STYLE",Nr[Nr.SCRIPT=3]="SCRIPT",Nr[Nr.URL=4]="URL",Nr[Nr.RESOURCE_URL=5]="RESOURCE_URL",Nr))();function Bg(s){const o=Va();return o?o.sanitize(Nr.URL,s)||"":Md(s,"URL")?Fa(s):function ac(s){return(s=String(s)).match(RC)?s:"unsafe:"+s}(Te(s))}function Nd(s){const o=Va();if(o)return SC(o.sanitize(Nr.RESOURCE_URL,s)||"");if(Md(s,"ResourceURL"))return SC(Fa(s));throw new _e(904,!1)}function AE(s,o,u){return function Zg(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?Nd:Bg}(o,u)(s)}function Va(){const s=Re();return s&&s[12]}const by=new dn("ENVIRONMENT_INITIALIZER"),xE=new dn("INJECTOR",-1),Od=new dn("INJECTOR_DEF_TYPES");class Ld{get(o,u=Kn){if(u===Kn){const d=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw d.name="NullInjectorError",d}return u}}function UC(...s){return{\u0275providers:kE(0,s),\u0275fromNgModule:!0}}function kE(s,...o){const u=[],d=new Set;let h;return ws(o,p=>{const y=p;Ty(y,u,[],d)&&(h||(h=[]),h.push(y))}),void 0!==h&&RE(h,u),u}function RE(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ME(h,p=>{o.push(p)})}}function Ty(s,o,u,d){if(!(s=J(s)))return!1;let h=null,p=Vn(s);const y=!p&&rn(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const T=s.ngModule;if(p=Vn(T),!p)return!1;h=T}const E=d.has(h);if(y){if(E)return!1;if(d.add(h),y.dependencies){const T="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const S of T)Ty(S,o,u,d)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let S;d.add(h);try{ws(p.imports,R=>{Ty(R,o,u,d)&&(S||(S=[]),S.push(R))})}finally{}void 0!==S&&RE(S,o)}if(!E){const S=lo(h)||(()=>new h);o.push({provide:h,useFactory:S,deps:Ge},{provide:Od,useValue:h,multi:!0},{provide:by,useValue:()=>je(h),multi:!0})}const T=p.providers;null==T||E||ME(T,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}function ME(s,o){for(let u of s)xe(u)&&(u=u.\u0275providers),Array.isArray(u)?ME(u,o):o(u)}const VC=ce({provide:String,useValue:ce});function Vf(s){return null!==s&&"object"==typeof s&&VC in s}function cc(s){return"function"==typeof s}const Cy=new dn("Set Injector scope."),jg={},ZC={};let Dy;function $g(){return void 0===Dy&&(Dy=new Ld),Dy}class dc{}class PE extends dc{constructor(o,u,d,h){super(),this.parent=u,this.source=d,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,xy(o,y=>this.processProvider(y)),this.records.set(xE,Qu(void 0,this)),h.has("environment")&&this.records.set(dc,Qu(void 0,this));const p=this.records.get(Cy);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Od.multi,Ge,nt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Fr(this),d=zn(void 0);try{return o()}finally{Fr(u),zn(d)}}get(o,u=Kn,d=nt.Default){this.assertNotDestroyed(),d=It(d);const h=Fr(this),p=zn(void 0);try{if(!(d&nt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const T=function HC(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(o)&&Dr(o);E=T&&this.injectableDefInScope(T)?Qu(Hg(o),jg):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(d&nt.Self?$g():this.parent).get(o,u=d&nt.Optional&&u===Kn?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[si]=y[si]||[]).unshift(fe(o)),h)throw y;return function H(s,o,u,d){const h=s[si];throw o[Ti]&&h.unshift(o[Ti]),s.message=function Y(s,o,u,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=fe(o);if(Array.isArray(o))h=o.map(fe).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}h=`{${p.join(", ")}}`}return`${u}${d?"("+d+")":""}[${h}]: ${s.replace(bi,"\n  ")}`}("\n"+s.message,h,u,d),s.ngTokenPath=h,s[si]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{zn(p),Fr(h)}}resolveInjectorInitializers(){const o=Fr(this),u=zn(void 0);try{const d=this.get(by.multi,Ge,nt.Self);for(const h of d)h()}finally{Fr(o),zn(u)}}toString(){const o=[],u=this.records;for(const d of u.keys())o.push(fe(d));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let u=cc(o=J(o))?o:J(o&&o.provide);const d=function Sy(s){return Vf(s)?Qu(void 0,s.useValue):Qu(function Ay(s,o,u){let d;if(cc(s)){const h=J(s);return lo(h)||Hg(h)}if(Vf(s))d=()=>J(s.useValue);else if(function lc(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Tt(s.deps||[]));else if(function Bf(s){return!(!s||!s.useExisting)}(s))d=()=>je(J(s.useExisting));else{const h=J(s&&(s.useClass||s.provide));if(!function qg(s){return!!s.deps}(s))return lo(h)||Hg(h);d=()=>new h(...Tt(s.deps))}return d}(s),jg)}(o);if(cc(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Qu(void 0,jg,!0),h.factory=()=>Tt(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,d)}hydrate(o,u){return u.value===jg&&(u.value=ZC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function $C(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=J(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Hg(s){const o=Dr(s),u=null!==o?o.factory:lo(s);if(null!==u)return u;if(s instanceof dn)throw new _e(204,!1);if(s instanceof Function)return function jC(s){const o=s.length;if(o>0)throw function Gs(s,o){const u=[];for(let d=0;d<s;d++)u.push(o);return u}(o,"?"),new _e(204,!1);const u=function cs(s){const o=s&&(s[ii]||s[gn]);if(o){const u=function Zi(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new _e(204,!1)}function Qu(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function xy(s,o){for(const u of s)Array.isArray(u)?xy(u,o):u&&xe(u)?xy(u.\u0275providers,o):o(u)}class qC{}class Zf{}class Gg{resolveComponentFactory(o){throw function NE(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Fd=(()=>{class s{}return s.NULL=new Gg,s})();function jf(){return hc(rr(),Re())}function hc(s,o){return new $f(Yr(s,o))}let $f=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=jf,s})();function GC(s){return s instanceof $f?s.nativeElement:s}class OE{}let WC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function zC(){const s=Re(),u=nr(rr().index,s);return(oi(u)?u:s)[11]}(),s})(),LE=(()=>{class s{}return s.\u0275prov=wt({token:s,providedIn:"root",factory:()=>null}),s})();class FE{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const UE=new FE("15.0.4"),My={};function Ny(s){return s.ngOriginalError}class Hf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Ny(o);for(;u&&Ny(u);)u=Ny(u);return u||null}}function Ba(s){return s instanceof Function?s():s}function qE(s,o,u){let d=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===d||s.charCodeAt(h+p)<=32)return h}u=h+1}}const Ly="ng-template";function Vd(s,o,u){let d=0;for(;d<s.length;){let h=s[d++];if(u&&"class"===h){if(h=s[d],-1!==qE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;d<s.length&&"string"==typeof(h=s[d++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function Wg(s){return 4===s.type&&s.value!==Ly}function JC(s,o,u){return o===(4!==s.type||u?s.value:Ly)}function GE(s,o,u){let d=4;const h=s.attrs||[],p=function eD(s){for(let o=0;o<s.length;o++)if($s(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const T=o[E];if("number"!=typeof T){if(!y)if(4&d){if(d=2|1&d,""!==T&&!JC(s,T,u)||""===T&&1===o.length){if(Xs(d))return!1;y=!0}}else{const S=8&d?T:o[++E];if(8&d&&null!==s.attrs){if(!Vd(s.attrs,S,u)){if(Xs(d))return!1;y=!0}continue}const U=Fy(8&d?"class":T,h,Wg(s),u);if(-1===U){if(Xs(d))return!1;y=!0;continue}if(""!==S){let K;K=U>p?"":h[U+1].toLowerCase();const ie=8&d?K:null;if(ie&&-1!==qE(ie,S,0)||2&d&&S!==K){if(Xs(d))return!1;y=!0}}}}else{if(!y&&!Xs(d)&&!Xs(T))return!1;if(y&&Xs(T))continue;y=!1,d=T|1&d}}return Xs(d)||y}function Xs(s){return 0==(1&s)}function Fy(s,o,u,d){if(null===o)return-1;let h=0;if(d||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function tD(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const d=s[u];if("number"==typeof d)return-1;if(d===o)return u;u++}return-1}(o,s)}function Uy(s,o,u=!1){for(let d=0;d<o.length;d++)if(GE(s,o[d],u))return!0;return!1}function zE(s,o){return s?":not("+o.trim()+")":o}function rD(s){let o=s[0],u=1,d=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&d){const E=s[++u];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?h+="."+y:4&d&&(h+=" "+y);else""!==h&&!Xs(y)&&(o+=zE(p,h),h=""),d=y,p=p||!Xs(d);u++}return""!==h&&(o+=zE(p,h)),o}const qt={};function Vy(s){KE(Xt(),Re(),ui()+s,!1)}function KE(s,o,u,d){if(!d)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&rs(o,p,u)}else{const p=s.preOrderHooks;null!==p&&mo(o,p,0,u)}Bs(u)}function cD(s,o=null,u=null,d){const h=dD(s,o,u,d);return h.resolveInjectorInitializers(),h}function dD(s,o=null,u=null,d,h=new Set){const p=[u||Ge,UC(s)];return d=d||("object"==typeof s?void 0:fe(s)),new PE(p,o||$g(),d||null,h)}let fc=(()=>{class s{static create(u,d){if(Array.isArray(u))return cD({name:""},d,u,"");{const h=u.name??"";return cD({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=Kn,s.NULL=new Ld,s.\u0275prov=wt({token:s,providedIn:"any",factory:()=>je(xE)}),s.__NG_ELEMENT_ID__=-1,s})();function Bd(s,o=nt.Default){const u=Re();return null===u?je(s,o):df(rr(),u,J(s),o)}function wD(){throw new Error("invalid")}function gc(s,o){const u=s.contentQueries;if(null!==u)for(let d=0;d<u.length;d+=2){const h=u[d],p=u[d+1];if(-1!==p){const y=s.data[p];Vl(h),y.contentQueries(2,o[p],p)}}}function Jr(s,o,u,d,h,p,y,E,T,S,R){const U=o.blueprint.slice();return U[0]=h,U[2]=76|d,(null!==R||s&&1024&s[2])&&(U[2]|=1024),Ll(U),U[3]=U[15]=s,U[8]=u,U[10]=y||s&&s[10],U[11]=E||s&&s[11],U[12]=T||s&&s[12]||null,U[9]=S||s&&s[9]||null,U[6]=p,U[20]=function Ag(){return Ed++}(),U[21]=R,U[16]=2==o.type?s[16]:U,U}function Pi(s,o,u,d,h){let p=s.data[o];if(null===p)p=function Is(s,o,u,d,h){const p=Su(),y=Go(),T=s.data[o]=function zy(s,o,u,d,h,p){return{type:u,index:d,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,d,h);return null===s.firstChild&&(s.firstChild=T),null!==p&&(y?null==p.child&&null!==T.parent&&(p.child=T):null===p.next&&(p.next=T)),T}(s,o,u,d,h),function _g(){return Lt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=u,p.value=d,p.attrs=h;const y=function qo(){const s=Lt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return ts(p,!0),p}function mc(s,o,u,d){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(d),s.blueprint.push(d),s.data.push(null);return h}function ln(s,o,u){Ru(o);try{const d=s.viewQuery;null!==d&&ev(1,d,u);const h=s.template;null!==h&&Gy(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gc(s,o),s.staticViewQueries&&ev(2,s.viewQuery,u);const p=s.components;null!==p&&function L(s,o){for(let u=0;u<o.length;u++)DD(s,o[u])}(o,p)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{o[2]&=-5,Eg()}}function Zd(s,o,u,d){const h=o[2];if(128!=(128&h)){Ru(o);try{Ll(o),function rf(s){return Lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Gy(s,o,u,2,d);const y=3==(3&h);if(y){const S=s.preOrderCheckHooks;null!==S&&rs(o,S,null)}else{const S=s.preOrderHooks;null!==S&&mo(o,S,0,null),_s(o,0)}if(function lI(s){for(let o=fi(s);null!==o;o=Ks(o)){if(!o[2])continue;const u=o[9];for(let d=0;d<u.length;d++){const h=u[d],p=h[3];0==(512&h[2])&&po(p,1),h[2]|=512}}}(o),function jd(s){for(let o=fi(s);null!==o;o=Ks(o))for(let u=10;u<o.length;u++){const d=o[u],h=d[1];$o(d)&&Zd(h,d,h.template,d[8])}}(o),null!==s.contentQueries&&gc(s,o),y){const S=s.contentCheckHooks;null!==S&&rs(o,S)}else{const S=s.contentHooks;null!==S&&mo(o,S,1),_s(o,1)}!function Wf(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let d=0;d<u.length;d++){const h=u[d];if(h<0)Bs(~h);else{const p=h,y=u[++d],E=u[++d];ku(y,p),E(2,o[p])}}}finally{Bs(-1)}}(s,o);const E=s.components;null!==E&&function ED(s,o){for(let u=0;u<o.length;u++)Jy(s,o[u])}(o,E);const T=s.viewQuery;if(null!==T&&ev(2,T,d),y){const S=s.viewCheckHooks;null!==S&&rs(o,S)}else{const S=s.viewHooks;null!==S&&mo(o,S,2),_s(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,po(o[3],-1))}finally{Eg()}}}function Gy(s,o,u,d,h){const p=ui(),y=2&d;try{Bs(-1),y&&o.length>22&&KE(s,o,22,!1),u(d,h)}finally{Bs(p)}}function Wy(s,o,u){if(gs(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}function vr(s,o,u){!td()||(function el(s,o,u,d){const h=u.directiveStart,p=u.directiveEnd;_a(u)&&function Qy(s,o,u){const d=Yr(o,s),h=Qg(u),p=s[10],y=_c(s,Jr(s,h,null,u.onPush?32:16,d,o,p,p.createRenderer(d,u),null,null,null));s[o.index]=y}(o,u,s.data[h+u.componentOffset]),s.firstCreatePass||Hs(u,o),Xr(d,o);const y=u.initialInputs;for(let E=h;E<p;E++){const T=s.data[E],S=qi(o,s,E,u);Xr(S,o),null!==y&&Xy(0,E-h,S,T,0,y),mr(T)&&(nr(u.index,o)[8]=qi(o,s,E,u))}}(s,o,u,Yr(u,o)),64==(64&u.flags)&&sI(s,o,u))}function iI(s,o,u=Yr){const d=o.localNames;if(null!==d){let h=o.index+1;for(let p=0;p<d.length;p+=2){const y=d[p+1],E=-1===y?u(o,s):s[y];s[h++]=E}}}function Qg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ye(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ye(s,o,u,d,h,p,y,E,T,S){const R=22+d,U=R+h,K=function ID(s,o){const u=[];for(let d=0;d<o;d++)u.push(d<s?null:qt);return u}(R,U),ie="function"==typeof S?S():S;return K[1]={type:s,blueprint:K,template:u,queries:null,viewQuery:E,declTNode:o,data:K.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:T,consts:ie,incompleteFirstPass:!1}}function yt(s,o,u,d){const h=im(o);null===u?h.push(d):(h.push(u),s.firstCreatePass&&tv(s).push(d,h.length-1))}function Zt(s,o,u,d){for(let h in s)if(s.hasOwnProperty(h)){u=null===u?{}:u;const p=s[h];null===d?zf(u,o,h,p):d.hasOwnProperty(h)&&zf(u,o,d[h],p)}return u}function zf(s,o,u,d){s.hasOwnProperty(u)?s[u].push(o,d):s[u]=[o,d]}function bs(s,o,u,d,h,p,y,E){const T=Yr(o,u);let R,S=o.inputs;!E&&null!=S&&(R=S[d])?(nv(s,u,R,d,h),_a(o)&&Jg(u,o.index)):3&o.type&&(d=function Kf(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),h=null!=y?y(h,o.value||"",d):h,p.setProperty(T,d,h))}function Jg(s,o){const u=nr(o,s);16&u[2]||(u[2]|=32)}function Ky(s,o,u,d){let h=!1;if(td()){const p=null===d?null:{"":-1},y=function Yy(s,o){const u=s.directiveRegistry;let d=null,h=null;if(u)for(let p=0;p<u.length;p++){const y=u[p];if(Uy(o,y.selectors,!1))if(d||(d=[]),mr(y))if(null!==y.findHostDirectiveDefs){const E=[];h=h||new Map,y.findHostDirectiveDefs(y,E,h),d.unshift(...E,y),tm(s,o,E.length)}else d.unshift(y),tm(s,o,0);else h=h||new Map,y.findHostDirectiveDefs?.(y,d,h),d.push(y)}return null===d?null:[d,h]}(s,u);let E,T;null===y?E=T=null:[E,T]=y,null!==E&&(h=!0,gi(s,o,u,E,p,T)),p&&function Ni(s,o,u){if(o){const d=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new _e(-301,!1);d.push(o[h],p)}}}(u,d,p)}return u.mergedAttrs=is(u.mergedAttrs,u.attrs),h}function gi(s,o,u,d,h,p){for(let S=0;S<d.length;S++)ld(Hs(u,o),s,d[S].type);!function nm(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}(u,s.data.length,d.length);for(let S=0;S<d.length;S++){const R=d[S];R.providersResolver&&R.providersResolver(R)}let y=!1,E=!1,T=mc(s,o,d.length,null);for(let S=0;S<d.length;S++){const R=d[S];u.mergedAttrs=is(u.mergedAttrs,R.hostAttrs),aI(s,u,o,T,R),TD(T,R,h),null!==R.contentQueries&&(u.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(u.flags|=64);const U=R.type.prototype;!y&&(U.ngOnChanges||U.ngOnInit||U.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),y=!0),!E&&(U.ngOnChanges||U.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),E=!0),T++}!function Xg(s,o,u){const h=o.directiveEnd,p=s.data,y=o.attrs,E=[];let T=null,S=null;for(let R=o.directiveStart;R<h;R++){const U=p[R],K=u?u.get(U):null,we=K?K.outputs:null;T=Zt(U.inputs,R,T,K?K.inputs:null),S=Zt(U.outputs,R,S,we);const $e=null===T||null===y||Wg(o)?null:CD(T,R,y);E.push($e)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=T,o.outputs=S}(s,u,p)}function sI(s,o,u){const d=u.directiveStart,h=u.directiveEnd,p=u.index,y=function Fl(){return Lt.lFrame.currentDirectiveIndex}();try{Bs(p);for(let E=d;E<h;E++){const T=s.data[E],S=o[E];go(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&oI(T,S)}}finally{Bs(-1),go(y)}}function oI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function tm(s,o,u){o.componentOffset=u,(s.components||(s.components=[])).push(o.index)}function TD(s,o,u){if(u){if(o.exportAs)for(let d=0;d<o.exportAs.length;d++)u[o.exportAs[d]]=s;mr(o)&&(u[""]=s)}}function aI(s,o,u,d,h){s.data[d]=h;const p=h.factory||(h.factory=lo(h.type)),y=new Mu(p,mr(h),Bd);s.blueprint[d]=y,u[d]=y,function em(s,o,u,d,h){const p=h.hostBindings;if(p){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const E=~o.index;(function mi(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(y)!=E&&y.push(E),y.push(u,d,p)}}(s,o,d,mc(s,u,h.hostVars,qt),h)}function Ts(s,o,u,d,h,p){const y=Yr(s,o);!function Js(s,o,u,d,h,p,y){if(null==p)s.removeAttribute(o,h,u);else{const E=null==y?Te(p):y(p,d||"",h);s.setAttribute(o,h,E,u)}}(o[11],y,p,s.value,u,d,h)}function Xy(s,o,u,d,h,p){const y=p[o];if(null!==y){const E=d.setInput;for(let T=0;T<y.length;){const S=y[T++],R=y[T++],U=y[T++];null!==E?d.setInput(u,U,S,R):u[R]=U}}}function CD(s,o,u){let d=null,h=0;for(;h<u.length;){const p=u[h];if(0!==p)if(5!==p){if("number"==typeof p)break;if(s.hasOwnProperty(p)){null===d&&(d=[]);const y=s[p];for(let E=0;E<y.length;E+=2)if(y[E]===o){d.push(p,y[E+1],u[h+1]);break}}h+=2}else h+=2;else h+=4}return d}function uI(s,o,u,d){return[s,!0,!1,o,null,0,d,u,null,null]}function Jy(s,o){const u=nr(o,s);if($o(u)){const d=u[1];48&u[2]?Zd(d,u,d.template,u[8]):u[5]>0&&rm(u)}}function rm(s){for(let d=fi(s);null!==d;d=Ks(d))for(let h=10;h<d.length;h++){const p=d[h];if($o(p))if(512&p[2]){const y=p[1];Zd(y,p,y.template,p[8])}else p[5]>0&&rm(p)}const u=s[1].components;if(null!==u)for(let d=0;d<u.length;d++){const h=nr(u[d],s);$o(h)&&h[5]>0&&rm(h)}}function DD(s,o){const u=nr(o,s),d=u[1];(function cI(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(d,u),ln(d,u,u[8])}function _c(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Yf(s){for(;s;){s[2]|=32;const o=at(s);if(dg(s)&&!o)return s;s=o}return null}function $d(s,o,u,d=!0){const h=o[10];h.begin&&h.begin();try{Zd(s,o,s.template,u)}catch(y){throw d&&Hd(o,y),y}finally{h.end&&h.end()}}function ev(s,o,u){Vl(0),o(s,u)}function im(s){return s[7]||(s[7]=[])}function tv(s){return s.cleanup||(s.cleanup=[])}function Hd(s,o){const u=s[9],d=u?u.get(Hf,null):null;d&&d.handleError(o)}function nv(s,o,u,d,h){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],T=o[y],S=s.data[y];null!==S.setInput?S.setInput(T,h,d,E):T[E]=h}}function Cs(s,o,u){const d=function Us(s,o){return Nn(o[s])}(o,s);!function Dd(s,o,u){s.setValue(o,u)}(s[11],d,u)}function sm(s,o,u){let d=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=me(h,E):2==p&&(d=me(d,E+": "+o[++y]+";"))}u?s.styles=d:s.stylesWithoutHost=d,u?s.classes=h:s.classesWithoutHost=h}function om(s,o,u,d,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&d.push(Nn(p)),ai(p))for(let E=10;E<p.length;E++){const T=p[E],S=T[1].firstChild;null!==S&&om(T[1],T,S,d)}const y=u.type;if(8&y)om(s,o,u.child,d);else if(32&y){const E=Ae(u,o);let T;for(;T=E();)d.push(T)}else if(16&y){const E=xd(o,u);if(Array.isArray(E))d.push(...E);else{const T=at(o[16]);om(T[1],T,E,d,!0)}}u=h?u.projectionNext:u.next}return d}class tl{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return om(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ai(o)){const u=o[8],d=u?u.indexOf(this):-1;d>-1&&(xf(o,d),Ma(u,d))}this._attachedToViewContainer=!1}kf(this._lView[1],this._lView)}onDestroy(o){yt(this._lView[1],this._lView,null,o)}markForCheck(){Yf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){$d(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Sf(s,o){kd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class rv extends tl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;$d(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class iv extends Fd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=rn(o);return new yc(u,this.ngModule)}}function sv(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class am{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,d){d=It(d);const h=this.injector.get(o,My,d);return h!==My||u===My?h:this.parentInjector.get(o,u,d)}}class yc extends Zf{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function zg(s){return s.map(rD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return sv(this.componentDef.inputs)}get outputs(){return sv(this.componentDef.outputs)}create(o,u,d,h){let p=(h=h||this.ngModule)instanceof dc?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new am(o,p):o,E=y.get(OE,null);if(null===E)throw new _e(407,!1);const T=y.get(LE,null),S=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",U=d?function Za(s,o,u){return s.selectRootElement(o,u===ke.ShadowDom)}(S,d,this.componentDef.encapsulation):tc(S,R,function fI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),K=this.componentDef.onPush?288:272,ie=ye(0,null,null,1,0,null,null,null,null,null),we=Jr(null,ie,null,K,null,null,E,S,T,y,null);let $e,Qe;Ru(we);try{const ut=this.componentDef;let xt,Fe=null;ut.findHostDirectiveDefs?(xt=[],Fe=new Map,ut.findHostDirectiveDefs(ut,xt,Fe),xt.push(ut)):xt=[ut];const Ft=function av(s,o){const u=s[1];return s[22]=o,Pi(u,22,2,"#host",null)}(we,U),qn=function gI(s,o,u,d,h,p,y,E){const T=h[1];!function mI(s,o,u,d){for(const h of s)o.mergedAttrs=is(o.mergedAttrs,h.hostAttrs);null!==o.mergedAttrs&&(sm(o,o.mergedAttrs,!0),null!==u&&yE(d,u,o))}(d,s,o,y);const S=p.createRenderer(o,u),R=Jr(h,Qg(u),null,u.onPush?32:16,h[s.index],s,p,S,E||null,null,null);return T.firstCreatePass&&tm(T,s,d.length-1),_c(h,R),h[s.index]=R}(Ft,U,ut,xt,we,E,S);Qe=Tu(ie,22),U&&function _I(s,o,u,d){if(d)Da(s,u,["ng-version",UE.full]);else{const{attrs:h,classes:p}=function iD(s){const o=[],u=[];let d=1,h=2;for(;d<s.length;){let p=s[d];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++d]):8===h&&u.push(p);else{if(!Xs(h))break;h=p}d++}return{attrs:o,classes:u}}(o.selectors[0]);h&&Da(s,u,h),p&&p.length>0&&ay(s,u,p.join(" "))}}(S,ut,U,d),void 0!==u&&function yI(s,o,u){const d=s.projection=[];for(let h=0;h<o.length;h++){const p=u[h];d.push(null!=p?Array.from(p):null)}}(Qe,this.ngContentSelectors,u),$e=function SD(s,o,u,d,h,p){const y=rr(),E=h[1],T=Yr(y,h);gi(E,h,y,u,null,d);for(let R=0;R<u.length;R++)Xr(qi(h,E,y.directiveStart+R,y),h);sI(E,h,y),T&&Xr(T,h);const S=qi(h,E,y.directiveStart+y.componentOffset,y);if(s[8]=h[8]=S,null!==p)for(const R of p)R(S,o);return Wy(E,y,s),S}(qn,ut,xt,Fe,we,[uv]),ln(ie,we,null)}finally{Eg()}return new ov(this.componentType,$e,hc(Qe,we),we,Qe)}}class ov extends qC{constructor(o,u,d,h,p){super(),this.location=d,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new rv(h),this.componentType=o}setInput(o,u){const d=this._tNode.inputs;let h;if(null!==d&&(h=d[o])){const p=this._rootLView;nv(p[1],p,h,o,u),Jg(p,this._tNode.index)}}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function uv(){const s=rr();Zs(Re()[1],s)}let cm=null;function ja(){if(!cm){const s=St.Symbol;if(s&&s.iterator)cm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const d=o[u];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(cm=d)}}}return cm}function Xf(s){return!!Jf(s)&&(Array.isArray(s)||!(s instanceof Map)&&ja()in s)}function Jf(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function yi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function gv(s,o,u,d){const h=Re();return yi(h,Hi(),o)&&(Xt(),Ts(pn(),h,s,o,u,d)),gv}function To(s,o,u,d){return yi(s,Hi(),u)?o+Te(u)+d:qt}function fm(s,o,u,d,h,p,y,E){const T=Re(),S=Xt(),R=s+22,U=S.firstCreatePass?function Ev(s,o,u,d,h,p,y,E,T){const S=o.consts,R=Pi(o,s,4,y||null,Si(S,E));Ky(o,u,R,Si(S,T)),Zs(o,R);const U=R.tViews=ye(2,R,d,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,R),U.queries=o.queries.embeddedTView(R)),R}(R,S,T,o,u,d,h,p,y):S.data[R];ts(U,!1);const K=T[11].createComment("");Og(S,T,K,U),Xr(K,T),_c(T,T[R]=uI(K,T,K,U)),Ol(U)&&vr(S,T,U),null!=y&&iI(T,U,E)}function rp(s){return function es(s,o){return s[o]}(function Ca(){return Lt.lFrame.contextLView}(),22+s)}function Ec(s,o,u){const d=Re();return yi(d,Hi(),o)&&bs(Xt(),pn(),d,s,o,d[11],u,!1),Ec}function pm(s,o,u,d,h){const y=h?"class":"style";nv(s,u,o.inputs[y],y,d)}function Kd(s,o,u,d){const h=Re(),p=Xt(),y=22+s,E=h[11],T=h[y]=tc(E,o,function Ig(){return Lt.lFrame.currentNamespace}()),S=p.firstCreatePass?function PD(s,o,u,d,h,p,y){const E=o.consts,S=Pi(o,s,2,h,Si(E,p));return Ky(o,u,S,Si(E,y)),null!==S.attrs&&sm(S,S.attrs,!1),null!==S.mergedAttrs&&sm(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(y,p,h,0,o,u,d):p.data[y];return ts(S,!0),yE(E,T,S),32!=(32&S.flags)&&Og(p,h,T,S),0===function Ta(){return Lt.lFrame.elementDepthCount}()&&Xr(T,h),function tf(){Lt.lFrame.elementDepthCount++}(),Ol(S)&&(vr(p,h,S),Wy(p,S,h)),null!==d&&iI(h,S),Kd}function Ic(){let s=rr();Go()?function Au(){Lt.lFrame.isParent=!1}():(s=s.parent,ts(s,!1));const o=s;!function Du(){Lt.lFrame.elementDepthCount--}();const u=Xt();return u.firstCreatePass&&(Zs(u,s),gs(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Hl(s){return 0!=(8&s.flags)}(o)&&pm(u,o,Re(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function zo(s){return 0!=(16&s.flags)}(o)&&pm(u,o,Re(),o.stylesWithoutHost,!1),Ic}function ip(s,o,u,d){return Kd(s,o,u,d),Ic(),ip}function Yd(){return Re()}function _m(s){return!!s&&"function"==typeof s.then}function sp(s){return!!s&&"function"==typeof s.subscribe}const Qd=sp;function qa(s,o,u,d){const h=Re(),p=Xt(),y=rr();return function TI(s,o,u,d,h,p,y){const E=Ol(d),S=s.firstCreatePass&&tv(s),R=o[8],U=im(o);let K=!0;if(3&d.type||y){const $e=Yr(d,o),Qe=y?y($e):$e,ut=U.length,xt=y?Ft=>y(Nn(Ft[d.index])):d.index;let Fe=null;if(!y&&E&&(Fe=function ND(s,o,u,d){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===d){const E=o[7],T=h[p+2];return E.length>T?E[T]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,d.index)),null!==Fe)(Fe.__ngLastListenerFn__||Fe).__ngNextListenerFn__=p,Fe.__ngLastListenerFn__=p,K=!1;else{p=Tv(d,o,R,p,!1);const Ft=u.listen(Qe,h,p);U.push(p,Ft),S&&S.push(h,xt,ut,ut+1)}}else p=Tv(d,o,R,p,!1);const ie=d.outputs;let we;if(K&&null!==ie&&(we=ie[h])){const $e=we.length;if($e)for(let Qe=0;Qe<$e;Qe+=2){const qn=o[we[Qe]][we[Qe+1]].subscribe(p),Ir=U.length;U.push(p,qn),S&&S.push(h,d.index,Ir,-(Ir+1))}}}(p,h,h[11],y,s,o,d),qa}function bv(s,o,u,d){try{return!1!==u(d)}catch(h){return Hd(s,h),!1}}function Tv(s,o,u,d,h){return function p(y){if(y===Function)return d;Yf(s.componentOffset>-1?nr(s.index,o):o);let T=bv(o,0,d,y),S=p.__ngNextListenerFn__;for(;S;)T=bv(o,0,S,y)&&T,S=S.__ngNextListenerFn__;return h&&!1===T&&(y.preventDefault(),y.returnValue=!1),T}}function Xd(s,o,u){return wm(s,"",o,"",u),Xd}function wm(s,o,u,d,h){const p=Re(),y=To(p,o,u,d);return y!==qt&&bs(Xt(),pn(),p,s,y,p[11],h,!1),wm}function Uv(s,o=""){const u=Re(),d=Xt(),h=s+22,p=d.firstCreatePass?Pi(d,h,1,o,null):d.data[h],y=u[h]=function Ku(s,o){return s.createText(o)}(u[11],o);Og(d,u,y,p),ts(p,!1)}function gp(s){return ih("",s,""),gp}function ih(s,o,u){const d=Re(),h=To(d,s,o,u);return h!==qt&&Cs(d,ui(),h),ih}const he=void 0;var $r=["en",[["a","p"],["AM","PM"],he],[["AM","PM"],he,he],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],he,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],he,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",he,"{1} 'at' {0}",he],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ne(s){const u=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===d?1:5}];let Cc={};function Gv(s){const o=function Nk(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=HI(o);if(u)return u;const d=o.split("-")[0];if(u=HI(d),u)return u;if("en"===d)return $r;throw new _e(701,!1)}function $I(s){return Gv(s)[Dt.PluralCase]}function HI(s){return s in Cc||(Cc[s]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[s]),Cc[s]}var Dt=(()=>((Dt=Dt||{})[Dt.LocaleId=0]="LocaleId",Dt[Dt.DayPeriodsFormat=1]="DayPeriodsFormat",Dt[Dt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Dt[Dt.DaysFormat=3]="DaysFormat",Dt[Dt.DaysStandalone=4]="DaysStandalone",Dt[Dt.MonthsFormat=5]="MonthsFormat",Dt[Dt.MonthsStandalone=6]="MonthsStandalone",Dt[Dt.Eras=7]="Eras",Dt[Dt.FirstDayOfWeek=8]="FirstDayOfWeek",Dt[Dt.WeekendRange=9]="WeekendRange",Dt[Dt.DateFormat=10]="DateFormat",Dt[Dt.TimeFormat=11]="TimeFormat",Dt[Dt.DateTimeFormat=12]="DateTimeFormat",Dt[Dt.NumberSymbols=13]="NumberSymbols",Dt[Dt.NumberFormats=14]="NumberFormats",Dt[Dt.CurrencyCode=15]="CurrencyCode",Dt[Dt.CurrencySymbol=16]="CurrencySymbol",Dt[Dt.CurrencyName=17]="CurrencyName",Dt[Dt.Currencies=18]="Currencies",Dt[Dt.Directionality=19]="Directionality",Dt[Dt.PluralCase=20]="PluralCase",Dt[Dt.ExtraData=21]="ExtraData",Dt))();const Mt="en-US";let an=Mt;class An{}class Tp{}function vi(s,o){return new c0(s,o??null)}class c0 extends An{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new iv(this);const d=Wr(o);this._bootstrapComponents=Ba(d.bootstrap),this._r3Injector=dD(o,u,[{provide:An,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class ml extends Tp{constructor(o){super(),this.moduleType=o}create(o){return new c0(this.moduleType,o)}}class As extends An{constructor(o,u,d){super(),this.componentFactoryResolver=new iv(this),this.instance=null;const h=new PE([...o,{provide:An,useValue:this},{provide:Fd,useValue:this.componentFactoryResolver}],u||$g(),d,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Hr(s,o,u=null){return new As(s,o,u).injector}let lb=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const d=kE(0,u.type),h=d.length>0?Hr([d],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=wt({token:s,providedIn:"environment",factory:()=>new s(je(dc))}),s})();function Pn(s){s.getStandaloneInjector=o=>o.get(lb).getOrCreateStandaloneInjector(s)}function w0(s){return o=>{setTimeout(s,void 0,o)}}const hn=class lS extends c.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,d){let h=o,p=u||(()=>null),y=d;if(o&&"object"==typeof o){const T=o;h=T.next?.bind(T),p=T.error?.bind(T),y=T.complete?.bind(T)}this.__isAsync&&(p=w0(p),h&&(h=w0(h)),y&&(y=w0(y)));const E=super.subscribe({next:h,error:p,complete:y});return o instanceof $.w0&&o.add(E),E}};function Zm(){return this._results[ja()]()}class wh{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ja(),d=wh.prototype;d[u]||(d[u]=Zm)}get changes(){return this._changes||(this._changes=new hn)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const d=this;d.dirty=!1;const h=function jr(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function gd(s,o,u){if(s.length!==o.length)return!1;for(let d=0;d<s.length;d++){let h=s[d],p=o[d];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(d._results,h,u))&&(d._results=h,d.length=h.length,d.last=h[this.length-1],d.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Eh=(()=>{class s{}return s.__NG_ELEMENT_ID__=dS,s})();const cS=Eh,xp=class extends cS{constructor(o,u,d){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=d}createEmbeddedView(o,u){const d=this._declarationTContainer.tViews,h=Jr(this._declarationLView,d,o,16,null,d.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(d)),ln(d,h,o),new tl(h)}};function dS(){return kp(rr(),Re())}function kp(s,o){return 4&s.type?new xp(o,s,hc(s,o)):null}let eu=(()=>{class s{}return s.__NG_ELEMENT_ID__=tu,s})();function tu(){return jm(rr(),Re())}const Ib=eu,E0=class extends Ib{constructor(o,u,d){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=d}get element(){return hc(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Fu(this._hostTNode,this._hostLView);if(ud(o)){const u=ys(o,this._hostLView),d=Sa(o);return new vs(u[1].data[d+8],u)}return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=I0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,d){let h,p;"number"==typeof d?h=d:null!=d&&(h=d.index,p=d.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,h),y}createComponent(o,u,d,h,p){const y=o&&!function Ra(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const U=u||{};E=U.index,d=U.injector,h=U.projectableNodes,p=U.environmentInjector||U.ngModuleRef}const T=y?o:new yc(rn(o)),S=d||this.parentInjector;if(!p&&null==T.ngModule){const K=(y?S:this.parentInjector).get(dc,null);K&&(p=K)}const R=T.create(S,h,void 0,p);return this.insert(R.hostView,E),R}insert(o,u){const d=o._lView,h=d[1];if(function ef(s){return ai(s[3])}(d)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const U=d[3],K=new E0(U,U[6],U[3]);K.detach(K.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function X_(s,o,u,d){const h=10+d,p=u.length;d>0&&(u[h-1][4]=o),d<p-10?(o[4]=u[h],Yl(u,10+d,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Af(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,d,y,p);const E=iy(p,y),T=d[11],S=Pf(T,y[7]);return null!==S&&function nc(s,o,u,d,h,p){d[0]=h,d[6]=o,kd(s,d,u,1,h,p)}(h,y[6],T,d,S,E),o.attachToViewContainerRef(),Yl(yl(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=I0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),d=xf(this._lContainer,u);d&&(Ma(yl(this._lContainer),u),kf(d[1],d))}detach(o){const u=this._adjustIndex(o,-1),d=xf(this._lContainer,u);return d&&null!=Ma(yl(this._lContainer),u)?new tl(d):null}_adjustIndex(o,u=0){return o??this.length+u}};function I0(s){return s[8]}function yl(s){return s[8]||(s[8]=[])}function jm(s,o){let u;const d=o[s.index];if(ai(d))u=d;else{let h;if(8&s.type)h=Nn(d);else{const p=o[11];h=p.createComment("");const y=Yr(s,o);ic(p,Pf(p,y),h,function gE(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=uI(d,o,h,s),_c(o,u)}return new E0(u,s,o)}class b0{constructor(o){this.queryList=o,this.matches=null}clone(){return new b0(this.queryList)}setDirty(){this.queryList.setDirty()}}class ur{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const d=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<d;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new ur(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Th(o,u).matches&&this.queries[u].setDirty()}}class un{constructor(o,u,d=null){this.predicate=o,this.flags=u,this.read=d}}class $m{constructor(o=[]){this.queries=o}elementStart(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let d=0;d<this.length;d++){const h=null!==u?u.length:0,p=this.getByIndex(d).embeddedTView(o,h);p&&(p.indexInDeclarationView=d,null!==u?u.push(p):u=[p])}return null!==u?new $m(u):null}template(o,u){for(let d=0;d<this.queries.length;d++)this.queries[d].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Hm{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Hm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let d=o.parent;for(;null!==d&&8&d.type&&d.index!==u;)d=d.parent;return u===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const d=this.metadata.predicate;if(Array.isArray(d))for(let h=0;h<d.length;h++){const p=d[h];this.matchTNodeWithReadOption(o,u,vl(u,p)),this.matchTNodeWithReadOption(o,u,Qo(u,o,p,!1,!1))}else d===Eh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Qo(u,o,d,!1,!1))}matchTNodeWithReadOption(o,u,d){if(null!==d){const h=this.metadata.read;if(null!==h)if(h===$f||h===eu||h===Eh&&4&u.type)this.addMatch(u.index,-2);else{const p=Qo(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,d)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function vl(s,o){const u=s.localNames;if(null!==u)for(let d=0;d<u.length;d+=2)if(u[d]===o)return u[d+1];return null}function as(s,o,u,d){return-1===u?function hS(s,o){return 11&s.type?hc(s,o):4&s.type?kp(s,o):null}(o,s):-2===u?function bb(s,o,u){return u===$f?hc(o,s):u===Eh?kp(o,s):u===eu?jm(o,s):void 0}(s,o,d):qi(s,s[1],u,o)}function Ih(s,o,u,d){const h=o[19].queries[d];if(null===h.matches){const p=s.data,y=u.matches,E=[];for(let T=0;T<y.length;T+=2){const S=y[T];E.push(S<0?null:as(o,p[S],y[T+1],u.metadata.read))}h.matches=E}return h.matches}function qm(s,o,u,d){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=Ih(s,o,h,u);for(let E=0;E<p.length;E+=2){const T=p[E];if(T>0)d.push(y[E/2]);else{const S=p[E+1],R=o[-T];for(let U=10;U<R.length;U++){const K=R[U];K[17]===K[3]&&qm(K[1],K,S,d)}if(null!==R[9]){const U=R[9];for(let K=0;K<U.length;K++){const ie=U[K];qm(ie[1],ie,S,d)}}}}}return d}function Ao(s){const o=Re(),u=Xt(),d=sf();Vl(d+1);const h=Th(u,d);if(s.dirty&&function Cu(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?qm(u,o,d,[]):Ih(u,o,h,d);s.reset(p,GC),s.notifyOnChanges()}return!0}return!1}function bh(s,o,u,d){const h=Xt();if(h.firstCreatePass){const p=rr();(function Db(s,o,u){null===s.queries&&(s.queries=new $m),s.queries.track(new Hm(o,u))})(h,new un(o,u,d),p.index),function Gm(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function zt(s,o,u){const d=new wh(4==(4&u));yt(s,o,d,d.destroy),null===o[19]&&(o[19]=new ur),o[19].queries.push(new b0(d))}(h,Re(),u)}function Cb(){return function fS(s,o){return s[19].queries[o].queryList}(Re(),sf())}function Th(s,o){return s.queries.getByIndex(o)}function Qm(...s){}const Zb=new dn("Application Initializer");let Xm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Qm,this.reject=Qm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,h)=>{this.resolve=d,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(_m(p))u.push(p);else if(Qd(p)){const y=new Promise((E,T)=>{p.subscribe({complete:E,error:T})});u.push(y)}}Promise.all(u).then(()=>{d()}).catch(h=>{this.reject(h)}),0===u.length&&d(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(je(Zb,8))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const jb=new dn("AppId",{providedIn:"root",factory:function P0(){return`${Jm()}${Jm()}${Jm()}`}});function Jm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const N0=new dn("Platform Initializer"),ES=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),e_=new dn("appBootstrapListener");let O0=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ro=new dn("LocaleId",{providedIn:"root",factory:()=>Xe(Ro,nt.Optional|nt.SkipSelf)||function L0(){return typeof $localize<"u"&&$localize.locale||Mt}()}),Hb=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Oc{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Lc=(()=>{class s{compileModuleSync(u){return new ml(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const d=this.compileModuleSync(u),p=Ba(Wr(u).declarations).reduce((y,E)=>{const T=rn(E);return T&&y.push(new yc(T)),y},[]);return new Oc(d,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const TS=(()=>Promise.resolve(0))();function i_(s){typeof Zone>"u"?TS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Li{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hn(!1),this.onMicrotaskEmpty=new hn(!1),this.onStable=new hn(!1),this.onError=new hn(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!d&&u,h.shouldCoalesceRunChangeDetection=d,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function Gb(){let s=St.requestAnimationFrame,o=St.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const d=o[Zone.__symbol__("OriginalDelegate")];d&&(o=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function CS(s){const o=()=>{!function Wb(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(St,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,B0(s),s.isCheckStableRunning=!0,V0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),B0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,d,h,p,y,E)=>{try{return zb(s),u.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),kh(s)}},onInvoke:(u,d,h,p,y,E,T)=>{try{return zb(s),u.invoke(h,p,y,E,T)}finally{s.shouldCoalesceRunChangeDetection&&o(),kh(s)}},onHasTask:(u,d,h,p)=>{u.hasTask(h,p),d===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,B0(s),V0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,d,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Li.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Li.isInAngularZone())throw new _e(909,!1)}run(o,u,d){return this._inner.run(o,u,d)}runTask(o,u,d,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,Uc,Qm,Qm);try{return p.runTask(y,u,d)}finally{p.cancelTask(y)}}runGuarded(o,u,d){return this._inner.runGuarded(o,u,d)}runOutsideAngular(o){return this._outer.run(o)}}const Uc={};function V0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function B0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function zb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function kh(s){s._nesting--,V0(s)}class Vc{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hn,this.onMicrotaskEmpty=new hn,this.onStable=new hn,this.onError=new hn}run(o,u,d){return o.apply(u,d)}runGuarded(o,u,d){return o.apply(u,d)}runOutsideAngular(o){return o()}runTask(o,u,d,h){return o.apply(u,d)}}const nu=new dn(""),Z0=new dn("");let Np,DS=(()=>{class s{constructor(u,d,h){this._ngZone=u,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Np||(function SS(s){Np=s}(h),h.addToWindow(d)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Li.assertNotInAngularZone(),i_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())i_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(u)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,d,h){let p=-1;d&&d>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,d,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,d,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,d,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(je(Li),je(j0),je(Z0))},s.\u0275prov=wt({token:s,factory:s.\u0275fac}),s})(),j0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,d){this._applications.set(u,d)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,d=!0){return Np?.findTestabilityInTree(this,u,d)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),la=null;const $0=new dn("AllowMultipleToken"),Op=new dn("PlatformDestroyListeners");class q0{constructor(o,u){this.name=o,this.token=u}}function Lp(s,o,u=[]){const d=`Platform: ${o}`,h=new dn(d);return(p=[])=>{let y=Fi();if(!y||y.injector.get($0,!1)){const E=[...u,...p,{provide:h,useValue:!0}];s?s(E):function s_(s){if(la&&!la.get($0,!1))throw new _e(400,!1);la=s;const o=s.get(z0);(function G0(s){const o=s.get(N0,null);o&&o.forEach(u=>u())})(s)}(function W0(s=[],o){return fc.create({name:o,providers:[{provide:Cy,useValue:"platform"},{provide:Op,useValue:new Set([()=>la=null])},...s]})}(E,d))}return function Fp(s){const o=Fi();if(!o)throw new _e(401,!1);return o}()}}function Fi(){return la?.get(z0)??null}let z0=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,d){const h=function Vp(s,o){let u;return u="noop"===s?new Vc:("zone.js"===s?void 0:s)||new Li(o),u}(d?.ngZone,function Up(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(d)),p=[{provide:Li,useValue:h}];return h.run(()=>{const y=fc.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(y),T=E.injector.get(Hf,null);if(!T)throw new _e(402,!1);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:R=>{T.handleError(R)}});E.onDestroy(()=>{Bp(this._modules,E),S.unsubscribe()})}),function K0(s,o,u){try{const d=u();return _m(d)?d.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):d}catch(d){throw o.runOutsideAngular(()=>s.handleError(d)),d}}(T,h,()=>{const S=E.injector.get(Xm);return S.runInitializers(),S.donePromise.then(()=>(function GI(s){Ht(s,"Expected localeId to be defined"),"string"==typeof s&&(an=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Ro,Mt)||Mt),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,d=[]){const h=ru({},d);return function Kb(s,o,u){const d=new ml(u);return Promise.resolve(d)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const d=u.injector.get(iu);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>d.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new _e(403,!1);u.instance.ngDoBootstrap(d)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const u=this._injector.get(Op,null);u&&(u.forEach(d=>d()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(je(fc))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function ru(s,o){return Array.isArray(o)?o.reduce(ru,s):{...s,...o}}let iu=(()=>{class s{constructor(u,d,h){this._zone=u,this._injector=d,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new N.y(E=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{Li.assertNotInAngularZone(),i_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Li.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{T.unsubscribe(),S.unsubscribe()}});this.isStable=(0,se.T)(p,y.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,d){const h=u instanceof Zf;if(!this._injector.get(Xm).done)throw!h&&jn(u),new _e(405,false);let y;y=h?u:this._injector.get(Fd).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function AS(s){return s.isBoundToModule}(y)?void 0:this._injector.get(An),S=y.create(fc.NULL,[],d||y.selector,E),R=S.location.nativeElement,U=S.injector.get(nu,null);return U?.registerApplication(R),S.onDestroy(()=>{this.detachView(S.hostView),Bp(this.components,S),U?.unregisterApplication(R)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const d=u;this._views.push(d),d.attachToAppRef(this)}detachView(u){const d=u;Bp(this._views,d),d.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u);const d=this._injector.get(e_,[]);d.push(...this._bootstrapListeners),d.forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Bp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new _e(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(je(Li),je(dc),je(Hf))},s.\u0275prov=wt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Bp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}function Rh(){return!1}let NS=(()=>{class s{}return s.__NG_ELEMENT_ID__=OS,s})();function OS(s){return function LS(s,o,u){if(_a(s)&&!u){const d=nr(s.index,o);return new tl(d,d)}return 47&s.type?new tl(o[16],o):null}(rr(),Re(),16==(16&s))}class jp{constructor(){}supports(o){return Xf(o)}create(o){return new Jb(o)}}const BS=(s,o)=>o;class Jb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||BS}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,d=this._removalsHead,h=0,p=null;for(;u||d;){const y=!d||u&&u.currentIndex<$p(d,h,p)?u:d,E=$p(y,h,p),T=y.currentIndex;if(y===d)h--,d=d._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const S=E-h,R=T-h;if(S!=R){for(let K=0;K<S;K++){const ie=K<p.length?p[K]:p[K]=0,we=ie+K;R<=we&&we<S&&(p[K]=ie+1)}p[y.previousIndex]=R-S}}E!==T&&o(y,E,T)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Xf(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,d=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),d=!0),u=u._next}else h=0,function pv(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[ja()]();let d;for(;!(d=u.next()).done;)o(d.value)}}(o,E=>{y=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,y)?(d&&(u=this._verifyReinsertion(u,E,y,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,h),d=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,d,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(d,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new rw(u,d),p,h),o}_verifyReinsertion(o,u,d,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,d),this._addToMoves(o,d),o}_moveAfter(o,u,d){return this._unlink(o),this._insertAfter(o,u,d),this._addToMoves(o,d),o}_addAfter(o,u,d){return this._insertAfter(o,u,d),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,d){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Mh),this._linkedRecords.put(o),o.currentIndex=d,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,d=o._next;return null===u?this._itHead=d:u._next=d,null===d?this._itTail=u:d._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mh),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class rw{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class iw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===u||u<=d.currentIndex)&&Object.is(d.trackById,o))return d;return null}remove(o){const u=o._prevDup,d=o._nextDup;return null===u?this._head=d:u._nextDup=d,null===d?this._tail=u:d._prevDup=u,null===this._head}}class Mh{constructor(){this.map=new Map}put(o){const u=o.trackById;let d=this.map.get(u);d||(d=new iw,this.map.set(u,d)),d.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $p(s,o,u){const d=s.previousIndex;if(null===d)return d;let h=0;return u&&d<u.length&&(h=u[d]),d+o+h}class u_{constructor(){}supports(o){return o instanceof Map||Jf(o)}create(){return new sw}}class sw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Jf(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(d,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,d),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,d);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let d=u;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const d=o._prev;return u._next=o,u._prev=d,o._prev=u,d&&(d._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const d=new eT(o);return this._records.set(o,d),d.currentValue=u,this._addToAdditions(d),d}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(d=>u(o[d],d))}}class eT{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tT(){return new l_([new jp])}let l_=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(null!=d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||tT()),deps:[[s,new D,new Gi]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(null!=d)return d;throw new _e(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:tT}),s})();function c_(){return new ow([new u_])}let ow=(()=>{class s{constructor(u){this.factories=u}static create(u,d){if(d){const h=d.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:d=>s.create(u,d||c_()),deps:[[s,new D,new Gi]]}}find(u){const d=this.factories.find(h=>h.supports(u));if(d)return d;throw new _e(901,!1)}}return s.\u0275prov=wt({token:s,providedIn:"root",factory:c_}),s})();const Ph=Lp(null,"core",[]);let Nh=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(je(iu))},s.\u0275mod=Fo({type:s}),s.\u0275inj=ri({}),s})();function aw(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ft,Ce,F)=>{F.d(Ce,{Z:()=>qe});var c=F(2090),$=F(4859),N=F(9681),se=F(1877);class ae{constructor(_e,De){this._delegate=_e,this.firebase=De,(0,N._addComponent)(_e,new $.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(_e,De=N._DEFAULT_ENTRY_NAME){var Te;this._delegate.checkDestroyed();const Me=this._delegate.container.getProvider(_e);return!Me.isInitialized()&&"EXPLICIT"===(null===(Te=Me.getComponent())||void 0===Te?void 0:Te.instantiationMode)&&Me.initialize(),Me.getImmediate({identifier:De})}_removeServiceInstance(_e,De=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(De)}_addComponent(_e){(0,N._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,N._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function me(){const it=function fe(it){const _e={},De={__esModule:!0,initializeApp:function Le(te,de={}){const Ie=N.initializeApp(te,de);if((0,c.r3)(_e,Ie.name))return _e[Ie.name];const Q=new it(Ie,De);return _e[Ie.name]=Q,Q},app:Me,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Se(te){const de=te.name,Ie=de.replace("-compat","");if(N._registerComponent(te)&&"PUBLIC"===te.type){const Q=(X=Me())=>{if("function"!=typeof X[Ie])throw ve.create("invalid-app-argument",{appName:de});return X[Ie]()};void 0!==te.serviceProps&&(0,c.ZB)(Q,te.serviceProps),De[Ie]=Q,it.prototype[Ie]=function(...X){return this._getService.bind(this,de).apply(this,te.multipleInstances?X:[])}}return"PUBLIC"===te.type?De[Ie]:null},removeApp:function Te(te){delete _e[te]},useAsService:function He(te,de){return"serverAuth"===de?null:de},modularAPIs:N}};function Me(te){if(!(0,c.r3)(_e,te=te||N._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:te});return _e[te]}return De.default=De,Object.defineProperty(De,"apps",{get:function Pe(){return Object.keys(_e).map(te=>_e[te])}}),Me.App=it,De}(ae);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:me,extendNamespace:function _e(De){(0,c.ZB)(it,De)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),it}(),W=new se.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const qe=G;!function xe(it){(0,N.registerVersion)("@firebase/app-compat","0.2.0",it)}()},9681:(ft,Ce,F)=>{F.r(Ce),F.d(Ce,{FirebaseError:()=>se.ZR,SDK_VERSION:()=>cs,_DEFAULT_ENTRY_NAME:()=>fn,_addComponent:()=>Jt,_addOrOverwriteComponent:()=>cr,_apps:()=>Ht,_clearComponents:()=>ri,_components:()=>vt,_getProvider:()=>wt,_registerComponent:()=>Kt,_removeServiceInstance:()=>Ei,deleteApp:()=>Ii,getApp:()=>Vn,getApps:()=>ii,initializeApp:()=>Zi,onLog:()=>nt,registerVersion:()=>dr,setLogLevel:()=>hr});var c=F(5861),$=F(4859),N=F(1877),se=F(2090),ae=F(8766);class ce{constructor(be){this.container=be}getPlatformInfoString(){return this.container.getProviders().map(Xe=>{if(function ve(je){return"VERSION"===je.getComponent()?.type}(Xe)){const It=Xe.getImmediate();return`${It.library}/${It.version}`}return null}).filter(Xe=>Xe).join(" ")}}const fe="@firebase/app",G=new N.Yd("@firebase/app"),fn="[DEFAULT]",bt={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,vt=new Map;function Jt(je,be){try{je.container.addComponent(be)}catch(Xe){G.debug(`Component ${be.name} failed to register with FirebaseApp ${je.name}`,Xe)}}function cr(je,be){je.container.addOrOverwriteComponent(be)}function Kt(je){const be=je.name;if(vt.has(be))return G.debug(`There were multiple attempts to register component ${be}.`),!1;vt.set(be,je);for(const Xe of Ht.values())Jt(Xe,je);return!0}function wt(je,be){const Xe=je.container.getProvider("heartbeat").getImmediate({optional:!0});return Xe&&Xe.triggerHeartbeat(),je.container.getProvider(be)}function Ei(je,be,Xe=fn){wt(je,be).clearInstance(Xe)}function ri(){vt.clear()}const kn=new se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Bi{constructor(be,Xe,It){this._isDeleted=!1,this._options=Object.assign({},be),this._config=Object.assign({},Xe),this._name=Xe.name,this._automaticDataCollectionEnabled=Xe.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new $.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this.checkDestroyed(),this._automaticDataCollectionEnabled=be}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(be){this._isDeleted=be}checkDestroyed(){if(this.isDeleted)throw kn.create("app-deleted",{appName:this._name})}}const cs="9.15.0";function Zi(je,be={}){let Xe=je;"object"!=typeof be&&(be={name:be});const It=Object.assign({name:fn,automaticDataCollectionEnabled:!1},be),Tt=It.name;if("string"!=typeof Tt||!Tt)throw kn.create("bad-app-name",{appName:String(Tt)});if(Xe||(Xe=(0,se.aH)()),!Xe)throw kn.create("no-options");const Qt=Ht.get(Tt);if(Qt){if((0,se.vZ)(Xe,Qt.options)&&(0,se.vZ)(It,Qt.config))return Qt;throw kn.create("duplicate-app",{appName:Tt})}const q=new $.H0(Tt);for(const Y of vt.values())q.addComponent(Y);const H=new Bi(Xe,It,q);return Ht.set(Tt,H),H}function Vn(je=fn){const be=Ht.get(je);if(!be&&je===fn)return Zi();if(!be)throw kn.create("no-app",{appName:je});return be}function ii(){return Array.from(Ht.values())}function Ii(je){return gn.apply(this,arguments)}function gn(){return(gn=(0,c.Z)(function*(je){const be=je.name;Ht.has(be)&&(Ht.delete(be),yield Promise.all(je.container.getProviders().map(Xe=>Xe.delete())),je.isDeleted=!0)})).apply(this,arguments)}function dr(je,be,Xe){var It;let Tt=null!==(It=bt[je])&&void 0!==It?It:je;Xe&&(Tt+=`-${Xe}`);const Qt=Tt.match(/\s|\//),q=be.match(/\s|\//);if(Qt||q){const H=[`Unable to register library "${Tt}" with version "${be}":`];return Qt&&H.push(`library name "${Tt}" contains illegal characters (whitespace or "/")`),Qt&&q&&H.push("and"),q&&H.push(`version name "${be}" contains illegal characters (whitespace or "/")`),void G.warn(H.join(" "))}Kt(new $.wA(`${Tt}-version`,()=>({library:Tt,version:be}),"VERSION"))}function nt(je,be){if(null!==je&&"function"!=typeof je)throw kn.create("invalid-log-argument");(0,N.Am)(je,be)}function hr(je){(0,N.Ub)(je)}const Bn="firebase-heartbeat-store";let Gr=null;function St(){return Gr||(Gr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(je,be)=>{0===be&&je.createObjectStore(Bn)}}).catch(je=>{throw kn.create("idb-open",{originalErrorMessage:je.message})})),Gr}function Ct(){return(Ct=(0,c.Z)(function*(je){try{return(yield St()).transaction(Bn).objectStore(Bn).get(bn(je))}catch(be){if(be instanceof se.ZR)G.warn(be.message);else{const Xe=kn.create("idb-get",{originalErrorMessage:be?.message});G.warn(Xe.message)}}})).apply(this,arguments)}function mn(je,be){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(je,be){try{const It=(yield St()).transaction(Bn,"readwrite");return yield It.objectStore(Bn).put(be,bn(je)),It.done}catch(Xe){if(Xe instanceof se.ZR)G.warn(Xe.message);else{const It=kn.create("idb-set",{originalErrorMessage:Xe?.message});G.warn(It.message)}}})).apply(this,arguments)}function bn(je){return`${je.name}!${je.options.appId}`}class bi{constructor(be){this.container=be,this._heartbeatsCache=null;const Xe=this.container.getProvider("app").getImmediate();this._storage=new Gt(Xe),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var be=this;return(0,c.Z)(function*(){const It=be.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Tt=Ut();if(null===be._heartbeatsCache&&(be._heartbeatsCache=yield be._heartbeatsCachePromise),be._heartbeatsCache.lastSentHeartbeatDate!==Tt&&!be._heartbeatsCache.heartbeats.some(Qt=>Qt.date===Tt))return be._heartbeatsCache.heartbeats.push({date:Tt,agent:It}),be._heartbeatsCache.heartbeats=be._heartbeatsCache.heartbeats.filter(Qt=>{const q=new Date(Qt.date).valueOf();return Date.now()-q<=2592e6}),be._storage.overwrite(be._heartbeatsCache)})()}getHeartbeatsHeader(){var be=this;return(0,c.Z)(function*(){if(null===be._heartbeatsCache&&(yield be._heartbeatsCachePromise),null===be._heartbeatsCache||0===be._heartbeatsCache.heartbeats.length)return"";const Xe=Ut(),{heartbeatsToSend:It,unsentEntries:Tt}=function Ti(je,be=1024){const Xe=[];let It=je.slice();for(const Tt of je){const Qt=Xe.find(q=>q.agent===Tt.agent);if(Qt){if(Qt.dates.push(Tt.date),Fr(Xe)>be){Qt.dates.pop();break}}else if(Xe.push({agent:Tt.agent,dates:[Tt.date]}),Fr(Xe)>be){Xe.pop();break}It=It.slice(1)}return{heartbeatsToSend:Xe,unsentEntries:It}}(be._heartbeatsCache.heartbeats),Qt=(0,se.L)(JSON.stringify({version:2,heartbeats:It}));return be._heartbeatsCache.lastSentHeartbeatDate=Xe,Tt.length>0?(be._heartbeatsCache.heartbeats=Tt,yield be._storage.overwrite(be._heartbeatsCache)):(be._heartbeatsCache.heartbeats=[],be._storage.overwrite(be._heartbeatsCache)),Qt})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class Gt{constructor(be){this.app=be,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,se.hl)()&&(0,se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var be=this;return(0,c.Z)(function*(){return(yield be._canUseIndexedDBPromise)&&(yield function _t(je){return Ct.apply(this,arguments)}(be.app))||{heartbeats:[]}})()}overwrite(be){var Xe=this;return(0,c.Z)(function*(){var It;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return mn(Xe.app,{lastSentHeartbeatDate:null!==(It=be.lastSentHeartbeatDate)&&void 0!==It?It:Qt.lastSentHeartbeatDate,heartbeats:be.heartbeats})}})()}add(be){var Xe=this;return(0,c.Z)(function*(){var It;if(yield Xe._canUseIndexedDBPromise){const Qt=yield Xe.read();return mn(Xe.app,{lastSentHeartbeatDate:null!==(It=be.lastSentHeartbeatDate)&&void 0!==It?It:Qt.lastSentHeartbeatDate,heartbeats:[...Qt.heartbeats,...be.heartbeats]})}})()}}function Fr(je){return(0,se.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Zn(je){Kt(new $.wA("platform-logger",be=>new ce(be),"PRIVATE")),Kt(new $.wA("heartbeat",be=>new bi(be),"PRIVATE")),dr(fe,"0.9.0",je),dr(fe,"0.9.0","esm2017"),dr("fire-js","")}("")},4859:(ft,Ce,F)=>{F.d(Ce,{H0:()=>fe,wA:()=>N,zt:()=>ae});var c=F(5861),$=F(2090);class N{constructor(G,W,J){this.name=G,this.instanceFactory=W,this.type=J,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const se="[DEFAULT]";class ae{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const J=new $.BH;if(this.instancesDeferred.set(W,J),this.isInitialized(W)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:W});Be&&J.resolve(Be)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const J=this.normalizeInstanceIdentifier(G?.identifier),Be=null!==(W=G?.optional)&&void 0!==W&&W;if(!this.isInitialized(J)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:J})}catch(xe){if(Be)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ve(me){return"EAGER"===me.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:se})}catch{}for(const[W,J]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier(W);try{const xe=this.getOrInitializeService({instanceIdentifier:Be});J.resolve(xe)}catch{}}}}clearInstance(G=se){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(J=>"INTERNAL"in J).map(J=>J.INTERNAL.delete()),...W.filter(J=>"_delete"in J).map(J=>J._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=se){return this.instances.has(G)}getOptions(G=se){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,J=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(J))throw Error(`${this.name}(${J}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:J,options:W});for(const[xe,qe]of this.instancesDeferred.entries())J===this.normalizeInstanceIdentifier(xe)&&qe.resolve(Be);return Be}onInit(G,W){var J;const Be=this.normalizeInstanceIdentifier(W),xe=null!==(J=this.onInitCallbacks.get(Be))&&void 0!==J?J:new Set;xe.add(G),this.onInitCallbacks.set(Be,xe);const qe=this.instances.get(Be);return qe&&G(qe,Be),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,W){const J=this.onInitCallbacks.get(W);if(J)for(const Be of J)try{Be(G,W)}catch{}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let J=this.instances.get(G);if(!J&&this.component&&(J=this.component.instanceFactory(this.container,{instanceIdentifier:(me=G,me===se?void 0:me),options:W}),this.instances.set(G,J),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(J,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,J)}catch{}var me;return J||null}normalizeInstanceIdentifier(G=se){return this.component?this.component.multipleInstances?G:se:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ae(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,Ce,F)=>{F.d(Ce,{Am:()=>me,Ub:()=>fe,Yd:()=>ve,in:()=>$});const c=[];var $=(()=>{return(G=$||($={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",$;var G})();const N={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},se=$.INFO,ae={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},ce=(G,W,...J)=>{if(W<G.logLevel)return;const Be=(new Date).toISOString(),xe=ae[W];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[xe](`[${Be}]  ${G.name}:`,...J)};class ve{constructor(W){this.name=W,this._logLevel=se,this._logHandler=ce,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in $))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?N[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...W),this._logHandler(this,$.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...W),this._logHandler(this,$.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,$.INFO,...W),this._logHandler(this,$.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,$.WARN,...W),this._logHandler(this,$.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...W),this._logHandler(this,$.ERROR,...W)}}function fe(G){c.forEach(W=>{W.setLogLevel(G)})}function me(G,W){for(const J of c){let Be=null;W&&W.level&&(Be=N[W.level]),J.userLogHandler=null===G?null:(xe,qe,...it)=>{const _e=it.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");qe>=(Be??xe.logLevel)&&G({level:$[qe].toLowerCase(),message:_e,args:it,type:xe.name})}}}},259:(ft,Ce,F)=>{F.d(Ce,{C6:()=>c.getApps,Mq:()=>c.getApp});var c=F(9681);(0,c.registerVersion)("firebase","9.15.0","app")},9260:(ft,Ce,F)=>{F.d(Ce,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(ft,Ce,F)=>{F.r(Ce);var c=F(5861),$=F(3942),N=F(552),se=F(2090),ve=(F(9681),F(1877),F(4859));function fe(){return window}function W(){return(W=(0,c.Z)(function*(B,M,V){var ue;const{BuildInfo:ke}=fe();(0,N.ap)(M.sessionId,"AuthEvent did not contain a session ID");const st=yield De(M.sessionId),Ge={};return(0,N.aq)()?Ge.ibi=ke.packageName:(0,N.ar)()?Ge.apn=ke.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),ke.displayName&&(Ge.appDisplayName=ke.displayName),Ge.sessionId=st,(0,N.at)(B,V,M.type,void 0,null!==(ue=M.eventId)&&void 0!==ue?ue:void 0,Ge)})).apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(B){const{BuildInfo:M}=fe(),V={};(0,N.aq)()?V.iosBundleId=M.packageName:(0,N.ar)()?V.androidPackageName=M.packageName:(0,N.as)(B,"operation-not-supported-in-this-environment"),yield(0,N.au)(B,V)})).apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(B,M,V){const{cordova:ue}=fe();let ke=()=>{};try{yield new Promise((st,Ge)=>{let Ot=null;function ct(){var Rt;st();const Ur=null===(Rt=ue.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof Ur&&Ur(),"function"==typeof V?.close&&V.close()}function yn(){Ot||(Ot=window.setTimeout(()=>{Ge((0,N.aw)(B,"redirect-cancelled-by-user"))},2e3))}function fr(){"visible"===document?.visibilityState&&yn()}M.addPassiveListener(ct),document.addEventListener("resume",yn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",fr,!1),ke=()=>{M.removePassiveListener(ct),document.removeEventListener("resume",yn,!1),document.removeEventListener("visibilitychange",fr,!1),Ot&&window.clearTimeout(Ot)}})}finally{ke()}})).apply(this,arguments)}function De(B){return Te.apply(this,arguments)}function Te(){return(Te=(0,c.Z)(function*(B){const M=Me(B),V=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(V)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Me(B){if((0,N.ap)(/[0-9a-zA-Z]+/.test(B),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(B);const M=new ArrayBuffer(B.length),V=new Uint8Array(M);for(let ue=0;ue<B.length;ue++)V[ue]=B.charCodeAt(ue);return V}class Pe extends N.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(V=>V(M)),super.onEvent(M)}initialized(){var M=this;return(0,c.Z)(function*(){yield M.initPromise})()}}function te(B){return de.apply(this,arguments)}function de(){return(de=(0,c.Z)(function*(B){const M=yield X()._get(pe(B));return M&&(yield X()._remove(pe(B))),M})).apply(this,arguments)}function Q(){const B=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let V=0;V<20;V++){const ue=Math.floor(Math.random()*M.length);B.push(M.charAt(ue))}return B.join("")}function X(){return(0,N.az)(N.b)}function pe(B){return(0,N.aA)("authEvent",B.config.apiKey,B.name)}function Ve(B){if(!B?.includes("?"))return{};const[M,...V]=B.split("?");return(0,se.zd)(V.join("?"))}const fn=class nn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var V=this;return(0,c.Z)(function*(){const ue=M._key();let ke=V.eventManagers.get(ue);return ke||(ke=new Pe(M),V.eventManagers.set(ue,ke),V.attachCallbackListeners(M,ke)),ke})()}_openPopup(M){(0,N.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,V,ue,ke){var st=this;return(0,c.Z)(function*(){!function _e(B){var M,V,ue,ke,st,Ge,Ot,ct,yn,fr;const Rt=fe();(0,N.ax)("function"==typeof(null===(M=Rt?.universalLinks)||void 0===M?void 0:M.subscribe),B,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(V=Rt?.BuildInfo)||void 0===V?void 0:V.packageName)<"u",B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(st=null===(ke=null===(ue=Rt?.cordova)||void 0===ue?void 0:ue.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===st?void 0:st.openUrl),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(ct=null===(Ot=null===(Ge=Rt?.cordova)||void 0===Ge?void 0:Ge.plugins)||void 0===Ot?void 0:Ot.browsertab)||void 0===ct?void 0:ct.isAvailable),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(fr=null===(yn=Rt?.cordova)||void 0===yn?void 0:yn.InAppBrowser)||void 0===fr?void 0:fr.open),B,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const Ge=yield st._initialize(M);yield Ge.initialized(),Ge.resetRedirect(),(0,N.aD)(),yield st._originValidation(M);const Ot=function Se(B,M,V=null){return{type:M,eventId:V,urlResponse:null,sessionId:Q(),postBody:null,tenantId:B.tenantId,error:(0,N.aw)(B,"no-auth-event")}}(M,ue,ke);yield function He(B,M){return X()._set(pe(B),M)}(M,Ot);const ct=yield function G(B,M,V){return W.apply(this,arguments)}(M,Ot,V),yn=yield function xe(B){const{cordova:M}=fe();return new Promise(V=>{M.plugins.browsertab.isAvailable(ue=>{let ke=null;ue?M.plugins.browsertab.openUrl(B):ke=M.InAppBrowser.open(B,(0,N.av)()?"_blank":"_system","location=yes"),V(ke)})})}(ct);return function qe(B,M,V){return it.apply(this,arguments)}(M,Ge,yn)})()}_isIframeWebStorageSupported(M,V){throw new Error("Method not implemented.")}_originValidation(M){const V=M._key();return this.originValidationPromises[V]||(this.originValidationPromises[V]=function J(B){return Be.apply(this,arguments)}(M)),this.originValidationPromises[V]}attachCallbackListeners(M,V){const{universalLinks:ue,handleOpenURL:ke,BuildInfo:st}=fe(),Ge=setTimeout((0,c.Z)(function*(){yield te(M),V.onEvent(bt())}),500),Ot=function(){var fr=(0,c.Z)(function*(Rt){clearTimeout(Ge);const Ur=yield te(M);let xl=null;Ur&&Rt?.url&&(xl=function Ie(B,M){var V,ue;const ke=function Ue(B){const M=Ve(B),V=M.link?decodeURIComponent(M.link):void 0,ue=Ve(V).link,ke=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return Ve(ke).link||ke||ue||V||B}(M);if(ke.includes("/__/auth/callback")){const st=Ve(ke),Ge=st.firebaseError?function oe(B){try{return JSON.parse(B)}catch{return null}}(decodeURIComponent(st.firebaseError)):null,Ot=null===(ue=null===(V=Ge?.code)||void 0===V?void 0:V.split("auth/"))||void 0===ue?void 0:ue[1],ct=Ot?(0,N.aw)(Ot):null;return ct?{type:B.type,eventId:B.eventId,tenantId:B.tenantId,error:ct,urlResponse:null,sessionId:null,postBody:null}:{type:B.type,eventId:B.eventId,tenantId:B.tenantId,sessionId:B.sessionId,urlResponse:ke,postBody:null}}return null}(Ur,Rt.url)),V.onEvent(xl||bt())});return function(Ur){return fr.apply(this,arguments)}}();typeof ue<"u"&&"function"==typeof ue.subscribe&&ue.subscribe(null,Ot);const ct=ke,yn=`${st.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var fr=(0,c.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(yn)&&Ot({url:Rt}),"function"==typeof ct)try{ct(Rt)}catch(Ur){console.error(Ur)}});return function(Rt){return fr.apply(this,arguments)}}()}};function bt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Kt(){var B;return(null===(B=self?.location)||void 0===B?void 0:B.protocol)||null}function Ei(B=(0,se.z$)()){return!("file:"!==Kt()&&"ionic:"!==Kt()&&"capacitor:"!==Kt()||!B.toLowerCase().match(/iphone|ipad|ipod|android/))}function cs(){try{const B=self.localStorage,M=N.aI();if(B)return B.setItem(M,"1"),B.removeItem(M),!function Bi(B=(0,se.z$)()){return function Dr(){return(0,se.w1)()&&11===document?.documentMode}()||function kn(B=(0,se.z$)()){return/Edge\/\d+/.test(B)}(B)}()||(0,se.hl)()}catch{return Zi()&&(0,se.hl)()}return!1}function Zi(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function wt(){return"http:"===Kt()||"https:"===Kt()}()||(0,se.ru)()||Ei())&&!function ri(){return(0,se.b$)()||(0,se.UG)()}()&&cs()&&!Zi()}function ii(){return Ei()&&typeof document<"u"}function gn(){return(gn=(0,c.Z)(function*(){return!!ii()&&new Promise(B=>{const M=setTimeout(()=>{B(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),B(!0)})})})).apply(this,arguments)}const nt={LOCAL:"local",NONE:"none",SESSION:"session"},hr=N.ax,Sr="persistence";function Bn(B){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,c.Z)(function*(B){yield B._initializationPromise;const M=_t(),V=N.aA(Sr,B.config.apiKey,B.name);M&&M.setItem(V,B._getPersistence())})).apply(this,arguments)}function _t(){var B;try{return(null===(B=function dr(){return typeof window<"u"?window:null}())||void 0===B?void 0:B.sessionStorage)||null}catch{return null}}const Ct=N.ax;class mn{constructor(){this.browserResolver=N.az(N.k),this.cordovaResolver=N.az(fn),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize(M){var V=this;return(0,c.Z)(function*(){return yield V.selectUnderlyingResolver(),V.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,V,ue,ke){var st=this;return(0,c.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openPopup(M,V,ue,ke)})()}_openRedirect(M,V,ue,ke){var st=this;return(0,c.Z)(function*(){return yield st.selectUnderlyingResolver(),st.assertedUnderlyingResolver._openRedirect(M,V,ue,ke)})()}_isIframeWebStorageSupported(M,V){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,V)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return ii()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,c.Z)(function*(){if(M.underlyingResolver)return;const V=yield function Ii(){return gn.apply(this,arguments)}();M.underlyingResolver=V?M.cordovaResolver:M.browserResolver})()}}function Kn(B){return B.unwrap()}function si(B){return bi(B)}function bi(B){const{_tokenResponse:M}=B instanceof se.ZR?B.customData:B;if(!M)return null;if(!(B instanceof se.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return N.P.credentialFromResult(B);const V=M.providerId;if(!V||V===N.o.PASSWORD)return null;let ue;switch(V){case N.o.GOOGLE:ue=N.Q;break;case N.o.FACEBOOK:ue=N.N;break;case N.o.GITHUB:ue=N.T;break;case N.o.TWITTER:ue=N.W;break;default:const{oauthIdToken:ke,oauthAccessToken:st,oauthTokenSecret:Ge,pendingToken:Ot,nonce:ct}=M;return st||Ge||ke||Ot?Ot?V.startsWith("saml.")?N.aL._create(V,Ot):N.J._fromParams({providerId:V,signInMethod:V,pendingToken:Ot,idToken:ke,accessToken:st}):new N.U(V).credential({idToken:ke,accessToken:st,rawNonce:ct}):null}return B instanceof se.ZR?ue.credentialFromError(B):ue.credentialFromResult(B)}function Ut(B,M){return M.catch(V=>{throw V instanceof se.ZR&&function Yn(B,M){var V;const ue=null===(V=M.customData)||void 0===V?void 0:V._tokenResponse;if("auth/multi-factor-auth-required"===M?.code)M.resolver=new Fr(B,N.an(B,M));else if(ue){const ke=bi(M),st=M;ke&&(st.credential=ke,st.tenantId=ue.tenantId||void 0,st.email=ue.email||void 0,st.phoneNumber=ue.phoneNumber||void 0)}}(B,V),V}).then(V=>{const ke=V.user;return{operationType:V.operationType,credential:si(V),additionalUserInfo:N.al(V),user:Zn.getOrCreate(ke)}})}function Ti(B,M){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,c.Z)(function*(B,M){const V=yield M;return{verificationId:V.verificationId,confirm:ue=>Ut(B,V.confirm(ue))}})).apply(this,arguments)}class Fr{constructor(M,V){this.resolver=V,this.auth=function bn(B){return B.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return Ut(Kn(this.auth),this.resolver.resolveSignIn(M))}}class Zn{constructor(M){this._delegate=M,this.multiFactor=N.ao(M)}static getOrCreate(M){return Zn.USER_MAP.has(M)||Zn.USER_MAP.set(M,new Zn(M)),Zn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var V=this;return(0,c.Z)(function*(){return Ut(V.auth,N.Z(V._delegate,M))})()}linkWithPhoneNumber(M,V){var ue=this;return(0,c.Z)(function*(){return Ti(ue.auth,N.l(ue._delegate,M,V))})()}linkWithPopup(M){var V=this;return(0,c.Z)(function*(){return Ut(V.auth,N.d(V._delegate,M,mn))})()}linkWithRedirect(M){var V=this;return(0,c.Z)(function*(){return yield Bn(N.aE(V.auth)),N.g(V._delegate,M,mn)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var V=this;return(0,c.Z)(function*(){return Ut(V.auth,N._(V._delegate,M))})()}reauthenticateWithPhoneNumber(M,V){return Ti(this.auth,N.r(this._delegate,M,V))}reauthenticateWithPopup(M){return Ut(this.auth,N.e(this._delegate,M,mn))}reauthenticateWithRedirect(M){var V=this;return(0,c.Z)(function*(){return yield Bn(N.aE(V.auth)),N.h(V._delegate,M,mn)})()}sendEmailVerification(M){return N.ab(this._delegate,M)}unlink(M){var V=this;return(0,c.Z)(function*(){return yield N.ak(V._delegate,M),V})()}updateEmail(M){return N.ag(this._delegate,M)}updatePassword(M){return N.ah(this._delegate,M)}updatePhoneNumber(M){return N.u(this._delegate,M)}updateProfile(M){return N.af(this._delegate,M)}verifyBeforeUpdateEmail(M,V){return N.ac(this._delegate,M,V)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Zn.USER_MAP=new WeakMap;const je=N.ax;let be=(()=>{class B{constructor(V,ue){if(this.app=V,ue.isInitialized())return this._delegate=ue.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=V.options;je(ke,"invalid-api-key",{appName:V.name}),je(ke,"invalid-api-key",{appName:V.name});const st=typeof window<"u"?mn:void 0;this._delegate=ue.initialize({options:{persistence:It(ke,V.name),popupRedirectResolver:st}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Zn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(V){this._delegate.languageCode=V}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(V){this._delegate.tenantId=V}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(V,ue){N.G(this._delegate,V,ue)}applyActionCode(V){return N.a2(this._delegate,V)}checkActionCode(V){return N.a3(this._delegate,V)}confirmPasswordReset(V,ue){return N.a1(this._delegate,V,ue)}createUserWithEmailAndPassword(V,ue){var ke=this;return(0,c.Z)(function*(){return Ut(ke._delegate,N.a5(ke._delegate,V,ue))})()}fetchProvidersForEmail(V){return this.fetchSignInMethodsForEmail(V)}fetchSignInMethodsForEmail(V){return N.aa(this._delegate,V)}isSignInWithEmailLink(V){return N.a8(this._delegate,V)}getRedirectResult(){var V=this;return(0,c.Z)(function*(){je(Vn(),V._delegate,"operation-not-supported-in-this-environment");const ue=yield N.j(V._delegate,mn);return ue?Ut(V._delegate,Promise.resolve(ue)):{credential:null,user:null}})()}addFrameworkForLogging(V){!function Ht(B,M){(0,N.aE)(B)._logFramework(M)}(this._delegate,V)}onAuthStateChanged(V,ue,ke){const{next:st,error:Ge,complete:Ot}=Xe(V,ue,ke);return this._delegate.onAuthStateChanged(st,Ge,Ot)}onIdTokenChanged(V,ue,ke){const{next:st,error:Ge,complete:Ot}=Xe(V,ue,ke);return this._delegate.onIdTokenChanged(st,Ge,Ot)}sendSignInLinkToEmail(V,ue){return N.a7(this._delegate,V,ue)}sendPasswordResetEmail(V,ue){return N.a0(this._delegate,V,ue||void 0)}setPersistence(V){var ue=this;return(0,c.Z)(function*(){let ke;switch(function zn(B,M){hr(Object.values(nt).includes(M),B,"invalid-persistence-type"),(0,se.b$)()?hr(M!==nt.SESSION,B,"unsupported-persistence-type"):(0,se.UG)()?hr(M===nt.NONE,B,"unsupported-persistence-type"):Zi()?hr(M===nt.NONE||M===nt.LOCAL&&(0,se.hl)(),B,"unsupported-persistence-type"):hr(M===nt.NONE||cs(),B,"unsupported-persistence-type")}(ue._delegate,V),V){case nt.SESSION:ke=N.a;break;case nt.LOCAL:ke=(yield N.az(N.i)._isAvailable())?N.i:N.b;break;case nt.NONE:ke=N.L;break;default:return N.as("argument-error",{appName:ue._delegate.name})}return ue._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(V){return this.signInWithCredential(V)}signInAnonymously(){return Ut(this._delegate,N.X(this._delegate))}signInWithCredential(V){return Ut(this._delegate,N.Y(this._delegate,V))}signInWithCustomToken(V){return Ut(this._delegate,N.$(this._delegate,V))}signInWithEmailAndPassword(V,ue){return Ut(this._delegate,N.a6(this._delegate,V,ue))}signInWithEmailLink(V,ue){return Ut(this._delegate,N.a9(this._delegate,V,ue))}signInWithPhoneNumber(V,ue){return Ti(this._delegate,N.s(this._delegate,V,ue))}signInWithPopup(V){var ue=this;return(0,c.Z)(function*(){return je(Vn(),ue._delegate,"operation-not-supported-in-this-environment"),Ut(ue._delegate,N.c(ue._delegate,V,mn))})()}signInWithRedirect(V){var ue=this;return(0,c.Z)(function*(){return je(Vn(),ue._delegate,"operation-not-supported-in-this-environment"),yield Bn(ue._delegate),N.f(ue._delegate,V,mn)})()}updateCurrentUser(V){return this._delegate.updateCurrentUser(V)}verifyPasswordResetCode(V){return N.a4(this._delegate,V)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return B.Persistence=nt,B})();function Xe(B,M,V){let ue=B;"function"!=typeof B&&({next:ue,error:M,complete:V}=B);const ke=ue;return{next:Ge=>ke(Ge&&Zn.getOrCreate(Ge)),error:M,complete:V}}function It(B,M){const V=function St(B,M){const V=_t();if(!V)return[];const ue=N.aA(Sr,B,M);switch(V.getItem(ue)){case nt.NONE:return[N.L];case nt.LOCAL:return[N.i,N.a];case nt.SESSION:return[N.a];default:return[]}}(B,M);if(typeof self<"u"&&!V.includes(N.i)&&V.push(N.i),typeof window<"u")for(const ue of[N.b,N.a])V.includes(ue)||V.push(ue);return V.includes(N.L)||V.push(N.L),V}class Tt{constructor(){this.providerId="phone",this._delegate=new N.P(Kn($.Z.auth()))}static credential(M,V){return N.P.credential(M,V)}verifyPhoneNumber(M,V){return this._delegate.verifyPhoneNumber(M,V)}unwrap(){return this._delegate}}Tt.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Tt.PROVIDER_ID=N.P.PROVIDER_ID;const Qt=N.ax;class q{constructor(M,V,ue=$.Z.app()){var ke;Qt(null===(ke=ue.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:ue.name}),this._delegate=new N.R(M,V,ue.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Y(B){B.INTERNAL.registerComponent(new ve.wA("auth-compat",M=>{const V=M.getProvider("app-compat").getImmediate(),ue=M.getProvider("auth");return new be(V,ue)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Tt,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:q,TwitterAuthProvider:N.W,Auth:be,AuthCredential:N.H,Error:se.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),B.registerVersion("@firebase/auth-compat","0.3.0")}($.Z)},8766:(ft,Ce,F)=>{F.d(Ce,{Lj:()=>Le,X3:()=>Me});var c=F(5861);let N,se;const ve=new WeakMap,fe=new WeakMap,me=new WeakMap,G=new WeakMap,W=new WeakMap;let xe={get(de,Ie,Q){if(de instanceof IDBTransaction){if("done"===Ie)return fe.get(de);if("objectStoreNames"===Ie)return de.objectStoreNames||me.get(de);if("store"===Ie)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return De(de[Ie])},set:(de,Ie,Q)=>(de[Ie]=Q,!0),has:(de,Ie)=>de instanceof IDBTransaction&&("done"===Ie||"store"===Ie)||Ie in de};function _e(de){return"function"==typeof de?function it(de){return de!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return se||(se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(de)?function(...Ie){return de.apply(Te(this),Ie),De(ve.get(this))}:function(...Ie){return De(de.apply(Te(this),Ie))}:function(Ie,...Q){const X=de.call(Te(this),Ie,...Q);return me.set(X,Ie.sort?Ie.sort():[Ie]),De(X)}}(de):(de instanceof IDBTransaction&&function Be(de){if(fe.has(de))return;const Ie=new Promise((Q,X)=>{const pe=()=>{de.removeEventListener("complete",oe),de.removeEventListener("error",Ue),de.removeEventListener("abort",Ue)},oe=()=>{Q(),pe()},Ue=()=>{X(de.error||new DOMException("AbortError","AbortError")),pe()};de.addEventListener("complete",oe),de.addEventListener("error",Ue),de.addEventListener("abort",Ue)});fe.set(de,Ie)}(de),((de,Ie)=>Ie.some(Q=>de instanceof Q))(de,function ae(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(de,xe):de)}function De(de){if(de instanceof IDBRequest)return function J(de){const Ie=new Promise((Q,X)=>{const pe=()=>{de.removeEventListener("success",oe),de.removeEventListener("error",Ue)},oe=()=>{Q(De(de.result)),pe()},Ue=()=>{X(de.error),pe()};de.addEventListener("success",oe),de.addEventListener("error",Ue)});return Ie.then(Q=>{Q instanceof IDBCursor&&ve.set(Q,de)}).catch(()=>{}),W.set(Ie,de),Ie}(de);if(G.has(de))return G.get(de);const Ie=_e(de);return Ie!==de&&(G.set(de,Ie),W.set(Ie,de)),Ie}const Te=de=>W.get(de);function Me(de,Ie,{blocked:Q,upgrade:X,blocking:pe,terminated:oe}={}){const Ue=indexedDB.open(de,Ie),Ve=De(Ue);return X&&Ue.addEventListener("upgradeneeded",mt=>{X(De(Ue.result),mt.oldVersion,mt.newVersion,De(Ue.transaction))}),Q&&Ue.addEventListener("blocked",()=>Q()),Ve.then(mt=>{oe&&mt.addEventListener("close",()=>oe()),pe&&mt.addEventListener("versionchange",()=>pe())}).catch(()=>{}),Ve}function Le(de,{blocked:Ie}={}){const Q=indexedDB.deleteDatabase(de);return Ie&&Q.addEventListener("blocked",()=>Ie()),De(Q).then(()=>{})}const Pe=["get","getKey","getAll","getAllKeys","count"],Se=["put","add","delete","clear"],He=new Map;function te(de,Ie){if(!(de instanceof IDBDatabase)||Ie in de||"string"!=typeof Ie)return;if(He.get(Ie))return He.get(Ie);const Q=Ie.replace(/FromIndex$/,""),X=Ie!==Q,pe=Se.includes(Q);if(!(Q in(X?IDBIndex:IDBObjectStore).prototype)||!pe&&!Pe.includes(Q))return;const oe=function(){var Ue=(0,c.Z)(function*(Ve,...mt){const nn=this.transaction(Ve,pe?"readwrite":"readonly");let fn=nn.store;return X&&(fn=fn.index(mt.shift())),(yield Promise.all([fn[Q](...mt),pe&&nn.done]))[0]});return function(mt){return Ue.apply(this,arguments)}}();return He.set(Ie,oe),oe}!function qe(de){xe=de(xe)}(de=>({...de,get:(Ie,Q,X)=>te(Ie,Q)||de.get(Ie,Q,X),has:(Ie,Q)=>!!te(Ie,Q)||de.has(Ie,Q)}))},5861:(ft,Ce,F)=>{function c(N,se,ae,ce,ve,fe,me){try{var G=N[fe](me),W=G.value}catch(J){return void ae(J)}G.done?se(W):Promise.resolve(W).then(ce,ve)}function $(N){return function(){var se=this,ae=arguments;return new Promise(function(ce,ve){var fe=N.apply(se,ae);function me(W){c(fe,ce,ve,me,G,"next",W)}function G(W){c(fe,ce,ve,me,G,"throw",W)}me(void 0)})}}F.d(Ce,{Z:()=>$})}},ft=>{ft(ft.s=2622)}]);